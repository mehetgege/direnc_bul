<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3C3 Trading Bot - Complete Edition with WebSocket Trading</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <style>
        /* Reset ve Temel Stiller */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 50%, #16213e 100% );
            color: #ffffff;
            min-height: 100vh;
            overflow-x: hidden;
            padding-top: 80px; /* Sticky header i√ßin bo≈üluk */
        }

        /* Light Theme */
        body.light-theme {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 50%, #dee2e6 100%);
            color: #212529;
        }

        /* Sticky Header - En √∂nemli kƒ±sƒ±m */
        .sticky-header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            background: rgba(10, 10, 10, 0.95);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(255,255,255,0.1);
            padding: 15px 20px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
            transition: all 0.3s ease;
        }

        .light-theme .sticky-header {
            background: rgba(248, 249, 250, 0.95);
            border-bottom: 1px solid rgba(0,0,0,0.1);
            color: #212529;
        }

        .sticky-content {
            max-width: 1600px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
        }

        .price-section {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .current-price {
            font-size: 1.8rem;
            font-weight: 700;
            color: #4ECDC4;
            text-shadow: 0 2px 4px rgba(78, 205, 196, 0.3);
        }

        .light-theme .current-price {
            color: #2c3e50;
            text-shadow: none;
        }

        .price-change {
            font-size: 1rem;
            font-weight: 600;
            padding: 6px 12px;
            border-radius: 20px;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .price-change.positive {
            background: rgba(0, 212, 170, 0.2);
            color: #00D4AA;
            border: 1px solid rgba(0, 212, 170, 0.3);
        }

        .price-change.negative {
            background: rgba(248, 73, 96, 0.2);
            color: #F84960;
            border: 1px solid rgba(248, 73, 96, 0.3);
        }

        .symbol-info {
            font-size: 0.9rem;
            color: #888;
            font-weight: 500;
        }

        .header-controls {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .quick-status {
            font-size: 0.8rem;
            padding: 6px 12px;
            border-radius: 15px;
            font-weight: 600;
            text-align: center;
        }

        .status-connected {
            background: rgba(0, 212, 170, 0.2);
            color: #00D4AA;
            border: 1px solid rgba(0, 212, 170, 0.3);
        }

        .status-trading {
            background: rgba(255, 193, 7, 0.2);
            color: #FFC107;
            border: 1px solid rgba(255, 193, 7, 0.3);
        }

        .status-disconnected {
            background: rgba(248, 73, 96, 0.2);
            color: #F84960;
            border: 1px solid rgba(248, 73, 96, 0.3);
        }

        /* Container ve Grid Sistem */
        .container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 20px;
        }

        .main-header {
            text-align: center;
            margin-bottom: 30px;
            background: rgba(255,255,255,0.05);
            backdrop-filter: blur(15px);
            padding: 30px;
            border-radius: 20px;
            border: 1px solid rgba(255,255,255,0.1);
            box-shadow: 0 8px 32px rgba(0,0,0,0.3);
        }

        .light-theme .main-header {
            background: rgba(255,255,255,0.8);
            border: 1px solid rgba(0,0,0,0.1);
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(380px, 1fr));
            gap: 25px;
            margin-bottom: 25px;
        }

        /* Panel Tasarƒ±mƒ± */
        .panel {
            background: rgba(255,255,255,0.05);
            backdrop-filter: blur(15px);
            border-radius: 18px;
            padding: 25px;
            border: 1px solid rgba(255,255,255,0.1);
            transition: all 0.3s ease;
            box-shadow: 0 6px 20px rgba(0,0,0,0.2);
        }

        .light-theme .panel {
            background: rgba(255,255,255,0.9);
            border: 1px solid rgba(0,0,0,0.1);
            box-shadow: 0 6px 20px rgba(0,0,0,0.1);
        }
       
        .panel:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 28px rgba(0,0,0,0.4);
            border-color: rgba(78, 205, 196, 0.3);
        }

        .panel h3 {
            color: #4ECDC4;
            margin-bottom: 20px;
            font-size: 1.2rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
            border-bottom: 2px solid rgba(78, 205, 196, 0.2);
            padding-bottom: 10px;
        }

        .light-theme .panel h3 {
            color: #2c3e50;
            border-bottom-color: rgba(44, 62, 80, 0.2);
        }

        /* Buton Tasarƒ±mlarƒ± */
        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 14px 24px;
            border-radius: 12px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
            margin: 6px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
            position: relative;
            overflow: hidden;
        }
        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.4);
        }

        .btn:active {
            transform: translateY(0);
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .btn.success {
            background: linear-gradient(135deg, #00D4AA, #00ff88);
            color: #000;
            box-shadow: 0 4px 12px rgba(0, 212, 170, 0.3);
        }

        .btn.success:hover {
            box-shadow: 0 8px 20px rgba(0, 212, 170, 0.4);
        }

        .btn.danger {
            background: linear-gradient(135deg, #F84960, #FF6B6B);
            box-shadow: 0 4px 12px rgba(248, 73, 96, 0.3);
        }

        .btn.danger:hover {
            box-shadow: 0 8px 20px rgba(248, 73, 96, 0.4);
        }

        .btn.warning {
            background: linear-gradient(135deg, #FFC107, #FF8F00);
            color: #000;
            box-shadow: 0 4px 12px rgba(255, 193, 7, 0.3);
        }

        .btn.warning:hover {
            box-shadow: 0 8px 20px rgba(255, 193, 7, 0.4);
        }

        .btn.info {
            background: linear-gradient(135deg, #4ECDC4, #45B7D1);
            color: #000;
            box-shadow: 0 4px 12px rgba(78, 205, 196, 0.3);
        }

        .btn.info:hover {
            box-shadow: 0 8px 20px rgba(78, 205, 196, 0.4);
        }

        /* Input ve Form Elemanlarƒ± */
        input, select, textarea {
            width: 100%;
            padding: 14px 16px;
            border-radius: 12px;
            border: 2px solid rgba(255,255,255,0.1);
            background: rgba(255,255,255,0.05);
            color: #fff;
            margin: 10px 0;
            font-size: 14px;
            transition: all 0.3s ease;
            backdrop-filter: blur(5px);
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #4ECDC4;
            background: rgba(255,255,255,0.1);
            box-shadow: 0 0 0 3px rgba(78, 205, 196, 0.1);
        }

        .light-theme input, .light-theme select, .light-theme textarea {
            background: rgba(0,0,0,0.05);
            border: 2px solid rgba(0,0,0,0.1);
            color: #212529;
        }

        .light-theme input:focus, .light-theme select:focus, .light-theme textarea:focus {
            border-color: #2c3e50;
            background: rgba(0,0,0,0.08);
            box-shadow: 0 0 0 3px rgba(44, 62, 80, 0.1);
        }

        input::placeholder {
            color: rgba(255,255,255,0.5);
        }

        .light-theme input::placeholder {
            color: rgba(0,0,0,0.5);
        }

        /* Responsive Tasarƒ±m */
        @media (max-width: 1200px) {
            .grid {
                grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
                gap: 20px;
            }
            
            .sticky-content {
                padding: 0 15px;
            }
            
            .current-price {
                font-size: 1.6rem;
            }
        }

        @media (max-width: 768px) {
            body {
                padding-top: 120px; /* Sticky header daha y√ºksek mobile'da */
            }
            
            .sticky-header {
                padding: 12px 15px;
            }
            
            .sticky-content {
                flex-direction: column;
                gap: 10px;
                text-align: center;
            }
            
            .current-price {
                font-size: 1.4rem;
            }
            
            .price-change {
                font-size: 0.9rem;
            }
            
            .container {
                padding: 15px;
            }
            
            .grid {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            
            .main-header {
                padding: 20px 15px;
            }
            
            .panel {
                padding: 18px;
            }
            
            .header-controls {
                flex-wrap: wrap;
                justify-content: center;
            }
        }

        @media (max-width: 480px) {
            body {
                padding-top: 140px;
            }
            
            .current-price {
                font-size: 1.2rem;
            }
            
            .price-change {
                font-size: 0.8rem;
                padding: 4px 8px;
            }
            
            .container {
                padding: 10px;
            }
            
            .main-header {
                padding: 15px 10px;
            }
            
            .btn {
                padding: 12px 20px;
                font-size: 13px;
                margin: 4px;
            }
            
            .panel {
                padding: 15px;
                border-radius: 15px;
            }
            
            .grid {
                gap: 12px;
            }
        }
        
</style>
</head>
<body>
    <!-- Sticky Header - Sayfayƒ± scroll ederken √ºstte sabit kalacak -->
    <div class="sticky-header">
        <div class="sticky-content">
            <!-- Sol taraf: Fiyat bilgileri -->
            <div class="price-section">
                <div class="current-price" id="stickyPrice">$0.00000000</div>
                <div class="price-change positive" id="stickyChange">
                    <span>üìà</span>
                    <span>+0.000%</span>
                </div>
                <div class="symbol-info" id="stickySymbol">Coin se√ßin</div>
            </div>
            
            <!-- Saƒü taraf: Durum kontrolleri -->
            <div class="header-controls">
                <div class="quick-status status-disconnected" id="stickyConnection">
                    üî¥ Baƒülantƒ±sƒ±z
                </div>
                <div class="quick-status status-trading" id="stickyTrading">
                    ‚è∏Ô∏è Trading Kapalƒ±
                </div>
                <button class="btn info" onclick="scrollToTop()" style="padding: 8px 12px; font-size: 12px;">
                    ‚¨ÜÔ∏è √úst
                </button>
            </div>
        </div>
    </div>

    <!-- Ana Container -->
    <div class="container">
        <!-- Ana Header (Sticky olmayan, detaylƒ± bilgiler i√ßin) -->
        <div class="main-header">
            <h1 style="font-size: 2.5rem; margin-bottom: 20px; background: linear-gradient(135deg, #4ECDC4, #00D4AA); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">
                üöÄ 3C3 Advanced Trading Bot with WebSocket Trading
            </h1>
            
            <div style="margin: 25px 0;">
                <div style="font-size: 3rem; font-weight: 700; color: #4ECDC4; margin-bottom: 10px; text-shadow: 0 4px 8px rgba(78, 205, 196, 0.3);" id="mainHeaderPrice">
                    $0.00000000
                </div>
                <div style="font-size: 1.3rem; display: flex; align-items: center; justify-content: center; gap: 15px; flex-wrap: wrap;">
                    <span id="mainHeaderChange" style="padding: 8px 16px; border-radius: 25px; font-weight: 600;">üìà +0.000%</span>
                    <span style="font-size: 1rem; color: #888; font-weight: 500;" id="mainHeaderSymbol">Sembol yok</span>
                    <span style="font-size: 0.9rem; color: #666;" id="lastUpdateTime">Son g√ºncelleme: -</span>
                </div>
            </div>
            
            <!-- Durum ƒ∞ndikat√∂rleri -->
            <div style="display: flex; justify-content: center; gap: 25px; margin-top: 30px; flex-wrap: wrap;">
                <div style="text-align: center; padding: 15px; background: rgba(255,255,255,0.05); border-radius: 15px; min-width: 140px;">
                    <div style="font-size: 0.8rem; color: #888; margin-bottom: 8px; text-transform: uppercase; letter-spacing: 1px;">Baƒülantƒ± Durumu</div>
                    <div id="mainConnectionStatus" style="font-size: 1rem; font-weight: 600; color: #F84960;">üî¥ Baƒülantƒ± Yok</div>
                </div>
                
                <div style="text-align: center; padding: 15px; background: rgba(255,255,255,0.05); border-radius: 15px; min-width: 140px;">
                    <div style="font-size: 0.8rem; color: #888; margin-bottom: 8px; text-transform: uppercase; letter-spacing: 1px;">AI Durumu</div>
                    <div id="mainAiStatus" style="font-size: 1rem; font-weight: 600; color: #4ECDC4;">üß† AI Bekliyor</div>
                </div>
                
                <div style="text-align: center; padding: 15px; background: rgba(255,255,255,0.05); border-radius: 15px; min-width: 140px;">
                    <div style="font-size: 0.8rem; color: #888; margin-bottom: 8px; text-transform: uppercase; letter-spacing: 1px;">Trading Durumu</div>
                    <div id="mainTradingStatus" style="font-size: 1rem; font-weight: 600; color: #FFC107;">‚è∏Ô∏è Kapalƒ±</div>
                </div>
                
                <div style="text-align: center; padding: 15px; background: rgba(255,255,255,0.05); border-radius: 15px; min-width: 140px;">
                    <div style="font-size: 0.8rem; color: #888; margin-bottom: 8px; text-transform: uppercase; letter-spacing: 1px;">Aktif Sinyal</div>
                    <div id="mainActiveSignals" style="font-size: 1rem; font-weight: 600; color: #888;">‚è≥ Sinyal Yok</div>
                </div>
            </div>
            
            <!-- Hƒ±zlƒ± Eylemler -->
            <div style="margin-top: 25px; display: flex; justify-content: center; gap: 15px; flex-wrap: wrap;">
                <button class="btn success" onclick="quickConnect()" id="quickConnectBtn">
                    üîå Hƒ±zlƒ± Baƒülan
                </button>
                <button class="btn warning" onclick="toggleTheme()">
                    üåô Tema Deƒüi≈ütir
                </button>
                <button class="btn info" onclick="showHelp()">
                    ‚ùì Yardƒ±m
                </button>
                <button class="btn" onclick="showStats()">
                    üìä ƒ∞statistikler
                </button>
            </div>
        </div>

        <!-- Ana Grid Ba≈ülangƒ±cƒ± -->
        <div class="grid">
            <!-- Baƒülantƒ± ve Kontrol Paneli -->
            <div class="panel">
                <h3>üîó Baƒülantƒ± ve Kontrol Merkezi</h3>
                
                <!-- Coin Se√ßimi -->
                <div style="margin-bottom: 25px;">
                    <label style="font-size: 1rem; color: #ccc; margin-bottom: 12px; display: block; font-weight: 500;">
                        üìà Analiz Edilecek Coin:
                    </label>
                    <div style="display: flex; gap: 10px; margin-bottom: 15px;">
                        <input type="text" id="manualSymbol" placeholder="Coin sembol√º (BTC, ETH, PEPE, DOGE...)" 
                               style="flex: 1;" value="BTC">
                        <button class="btn info" onclick="searchCoin()" style="padding: 14px 20px;">
                            üîç Ara
                        </button>
                    </div>
                    
                    <!-- Pop√ºler Coinler -->
                    <div style="margin-bottom: 15px;">
                        <div style="font-size: 0.8rem; color: #888; margin-bottom: 8px;">Pop√ºler Coinler:</div>
                        <div style="display: flex; gap: 8px; flex-wrap: wrap;">
                            <button class="btn" style="padding: 6px 12px; font-size: 12px;" onclick="selectCoin('BTC')">BTC</button>
                            <button class="btn" style="padding: 6px 12px; font-size: 12px;" onclick="selectCoin('ETH')">ETH</button>
                            <button class="btn" style="padding: 6px 12px; font-size: 12px;" onclick="selectCoin('PEPE')">PEPE</button>
                            <button class="btn" style="padding: 6px 12px; font-size: 12px;" onclick="selectCoin('DOGE')">DOGE</button>
                            <button class="btn" style="padding: 6px 12px; font-size: 12px;" onclick="selectCoin('SHIB')">SHIB</button>
                        </div>
                    </div>
                    
                    <!-- Baƒülantƒ± Butonu -->
                    <button class="btn success" id="connectBtn" onclick="toggleConnection()" 
                            style="width: 100%; font-size: 1.1rem; padding: 16px;">
                        üîå WebSocket Baƒülantƒ±sƒ±nƒ± Ba≈ülat
                    </button>
                </div>
                
                
<!-- Detaylƒ± Baƒülantƒ± Bilgileri -->
                <div style="background: rgba(255,255,255,0.03); border-radius: 12px; padding: 20px; margin-bottom: 20px; border: 1px solid rgba(255,255,255,0.1);">
                    <h4 style="color: #4ECDC4; margin-bottom: 15px; font-size: 1rem; display: flex; align-items: center; gap: 8px;">
                        üì° Baƒülantƒ± Detaylarƒ±
                    </h4>
                    
                    <!-- 2x3 Grid ile baƒülantƒ± bilgileri -->
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px; font-size: 0.9rem;">
                        <div style="padding: 8px; background: rgba(255,255,255,0.05); border-radius: 8px;">
                            <div style="color: #888; font-size: 0.75rem; margin-bottom: 4px;">WebSocket Durumu:</div>
                            <div id="wsStatus" style="color: #F84960; font-weight: 600;">üî¥ Kapalƒ±</div>
                        </div>
                        
                        <div style="padding: 8px; background: rgba(255,255,255,0.05); border-radius: 8px;">
                            <div style="color: #888; font-size: 0.75rem; margin-bottom: 4px;">Trading WS:</div>
                            <div id="tradingWsStatus" style="color: #F84960; font-weight: 600;">üî¥ Kapalƒ±</div>
                        </div>
                        
                        <div style="padding: 8px; background: rgba(255,255,255,0.05); border-radius: 8px;">
                            <div style="color: #888; font-size: 0.75rem; margin-bottom: 4px;">Aktif Sembol:</div>
                            <div id="currentSymbol" style="color: #4ECDC4; font-weight: 600;">-</div>
                        </div>
                        
                        <div style="padding: 8px; background: rgba(255,255,255,0.05); border-radius: 8px;">
                            <div style="color: #888; font-size: 0.75rem; margin-bottom: 4px;">Son G√ºncelleme:</div>
                            <div id="lastUpdate" style="color: #888; font-weight: 600;">-</div>
                        </div>
                        
                        <div style="padding: 8px; background: rgba(255,255,255,0.05); border-radius: 8px;">
                            <div style="color: #888; font-size: 0.75rem; margin-bottom: 4px;">Ping S√ºresi:</div>
                            <div id="pingStatus" style="color: #888; font-weight: 600;">-</div>
                        </div>
                        
                        <div style="padding: 8px; background: rgba(255,255,255,0.05); border-radius: 8px;">
                            <div style="color: #888; font-size: 0.75rem; margin-bottom: 4px;">√áalƒ±≈üma S√ºresi:</div>
                            <div id="uptime" style="color: #888; font-weight: 600;">-</div>
                        </div>
                    </div>
                </div>

                <!-- Hƒ±zlƒ± Eylemler -->
                <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                    <button class="btn warning" onclick="toggleTheme()" style="flex: 1; min-width: 120px;">
                        üåô Tema
                    </button>
                    <button class="btn info" onclick="showConnectionLog()" style="flex: 1; min-width: 120px;">
                        üìã Log
                    </button>
                    <button class="btn" onclick="resetConnection()" style="flex: 1; min-width: 120px;">
                        üîÑ Reset
                    </button>
                </div>
            </div>

            <!-- Live Trading Panel -->
            <div class="panel">
                <h3>üöÄ Live Trading Merkezi</h3>
                
                <!-- API Credentials B√∂l√ºm√º -->
                <div style="margin-bottom: 25px;">
                    <label style="font-size: 1rem; color: #ccc; margin-bottom: 12px; display: block; font-weight: 500;">
                        üîë MEXC API Credentials:
                    </label>
                    
                    <!-- API Key Input -->
                    <div style="margin-bottom: 12px;">
                        <label style="font-size: 0.8rem; color: #888; margin-bottom: 6px; display: block;">API Key:</label>
                        <input type="password" id="apiKey" placeholder="API Key buraya yapƒ±≈ütƒ±rƒ±n..." 
                               style="margin-bottom: 0;" 
                               onchange="saveApiCredentials()"
                               onfocus="showApiHelp('key')">
                    </div>
                    
                    <!-- API Secret Input -->
                    <div style="margin-bottom: 15px;">
                        <label style="font-size: 0.8rem; color: #888; margin-bottom: 6px; display: block;">API Secret:</label>
                        <input type="password" id="apiSecret" placeholder="API Secret buraya yapƒ±≈ütƒ±rƒ±n..." 
                               style="margin-bottom: 0;" 
                               onchange="saveApiCredentials()"
                               onfocus="showApiHelp('secret')">
                    </div>
                    
                    <!-- API Test Butonu -->
                    <button class="btn info" onclick="testApiCredentials()" id="testApiBtn" style="width: 100%; margin-bottom: 15px;">
                        üß™ API Credentials Test Et
                    </button>
                    
                    <!-- G√ºvenlik Uyarƒ±sƒ± -->
                    <div style="font-size: 0.75rem; color: #FFC107; padding: 12px; background: rgba(255,193,7,0.1); border-radius: 8px; border-left: 4px solid #FFC107; margin-bottom: 15px;">
                        <div style="font-weight: 600; margin-bottom: 4px;">‚ö†Ô∏è G√ºvenlik Uyarƒ±sƒ±:</div>
                        <div>‚Ä¢ API anahtarlarƒ±nƒ±z tarayƒ±cƒ±da g√ºvenli deƒüil</div>
                        <div>‚Ä¢ Sadece test i√ßin d√º≈ü√ºk miktarlar kullanƒ±n</div>
                        <div>‚Ä¢ Ger√ßek trading i√ßin VPS server kullanƒ±n</div>
                    </div>
                </div>
                
                <!-- Trading Kontrol Alanƒ± -->
                <div style="margin-bottom: 25px;">
                    <label style="font-size: 1rem; color: #ccc; margin-bottom: 12px; display: block; font-weight: 500;">
                        ‚ö° Trading Kontrolleri:
                    </label>
                    
                    <!-- Trading Durum Kartlarƒ± -->
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 15px;">
                        <div style="padding: 12px; background: rgba(255,255,255,0.05); border-radius: 10px; text-align: center; border: 2px solid transparent;" id="tradingStatusCard">
                            <div style="font-size: 0.75rem; color: #888; margin-bottom: 6px; text-transform: uppercase;">Trading Durumu</div>
                            <div style="font-size: 1.1rem; font-weight: 700; color: #FFC107;" id="tradingStatus">‚è∏Ô∏è Kapalƒ±</div>
                        </div>
                        
                        <div style="padding: 12px; background: rgba(255,255,255,0.05); border-radius: 10px; text-align: center;">
                            <div style="font-size: 0.75rem; color: #888; margin-bottom: 6px; text-transform: uppercase;">Position Size</div>
                            <div style="font-size: 1.1rem; font-weight: 700; color: #4ECDC4;" id="positionSizeDisplay">50 USDT</div>
                        </div>
                    </div>
                    
                    <!-- Ana Trading Butonu -->
                    <button class="btn success" id="tradingToggle" onclick="toggleTrading()" 
                            style="width: 100%; margin-bottom: 15px; font-size: 1.2rem; padding: 18px; position: relative; overflow: hidden;">
                        <span id="tradingButtonText">üü¢ Trading Sistemini Ba≈ülat</span>
                        <div id="tradingButtonLoader" style="display: none; position: absolute; right: 20px;">
                            <div style="width: 20px; height: 20px; border: 2px solid #ffffff40; border-top: 2px solid #ffffff; border-radius: 50%; animation: spin 1s linear infinite;"></div>
                        </div>
                    </button>
                    
                    <!-- Trading A√ßƒ±klama -->
                    <div style="font-size: 0.8rem; color: #666; text-align: center; padding: 10px; background: rgba(255,255,255,0.03); border-radius: 8px;">
                        üí° <strong>Otomatik Trading:</strong> Sinyal geldiƒüinde belirlenen parametrelerle otomatik pozisyon a√ßƒ±lƒ±r
                    </div>
                </div>
                
<!-- Aktif Pozisyon G√∂r√ºnt√ºleme Alanƒ± -->
                <div style="margin-bottom: 20px;">
                    <label style="font-size: 1rem; color: #ccc; margin-bottom: 12px; display: block; font-weight: 500;">
                        üìä Aktif Pozisyon Durumu:
                    </label>
                    
                    <!-- Pozisyon Detay Kartƒ± -->
                    <div id="positionStatus" style="min-height: 120px; background: rgba(0,0,0,0.4); border-radius: 12px; padding: 20px; border: 2px solid rgba(255,255,255,0.1); position: relative; overflow: hidden;">
                        <!-- Varsayƒ±lan Durum: Pozisyon Yok -->
                        <div id="noPositionState" style="text-align: center; color: #888; margin-top: 25px;">
                            <div style="font-size: 2.5rem; margin-bottom: 10px;">üìä</div>
                            <div style="font-size: 1rem; font-weight: 500; margin-bottom: 5px;">Aktif pozisyon bulunmuyor</div>
                            <div style="font-size: 0.8rem; color: #666;">Sinyal geldiƒüinde otomatik pozisyon a√ßƒ±lacak</div>
                        </div>
                        
                        <!-- Aktif Pozisyon Durumu (JavaScript ile g√∂sterilecek) -->
                        <div id="activePositionState" style="display: none;">
                            <!-- Pozisyon detaylarƒ± buraya dinamik olarak eklenecek -->
                        </div>
                    </div>
                </div>

                <!-- Hƒ±zlƒ± Trading ƒ∞statistikleri -->
                <div style="margin-bottom: 15px;">
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">
                        <div style="padding: 12px; background: rgba(0,212,170,0.1); border-radius: 10px; text-align: center; border: 1px solid rgba(0,212,170,0.2);">
                            <div style="font-size: 0.75rem; color: #888; margin-bottom: 6px;">G√ºnl√ºk PnL</div>
                            <div style="font-size: 1.2rem; font-weight: 700; color: #00D4AA;" id="dailyPnLDisplay">+0.00 USDT</div>
                        </div>
                        
                        <div style="padding: 12px; background: rgba(78,205,196,0.1); border-radius: 10px; text-align: center; border: 1px solid rgba(78,205,196,0.2);">
                            <div style="font-size: 0.75rem; color: #888; margin-bottom: 6px;">Toplam ƒ∞≈ülem</div>
                            <div style="font-size: 1.2rem; font-weight: 700; color: #4ECDC4;" id="totalTradesDisplay">0</div>
                        </div>
                    </div>
                </div>

                <!-- Manuel ƒ∞≈ülem Butonu -->
                <button class="btn warning" onclick="openManualTradeModal()" style="width: 100%; margin-bottom: 10px;">
                    ‚úã Manuel ƒ∞≈ülem A√ß
                </button>
            </div>


            <!-- Aktif Sinyal Detaylarƒ± Paneli -->
            <div class="panel">
                <h3>üéØ Aktif Sinyal Detaylarƒ±</h3>
                
                <!-- Ana Sinyal G√∂r√ºnt√ºleme Kartƒ± -->
                <div id="currentSignal" class="signal-box" style="min-height: 140px; position: relative; overflow: hidden;">
                    <!-- Varsayƒ±lan Durum: Sinyal Yok -->
                    <div id="noSignalState" style="text-align: center; color: #888; margin-top: 35px;">
                        <div style="font-size: 3rem; margin-bottom: 12px;">‚è≥</div>
                        <div style="font-size: 1.1rem; font-weight: 500; margin-bottom: 8px;">Sinyal bekleniyor...</div>
                        <div style="font-size: 0.85rem; color: #666;">AI market verilerini analiz ediyor</div>
                    </div>
                    
                    <!-- Aktif Sinyal Durumu (JavaScript ile g√∂sterilecek) -->
                    <div id="activeSignalState" style="display: none;">
                        <!-- Sinyal detaylarƒ± buraya dinamik olarak eklenecek -->
                    </div>
                </div>
                
                <!-- Sinyal G√ºven Seviyesi G√∂stergesi -->
                <div style="margin-top: 20px;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                        <span style="font-size: 0.9rem; color: #ccc; font-weight: 500;">G√ºven Seviyesi:</span>
                        <span id="confidencePercent" style="color: #4ECDC4; font-weight: 600; font-size: 1rem;">0%</span>
                    </div>
                    
                    <!-- Animated Progress Bar -->
                    <div style="background: rgba(255,255,255,0.1); border-radius: 10px; height: 12px; overflow: hidden; position: relative;">
                        <div id="confidenceBar" style="background: linear-gradient(90deg, #F84960 0%, #FFC107 50%, #00D4AA 100%); height: 100%; width: 0%; transition: width 0.8s ease; border-radius: 10px; position: relative;">
                            <!-- Animasyonlu efekt -->
                            <div style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent); animation: shimmer 2s infinite;"></div>
                        </div>
                    </div>
                    
                    <!-- G√ºven seviyesi a√ßƒ±klamasƒ± -->
                    <div style="display: flex; justify-content: space-between; font-size: 0.7rem; margin-top: 6px; color: #888;">
                        <span>D√º≈ü√ºk (0-50%)</span>
                        <span>Orta (50-75%)</span>
                        <span>Y√ºksek (75-100%)</span>
                    </div>
                </div>

                <!-- Detaylƒ± Sinyal Bilgileri Grid -->
                <div style="margin-top: 20px;">
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; font-size: 0.85rem;">
                        <div style="padding: 10px; background: rgba(255,255,255,0.05); border-radius: 8px;">
                            <div style="color: #888; font-size: 0.75rem; margin-bottom: 4px;">Entry Price:</div>
                            <div id="signalEntryPrice" style="color: #4ECDC4; font-weight: 600;">-</div>
                        </div>
                        
                        <div style="padding: 10px; background: rgba(255,255,255,0.05); border-radius: 8px;">
                            <div style="color: #888; font-size: 0.75rem; margin-bottom: 4px;">Strateji:</div>
                            <div id="signalStrategy" style="color: #FFC107; font-weight: 600;">-</div>
                        </div>
                        
                        <div style="padding: 10px; background: rgba(0,212,170,0.1); border-radius: 8px; border: 1px solid rgba(0,212,170,0.2);">
                            <div style="color: #888; font-size: 0.75rem; margin-bottom: 4px;">Take Profit:</div>
                            <div id="signalTakeProfit" style="color: #00D4AA; font-weight: 600;">-</div>
                        </div>
                        
                        <div style="padding: 10px; background: rgba(248,73,96,0.1); border-radius: 8px; border: 1px solid rgba(248,73,96,0.2);">
                            <div style="color: #888; font-size: 0.75rem; margin-bottom: 4px;">Stop Loss:</div>
                            <div id="signalStopLoss" style="color: #F84960; font-weight: 600;">-</div>
                        </div>
                        
                        <div style="padding: 10px; background: rgba(255,255,255,0.05); border-radius: 8px;">
                            <div style="color: #888; font-size: 0.75rem; margin-bottom: 4px;">S√ºre:</div>
                            <div id="signalDuration" style="color: #888; font-weight: 600;">-</div>
                        </div>
                        
                        <div style="padding: 10px; background: rgba(255,255,255,0.05); border-radius: 8px;">
                            <div style="color: #888; font-size: 0.75rem; margin-bottom: 4px;">Zaman Damgasƒ±:</div>
                            <div id="signalTimestamp" style="color: #888; font-weight: 600;">-</div>
                        </div>
                    </div>
                </div>

                <!-- Sinyal Eylem Butonlarƒ± -->
                <div style="margin-top: 20px; display: flex; gap: 10px;">
                    <button class="btn success" onclick="acceptSignal()" id="acceptSignalBtn" style="flex: 1;" disabled>
                        ‚úÖ Sinyali Kabul Et
                    </button>
                    <button class="btn danger" onclick="rejectSignal()" id="rejectSignalBtn" style="flex: 1;" disabled>
                        ‚ùå Sinyali Reddet
                    </button>
                </div>
                
                <!-- Test Sinyal Butonu -->
                <button class="btn info" onclick="generateTestSignal()" style="width: 100%; margin-top: 10px;">
                    üß™ Test Sinyali Olu≈ütur
                </button>
            </div>
            
<!-- Debug Console Panel - Geli≈ütiriciler i√ßin √∂nemli -->
            <div class="panel">
                <h3>üîß Debug Console ve API Test</h3>
                
                <!-- Debug Console Kontrolleri -->
                <div style="margin-bottom: 20px;">
                    <div style="display: flex; gap: 10px; margin-bottom: 12px; flex-wrap: wrap;">
                        <button class="btn info" onclick="clearDebugConsole()" style="padding: 8px 16px; font-size: 0.85rem;">
                            üóëÔ∏è Temizle
                        </button>
                        <button class="btn" onclick="toggleDebugAutoScroll()" id="autoScrollBtn" style="padding: 8px 16px; font-size: 0.85rem;">
                            üìú Auto Scroll: ON
                        </button>
                        <button class="btn warning" onclick="exportDebugLog()" style="padding: 8px 16px; font-size: 0.85rem;">
                            üì§ Log Export
                        </button>
                    </div>
                </div>
                
                <!-- Ger√ßek Zamanlƒ± Debug Output - Mobil friendly scrollable area -->
                <div id="mobileDebugConsole" style="
                    background: rgba(0,0,0,0.9); 
                    border-radius: 10px; 
                    padding: 15px; 
                    max-height: 250px; 
                    overflow-y: auto; 
                    font-family: 'Courier New', 'Monaco', monospace; 
                    font-size: 11px;
                    border: 2px solid rgba(78, 205, 196, 0.3);
                    scrollbar-width: thin;
                    scrollbar-color: #4ECDC4 transparent;
                ">
                    <div style="color: #4ECDC4; border-left: 3px solid #4ECDC4; padding-left: 8px;">
                        [System Ready] 3C3 Trading Bot debug console hazƒ±r...
                    </div>
                    <div style="color: #888; border-left: 3px solid #888; padding-left: 8px; margin-top: 4px;">
                        [Info] WebSocket baƒülantƒ±sƒ± i√ßin coin sembol√º girin
                    </div>
                </div>
                
                <!-- API Test Ara√ßlarƒ± -->
                <div style="margin-top: 20px;">
                    <h4 style="color: #FFC107; font-size: 0.95rem; margin-bottom: 12px;">üß™ API Test Ara√ßlarƒ±:</h4>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                        <button class="btn info" onclick="testApiConnection()" style="padding: 10px; font-size: 0.8rem;">
                            üîå API Baƒülantƒ± Test
                        </button>
                        <button class="btn info" onclick="testWithDifferentProxies()" style="padding: 10px; font-size: 0.8rem;">
                            üîÑ Proxy Test
                        </button>
                        <button class="btn info" onclick="pingMexcServers()" style="padding: 10px; font-size: 0.8rem;">
                            üì° MEXC Ping Test
                        </button>
                        <button class="btn info" onclick="checkSystemHealth()" style="padding: 10px; font-size: 0.8rem;">
                            üíö Sistem Saƒülƒ±k Check
                        </button>
                    </div>
                </div>
            </div>

            <!-- Bot Ayarlarƒ± Panel - Kullanƒ±cƒ± konfig√ºrasyonlarƒ± i√ßin kritik -->
            <div class="panel">
                <h3>‚öôÔ∏è Bot Ayarlarƒ± ve AI Konfig√ºrasyonu</h3>
                
                <!-- Sinyal Parametreleri B√∂l√ºm√º -->
                <div style="margin-bottom: 25px;">
                    <h4 style="color: #4ECDC4; font-size: 1rem; margin-bottom: 15px; display: flex; align-items: center; gap: 8px;">
                        üéØ Sinyal Parametreleri
                    </h4>
                    
                    <!-- Volume Threshold Slider -->
                    <div style="margin-bottom: 15px;">
                        <label style="font-size: 0.85rem; color: #ccc; margin-bottom: 8px; display: block;">
                            Volume E≈üiƒüi (1.2x - 5.0x):
                        </label>
                        <div style="display: flex; align-items: center; gap: 12px;">
                            <input type="range" id="volumeThreshold" min="1.2" max="5.0" step="0.1" value="2.0" 
                                   style="flex: 1; width: auto; margin: 0;" 
                                   onchange="updateBotSetting('volumeThreshold', this.value)"
                                   oninput="updateSliderDisplay('volumeThresholdValue', this.value + 'x')">
                            <span id="volumeThresholdValue" style="color: #00D4AA; font-weight: 600; min-width: 45px;">2.0x</span>
                        </div>
                        <div style="font-size: 0.7rem; color: #666; margin-top: 4px;">
                            Y√ºksek deƒüer = Daha g√ºvenilir ama daha az sinyal
                        </div>
                    </div>
                    
                    <!-- Take Profit Percentage Slider -->
                    <div style="margin-bottom: 15px;">
                        <label style="font-size: 0.85rem; color: #ccc; margin-bottom: 8px; display: block;">
                            Take Profit Y√ºzdesi (0.3% - 3.0%):
                        </label>
                        <div style="display: flex; align-items: center; gap: 12px;">
                            <input type="range" id="takeProfitPercent" min="0.3" max="3.0" step="0.1" value="0.8" 
                                   style="flex: 1; width: auto; margin: 0;" 
                                   onchange="updateBotSetting('takeProfitPercent', this.value)"
                                   oninput="updateSliderDisplay('takeProfitValue', this.value + '%')">
                            <span id="takeProfitValue" style="color: #00D4AA; font-weight: 600; min-width: 45px;">0.8%</span>
                        </div>
                    </div>

                    <!-- Stop Loss Percentage Slider -->
                    <div style="margin-bottom: 15px;">
                        <label style="font-size: 0.85rem; color: #ccc; margin-bottom: 8px; display: block;">
                            Stop Loss Y√ºzdesi (0.2% - 2.0%):
                        </label>
                        <div style="display: flex; align-items: center; gap: 12px;">
                            <input type="range" id="stopLossPercent" min="0.2" max="2.0" step="0.1" value="0.5" 
                                   style="flex: 1; width: auto; margin: 0;" 
                                   onchange="updateBotSetting('stopLossPercent', this.value)"
                                   oninput="updateSliderDisplay('stopLossValue', this.value + '%')">
                            <span id="stopLossValue" style="color: #F84960; font-weight: 600; min-width: 45px;">0.5%</span>
                        </div>
                    </div>

                    <!-- Minimum Confidence Slider -->
                    <div style="margin-bottom: 15px;">
                        <label style="font-size: 0.85rem; color: #ccc; margin-bottom: 8px; display: block;">
                            Minimum G√ºven Seviyesi (50% - 95%):
                        </label>
                        <div style="display: flex; align-items: center; gap: 12px;">
                            <input type="range" id="minConfidence" min="50" max="95" step="5" value="70" 
                                   style="flex: 1; width: auto; margin: 0;" 
                                   onchange="updateBotSetting('minConfidence', this.value)"
                                   oninput="updateSliderDisplay('minConfidenceValue', this.value + '%')">
                            <span id="minConfidenceValue" style="color: #4ECDC4; font-weight: 600; min-width: 45px;">70%</span>
                        </div>
                    </div>

                    <!-- Position Size Input -->
                    <div style="margin-bottom: 15px;">
                        <label style="font-size: 0.85rem; color: #ccc; margin-bottom: 8px; display: block;">
                            Position Size (USDT):
                        </label>
                        <div style="display: flex; align-items: center; gap: 12px;">
                            <input type="number" id="positionSizeInput" min="0.1" max="10000" step="0.1" value="50" 
                                   style="flex: 1; width: auto; margin: 0; padding: 8px 12px;" 
                                   onchange="updatePositionSize(this.value)"
                                   placeholder="Position boyutu...">
                            <span style="color: #4ECDC4; font-weight: 600; font-size: 0.9rem;">USDT</span>
                        </div>
                        <div style="font-size: 0.7rem; color: #666; margin-top: 4px;">
                            Min: 0.1 USDT | Max: 10,000 USDT | Leverage: 20x
                        </div>
                    </div>
                </div>

                <!-- AI Ayarlarƒ± B√∂l√ºm√º -->
                <div style="margin-bottom: 25px;">
                    <h4 style="color: #FF6B6B; font-size: 1rem; margin-bottom: 15px; display: flex; align-items: center; gap: 8px;">
                        üß† AI √ñƒürenme Ayarlarƒ±
                    </h4>
                    
                    <!-- AI √ñzellikleri Checkboxlar -->
                    <div style="margin-bottom: 15px;">
                        <label style="font-size: 0.85rem; color: #ccc; display: flex; align-items: center; gap: 10px; margin-bottom: 8px; cursor: pointer;">
                            <input type="checkbox" id="autoOptimization" checked 
                                   style="width: auto; margin: 0;" 
                                   onchange="updateBotSetting('autoOptimization', this.checked)">
                            <span>Otomatik Optimizasyon (AI kendini geli≈ütirir)</span>
                        </label>
                        
                        <label style="font-size: 0.85rem; color: #ccc; display: flex; align-items: center; gap: 10px; margin-bottom: 8px; cursor: pointer;">
                            <input type="checkbox" id="adaptiveThresholds" checked 
                                   style="width: auto; margin: 0;" 
                                   onchange="updateBotSetting('adaptiveThresholds', this.checked)">
                            <span>Adaptif E≈üikler (Performansa g√∂re ayarlama)</span>
                        </label>
                        
                        <label style="font-size: 0.85rem; color: #ccc; display: flex; align-items: center; gap: 10px; cursor: pointer;">
                            <input type="checkbox" id="riskManagement" checked 
                                   style="width: auto; margin: 0;" 
                                   onchange="updateBotSetting('riskManagement', this.checked)">
                            <span>Geli≈ümi≈ü Risk Y√∂netimi</span>
                        </label>
                    </div>

                    <!-- Learning Speed Dropdown -->
                    <div style="margin-bottom: 15px;">
                        <label style="font-size: 0.85rem; color: #ccc; margin-bottom: 8px; display: block;">
                            AI √ñƒürenme Hƒ±zƒ±:
                        </label>
                        <select id="learningSpeed" 
                                style="width: 100%; margin: 0; padding: 10px;" 
                                onchange="updateBotSetting('learningSpeed', this.value)">
                            <option value="slow">üêå Yava≈ü - Konservatif √∂ƒürenme</option>
                            <option value="medium" selected>‚ö° Orta - Dengeli √∂ƒürenme</option>
                            <option value="fast">üöÄ Hƒ±zlƒ± - Agresif √∂ƒürenme</option>
                        </select>
                    </div>
                </div>
               
<!-- Bot Ayarlarƒ± Eylem Butonlarƒ± - Bu butonlar kullanƒ±cƒ±nƒ±n yapƒ±landƒ±rmalarƒ±nƒ± y√∂netir -->
                <div style="margin-top: 20px;">
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 15px;">
                        <button class="btn success" onclick="saveSettings()" style="padding: 12px; font-size: 0.9rem;">
                            üíæ Ayarlarƒ± Kaydet
                        </button>
                        <button class="btn warning" onclick="resetSettings()" style="padding: 12px; font-size: 0.9rem;">
                            üîÑ Varsayƒ±lana D√∂n
                        </button>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 8px;">
                        <button class="btn danger" onclick="resetAI()" style="padding: 10px; font-size: 0.8rem;">
                            üß† AI Sƒ±fƒ±rla
                        </button>
                        <button class="btn info" onclick="exportSettings()" style="padding: 10px; font-size: 0.8rem;">
                            üì§ Export
                        </button>
                        <button class="btn info" onclick="importSettings()" style="padding: 10px; font-size: 0.8rem;">
                            üì• Import
                        </button>
                    </div>
                </div>
            </div>


            <!-- Strateji Performans Analizi Paneli - AI √∂ƒürenme sisteminin kalbi -->
            <div class="panel">
                <h3>üìä Strateji Performans Analizi</h3>
                
                <!-- Bu panel, AI'nin farklƒ± trading stratejilerinin ba≈üarƒ±sƒ±nƒ± takip eder -->
                <div style="margin-bottom: 20px;">
                    <div style="font-size: 0.85rem; color: #888; margin-bottom: 12px;">
                        AI sisteminin her strateji i√ßin √∂ƒürendiƒüi performans metrikleri:
                    </div>
                    
                    <!-- Whale Strategy Performance - B√ºy√ºk balina emirlerini takip eden strateji -->
                    <div style="background: rgba(255,107,107,0.1); border-radius: 10px; padding: 15px; margin-bottom: 12px; border: 1px solid rgba(255,107,107,0.2);">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                            <span style="font-weight: 600; color: #FF6B6B; display: flex; align-items: center; gap: 8px;">
                                üêã Whale Orders Stratejisi
                                <span style="font-size: 0.7rem; background: rgba(255,107,107,0.2); padding: 2px 6px; border-radius: 4px;" id="whaleStrategyStatus">√ñƒüreniyor</span>
                            </span>
                            <span id="whaleSuccess" style="color: #FF6B6B; font-weight: 700; font-size: 1.1rem;">0% (0/0)</span>
                        </div>
                        <div style="font-size: 0.75rem; color: #888; display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px;">
                            <span>Avg Profit: <strong id="whaleAvgProfit" style="color: #FF6B6B;">0.00%</strong></span>
                            <span>Avg Time: <strong id="whaleAvgTime" style="color: #FF6B6B;">-</strong></span>
                            <span>G√ºvenilirlik: <strong id="whaleReliability" style="color: #FF6B6B;">-%</strong></span>
                        </div>
                    </div>
                    
                    <!-- Order Imbalance Strategy - Emir dengesizliklerini analiz eden strateji -->
                    <div style="background: rgba(255,193,7,0.1); border-radius: 10px; padding: 15px; margin-bottom: 12px; border: 1px solid rgba(255,193,7,0.2);">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                            <span style="font-weight: 600; color: #FFC107; display: flex; align-items: center; gap: 8px;">
                                ‚öñÔ∏è Order Imbalance Stratejisi
                                <span style="font-size: 0.7rem; background: rgba(255,193,7,0.2); padding: 2px 6px; border-radius: 4px;" id="imbalanceStrategyStatus">√ñƒüreniyor</span>
                            </span>
                            <span id="imbalanceSuccess" style="color: #FFC107; font-weight: 700; font-size: 1.1rem;">0% (0/0)</span>
                        </div>
                        <div style="font-size: 0.75rem; color: #888; display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px;">
                            <span>Avg Profit: <strong id="imbalanceAvgProfit" style="color: #FFC107;">0.00%</strong></span>
                            <span>Avg Time: <strong id="imbalanceAvgTime" style="color: #FFC107;">-</strong></span>
                            <span>G√ºvenilirlik: <strong id="imbalanceReliability" style="color: #FFC107;">-%</strong></span>
                        </div>
                    </div>
                    
                    <!-- Volume Spike Strategy - Hacim patlamalarƒ±nƒ± takip eden strateji -->
                    <div style="background: rgba(78,205,196,0.1); border-radius: 10px; padding: 15px; margin-bottom: 12px; border: 1px solid rgba(78,205,196,0.2);">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                            <span style="font-weight: 600; color: #4ECDC4; display: flex; align-items: center; gap: 8px;">
                                üìà Volume Spike Stratejisi
                                <span style="font-size: 0.7rem; background: rgba(78,205,196,0.2); padding: 2px 6px; border-radius: 4px;" id="volumeStrategyStatus">√ñƒüreniyor</span>
                            </span>
                            <span id="volumeSuccess" style="color: #4ECDC4; font-weight: 700; font-size: 1.1rem;">0% (0/0)</span>
                        </div>
                        <div style="font-size: 0.75rem; color: #888; display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px;">
                            <span>Avg Profit: <strong id="volumeAvgProfit" style="color: #4ECDC4;">0.00%</strong></span>
                            <span>Avg Time: <strong id="volumeAvgTime" style="color: #4ECDC4;">-</strong></span>
                            <span>G√ºvenilirlik: <strong id="volumeReliability" style="color: #4ECDC4;">-%</strong></span>
                        </div>
                    </div>
                    
                    <!-- Support/Resistance Strategy - Destek ve diren√ß seviyelerini analiz eden strateji -->
                    <div style="background: rgba(0,212,170,0.1); border-radius: 10px; padding: 15px; margin-bottom: 12px; border: 1px solid rgba(0,212,170,0.2);">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                            <span style="font-weight: 600; color: #00D4AA; display: flex; align-items: center; gap: 8px;">
                                üìè Support/Resistance Stratejisi
                                <span style="font-size: 0.7rem; background: rgba(0,212,170,0.2); padding: 2px 6px; border-radius: 4px;" id="srStrategyStatus">√ñƒüreniyor</span>
                            </span>
                            <span id="srSuccess" style="color: #00D4AA; font-weight: 700; font-size: 1.1rem;">0% (0/0)</span>
                        </div>
                        <div style="font-size: 0.75rem; color: #888; display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px;">
                            <span>Avg Profit: <strong id="srAvgProfit" style="color: #00D4AA;">0.00%</strong></span>
                            <span>Avg Time: <strong id="srAvgTime" style="color: #00D4AA;">-</strong></span>
                            <span>G√ºvenilirlik: <strong id="srReliability" style="color: #00D4AA;">-%</strong></span>
                        </div>
                    </div>

                    <!-- En ƒ∞yi Strateji √ñnerisi - AI'nin √∂ƒürendiƒüi en ba≈üarƒ±lƒ± strateji -->
                    <div style="margin-top: 15px; padding: 15px; background: linear-gradient(135deg, rgba(0,212,170,0.1), rgba(78,205,196,0.1)); border-radius: 12px; border: 2px solid rgba(0,212,170,0.3);">
                        <div style="font-size: 0.9rem; font-weight: 600; color: #00D4AA; margin-bottom: 8px; display: flex; align-items: center; gap: 8px;">
                            üèÜ AI Tarafƒ±ndan √ñnerilen En ƒ∞yi Strateji
                        </div>
                        <div style="font-size: 1rem; font-weight: 700; color: #ffffff; margin-bottom: 6px;" id="bestStrategy">
                            Veri toplanƒ±yor...
                        </div>
                        <div style="font-size: 0.8rem; color: #888;" id="bestStrategyDetails">
                            En az 3 i≈ülem tamamlandƒ±ktan sonra AI en iyi stratejiyi belirleyecek
                        </div>
                        
                        <!-- Best Strategy Progress Indicator -->
                        <div style="margin-top: 10px;">
                            <div style="font-size: 0.75rem; color: #888; margin-bottom: 4px;">AI Analiz ƒ∞lerlemesi:</div>
                            <div style="background: rgba(255,255,255,0.1); height: 6px; border-radius: 3px; overflow: hidden;">
                                <div id="aiAnalysisProgress" style="background: linear-gradient(90deg, #00D4AA, #4ECDC4); height: 100%; width: 0%; transition: width 0.5s ease;"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Strateji Kar≈üƒ±la≈ütƒ±rma Grafik Alanƒ± (placeholder) -->
                <div style="margin-top: 20px;">
                    <h4 style="color: #4ECDC4; font-size: 0.95rem; margin-bottom: 10px;">üìà Performans Kar≈üƒ±la≈ütƒ±rmasƒ±:</h4>
                    <div id="strategyComparisonChart" style="background: rgba(0,0,0,0.3); border-radius: 8px; padding: 20px; text-align: center; color: #888; border: 1px solid rgba(255,255,255,0.1);">
                        <div style="font-size: 1.5rem; margin-bottom: 10px;">üìä</div>
                        <div>Yeterli veri toplandƒ±ktan sonra strateji kar≈üƒ±la≈ütƒ±rma grafiƒüi burada g√∂r√ºnecek</div>
                    </div>
                </div>
            </div>
           
<!-- Sinyal Ge√ßmi≈üi ve ƒ∞statistikler Paneli - Trading performansƒ±nƒ±n detaylƒ± analizini yapan kritik bile≈üen -->
            <div class="panel">
                <h3>üìà Sinyal Ge√ßmi≈üi ve Performans ƒ∞statistikleri</h3>
                
                <!-- Ana ƒ∞statistik Kartlarƒ± - Hƒ±zlƒ± performans √∂zeti i√ßin tasarlanmƒ±≈ü responsive grid yapƒ±sƒ± -->
                <div style="margin-bottom: 25px;">
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 12px;">
                        <!-- Toplam Sinyal Sayƒ±sƒ± - Sistemin √ºrettiƒüi t√ºm sinyallerin sayƒ±sƒ±nƒ± g√∂sterir -->
                        <div style="text-align: center; padding: 15px; background: rgba(255,255,255,0.05); border-radius: 12px; border: 2px solid rgba(255,255,255,0.1); transition: all 0.3s ease;">
                            <div style="font-size: 1.8rem; font-weight: 700; color: #ffffff; margin-bottom: 6px;" id="totalSignals">0</div>
                            <div style="font-size: 0.75rem; color: #888; text-transform: uppercase; letter-spacing: 1px;">Toplam Sinyal</div>
                            <div style="font-size: 0.65rem; color: #666; margin-top: 4px;" id="totalSignalsSubtext">T√ºm zamanlar</div>
                        </div>
                        
                        <!-- Ba≈üarƒ±lƒ± Sinyal Sayƒ±sƒ± - Take Profit ile kapanan sinyaller -->
                        <div style="text-align: center; padding: 15px; background: rgba(0,212,170,0.1); border-radius: 12px; border: 2px solid rgba(0,212,170,0.3); transition: all 0.3s ease;">
                            <div style="font-size: 1.8rem; font-weight: 700; color: #00D4AA; margin-bottom: 6px;" id="successfulSignals">0</div>
                            <div style="font-size: 0.75rem; color: #888; text-transform: uppercase; letter-spacing: 1px;">Ba≈üarƒ±lƒ±</div>
                            <div style="font-size: 0.65rem; color: #00D4AA; margin-top: 4px;" id="successfulSignalsSubtext">TP Hit</div>
                        </div>
                        
                        <!-- Ba≈üarƒ± Oranƒ± Y√ºzdesi - Kazanma oranƒ±nƒ±n matematiksel hesaplamasƒ± -->
                        <div style="text-align: center; padding: 15px; background: rgba(78,205,196,0.1); border-radius: 12px; border: 2px solid rgba(78,205,196,0.3); transition: all 0.3s ease;">
                            <div style="font-size: 1.8rem; font-weight: 700; color: #4ECDC4; margin-bottom: 6px;" id="successRate">0.0%</div>
                            <div style="font-size: 0.75rem; color: #888; text-transform: uppercase; letter-spacing: 1px;">Ba≈üarƒ± Oranƒ±</div>
                            <div style="font-size: 0.65rem; color: #4ECDC4; margin-top: 4px;" id="successRateSubtext">Win Rate</div>
                        </div>
                        
                        <!-- Ortalama Kar Y√ºzdesi - T√ºm i≈ülemlerin kar/zarar ortalamasƒ± -->
                        <div style="text-align: center; padding: 15px; background: rgba(255,193,7,0.1); border-radius: 12px; border: 2px solid rgba(255,193,7,0.3); transition: all 0.3s ease;">
                            <div style="font-size: 1.8rem; font-weight: 700; color: #FFC107; margin-bottom: 6px;" id="avgProfit">+0.00%</div>
                            <div style="font-size: 0.75rem; color: #888; text-transform: uppercase; letter-spacing: 1px;">Avg Kar</div>
                            <div style="font-size: 0.65rem; color: #FFC107; margin-top: 4px;" id="avgProfitSubtext">Per Trade</div>
                        </div>
                    </div>
                </div>

                <!-- Zaman Bazlƒ± Performans Analizi - Farklƒ± zaman dilimlerindeki ba≈üarƒ± metriklerini kar≈üƒ±la≈ütƒ±rƒ±r -->
                <div style="margin-bottom: 25px;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                        <h4 style="color: #4ECDC4; font-size: 1rem; margin: 0; display: flex; align-items: center; gap: 8px;">
                            ‚è∞ Zaman Bazlƒ± Performans
                        </h4>
                        <!-- Zaman dilimi se√ßici - Kullanƒ±cƒ±nƒ±n analiz etmek istediƒüi periyodu se√ßmesini saƒülar -->
                        <select id="timeFrameSelector" style="width: auto; padding: 6px 12px; font-size: 0.8rem; margin: 0;" onchange="updateTimeFrameStats(this.value)">
                            <option value="today">Bug√ºn</option>
                            <option value="week">Bu Hafta</option>
                            <option value="month">Bu Ay</option>
                            <option value="all" selected>T√ºm Zamanlar</option>
                        </select>
                    </div>
                    
                    <!-- Responsive zaman bazlƒ± istatistik kartlarƒ± -->
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: 12px;">
                        <!-- Bug√ºnk√º Performans - Son 24 saatin √∂zeti -->
                        <div style="padding: 12px; background: rgba(0,212,170,0.05); border-radius: 10px; border: 1px solid rgba(0,212,170,0.2); transition: all 0.3s ease;">
                            <div style="font-size: 0.75rem; color: #888; margin-bottom: 8px; text-transform: uppercase; display: flex; align-items: center; gap: 6px;">
                                <span>üìÖ</span> Bug√ºn
                            </div>
                            <div style="font-size: 1.4rem; font-weight: 700; color: #00D4AA; margin-bottom: 4px;" id="todaySignals">0</div>
                            <div style="font-size: 0.7rem; color: #666; display: flex; justify-content: space-between;">
                                <span>Sinyal</span>
                                <span id="todayProfit" style="color: #00D4AA; font-weight: 600;">+0.00%</span>
                            </div>
                        </div>
                        
                        <!-- Bu Saatin Aktivitesi - Son 60 dakikanƒ±n √∂zeti -->
                        <div style="padding: 12px; background: rgba(78,205,196,0.05); border-radius: 10px; border: 1px solid rgba(78,205,196,0.2); transition: all 0.3s ease;">
                            <div style="font-size: 0.75rem; color: #888; margin-bottom: 8px; text-transform: uppercase; display: flex; align-items: center; gap: 6px;">
                                <span>üïê</span> Bu Saat
                            </div>
                            <div style="font-size: 1.4rem; font-weight: 700; color: #4ECDC4; margin-bottom: 4px;" id="hourlySignals">0</div>
                            <div style="font-size: 0.7rem; color: #666; display: flex; justify-content: space-between;">
                                <span>Sinyal</span>
                                <span id="hourlyProfit" style="color: #4ECDC4; font-weight: 600;">+0.00%</span>
                            </div>
                        </div>
                        
                        <!-- Haftalƒ±k Trend - Son 7 g√ºn√ºn genel eƒüilimi -->
                        <div style="padding: 12px; background: rgba(255,193,7,0.05); border-radius: 10px; border: 1px solid rgba(255,193,7,0.2); transition: all 0.3s ease;">
                            <div style="font-size: 0.75rem; color: #888; margin-bottom: 8px; text-transform: uppercase; display: flex; align-items: center; gap: 6px;">
                                <span>üìä</span> Bu Hafta
                            </div>
                            <div style="font-size: 1.4rem; font-weight: 700; color: #FFC107; margin-bottom: 4px;" id="weeklySignals">0</div>
                            <div style="font-size: 0.7rem; color: #666; display: flex; justify-content: space-between;">
                                <span>Sinyal</span>
                                <span id="weeklyProfit" style="color: #FFC107; font-weight: 600;">+0.00%</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Detaylƒ± Sinyal Ge√ßmi≈üi Listesi - Her sinyalin tam detaylarƒ±nƒ± i√ßeren scrollable tablo -->
                <div style="margin-bottom: 20px;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; flex-wrap: wrap; gap: 10px;">
                        <h4 style="color: #4ECDC4; font-size: 1rem; margin: 0; display: flex; align-items: center; gap: 8px;">
                            üìã Detaylƒ± Sinyal Kayƒ±tlarƒ±
                        </h4>
                        <!-- Filtreleme butonlarƒ± - Kullanƒ±cƒ±nƒ±n belirli sinyal t√ºrlerini g√∂rmesini saƒülar -->
                        <div style="display: flex; gap: 6px; flex-wrap: wrap;">
                            <button class="btn" onclick="filterSignals('all')" id="filterAllBtn" style="padding: 6px 12px; font-size: 0.75rem; background: rgba(78,205,196,0.8);">
                                T√ºm√º
                            </button>
                            <button class="btn success" onclick="filterSignals('successful')" style="padding: 6px 12px; font-size: 0.75rem;">
                                ‚úÖ Ba≈üarƒ±lƒ±
                            </button>
                            <button class="btn danger" onclick="filterSignals('failed')" style="padding: 6px 12px; font-size: 0.75rem;">
                                ‚ùå Ba≈üarƒ±sƒ±z
                            </button>
                            <button class="btn warning" onclick="filterSignals('pending')" style="padding: 6px 12px; font-size: 0.75rem;">
                                ‚è≥ Bekleyen
                            </button>
                        </div>
                    </div>
                    
                    <!-- Ana sinyal ge√ßmi≈üi container - Mobil-first yakla≈üƒ±mla tasarlanmƒ±≈ü scrollable area -->
                    <div id="signalHistory" style="
                        max-height: 320px; 
                        overflow-y: auto; 
                        background: rgba(0,0,0,0.4); 
                        border-radius: 12px; 
                        padding: 15px; 
                        border: 2px solid rgba(255,255,255,0.1);
                        scrollbar-width: thin;
                        scrollbar-color: #4ECDC4 rgba(255,255,255,0.1);
                    ">
                        <!-- Varsayƒ±lan bo≈ü durum mesajƒ± -->
                        <div id="noSignalsMessage" style="text-align: center; color: #888; margin: 40px 0;">
                            <div style="font-size: 3rem; margin-bottom: 15px; opacity: 0.6;">üìä</div>
                            <div style="font-size: 1.1rem; font-weight: 500; margin-bottom: 8px;">Hen√ºz sinyal ge√ßmi≈üi bulunmuyor</div>
                            <div style="font-size: 0.85rem; color: #666; max-width: 300px; margin: 0 auto; line-height: 1.4;">
                                AI sistem baƒülantƒ±sƒ± kurulduktan sonra √ºretilen sinyaller buraya kaydedilecek. Her sinyalin entry fiyatƒ±, take profit, stop loss ve zaman damgasƒ± bilgileri detaylƒ± olarak g√∂r√ºnt√ºlenecektir.
                            </div>
                        </div>
                        
                        <!-- Dinamik sinyal listesi - JavaScript tarafƒ±ndan doldurulacak -->
                        <div id="signalListContainer">
                            <!-- Bu alan JavaScript tarafƒ±ndan doldurulacak. -->
                        </div>
                    </div>
                </div>

                <!-- Sinyal y√∂netimi ve veri export i≈ülemleri i√ßin buton grubu -->
                <div style="margin-top: 20px;">
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: 10px;">
                        <!-- Ge√ßmi≈üi temizleme - T√ºm sinyal verilerini siler -->
                        <button class="btn danger" onclick="clearHistory()" style="padding: 10px; font-size: 0.85rem;">
                            üóëÔ∏è Ge√ßmi≈üi Temizle
                        </button>
                        <!-- CSV export - Analiz i√ßin dƒ±≈ü ara√ßlara veri aktarƒ±mƒ± -->
                        <button class="btn info" onclick="exportHistory()" style="padding: 10px; font-size: 0.85rem;">
                            üì§ CSV Export
                        </button>
                        <!-- PDF rapor olu≈üturma - Profesyonel raporlama i√ßin -->
                        <button class="btn warning" onclick="generateReport()" style="padding: 10px; font-size: 0.85rem;">
                            üìä PDF Rapor
                        </button>
                        <!-- Geli≈ümi≈ü analiz aracƒ± - Derin istatistiksel analiz -->
                        <button class="btn info" onclick="openAdvancedAnalysis()" style="padding: 10px; font-size: 0.85rem;">
                            üî¨ Geli≈ümi≈ü Analiz
                        </button>
                    </div>
                </div>
            </div>


           
<!-- AI √ñƒürenme Sistemi ve Sistem Saƒülƒ±ƒüƒ± Paneli - Botun beynini g√∂steren en kritik bile≈üen -->
            <div class="panel">
                <h3>ü§ñ AI √ñƒürenme Sistemi ve Performans Monit√∂r√º</h3>
                
                <!-- AI sisteminin √∂ƒürenme durumunu ger√ßek zamanlƒ± olarak g√∂sterir -->
                <div style="margin-bottom: 25px;">
                    <h4 style="color: #FF6B6B; font-size: 1rem; margin-bottom: 15px; display: flex; align-items: center; gap: 8px;">
                        üß† Neural Network √ñƒürenme Durumu
                    </h4>
                    
                    <!-- AI √∂ƒürenme metrikleri - Machine learning algoritmalarƒ±nƒ±n performansƒ±nƒ± takip eder -->
                    <div style="background: rgba(255,255,255,0.03); border-radius: 12px; padding: 20px; border: 1px solid rgba(255,255,255,0.1); position: relative; overflow: hidden;">
                        <!-- Arka plan animasyonu - AI'nin √ßalƒ±≈ütƒ±ƒüƒ±nƒ± g√∂rsel olarak g√∂sterir -->
                        <div style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: linear-gradient(45deg, transparent 30%, rgba(78,205,196,0.05) 50%, transparent 70%); animation: aiThinking 3s linear infinite;"></div>
                        
                        <!-- AI performans metrikleri grid yapƒ±sƒ±nda -->
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 15px; position: relative; z-index: 1;">
                            <div>
                                <div style="font-size: 0.8rem; color: #888; margin-bottom: 6px; display: flex; align-items: center; gap: 6px;">
                                    <span>üìä</span> ƒ∞≈ülenen Veri Miktarƒ±:
                                </div>
                                <div style="font-size: 1.4rem; font-weight: 700; color: #4ECDC4;" id="aiProcessedData">0</div>
                                <div style="font-size: 0.7rem; color: #666;">Market data points</div>
                            </div>
                            <div>
                                <div style="font-size: 0.8rem; color: #888; margin-bottom: 6px; display: flex; align-items: center; gap: 6px;">
                                    <span>üéØ</span> √ñƒürenme Doƒüruluƒüu:
                                </div>
                                <div style="font-size: 1.4rem; font-weight: 700; color: #00D4AA;" id="aiAccuracy">0%</div>
                                <div style="font-size: 0.7rem; color: #666;">Prediction accuracy</div>
                            </div>
                            <div>
                                <div style="font-size: 0.8rem; color: #888; margin-bottom: 6px; display: flex; align-items: center; gap: 6px;">
                                    <span>‚ö°</span> Performans Skoru:
                                </div>
                                <div style="font-size: 1.4rem; font-weight: 700; color: #FFC107;" id="aiPerformance">0/100</div>
                                <div style="font-size: 0.7rem; color: #666;">Overall AI score</div>
                            </div>
                            <div>
                                <div style="font-size: 0.8rem; color: #888; margin-bottom: 6px; display: flex; align-items: center; gap: 6px;">
                                    <span>üîÑ</span> √ñƒürenme Durumu:
                                </div>
                                <div style="font-size: 1.1rem; font-weight: 600; color: #4ECDC4;" id="aiLearningStatus">Ba≈ülangƒ±√ß Modu</div>
                                <div style="font-size: 0.7rem; color: #666;" id="aiStatusDetails">Sistem hazƒ±rlanƒ±yor...</div>
                            </div>
                        </div>
                        
                        <!-- Animated AI geli≈üim progress barƒ± - Neural network'√ºn √∂ƒürenme ilerlemesini g√∂sterir -->
                        <div style="margin-top: 15px; position: relative; z-index: 1;">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                                <span style="font-size: 0.8rem; color: #888;">Neural Network Eƒüitim ƒ∞lerlemesi:</span>
                                <span style="font-size: 0.9rem; font-weight: 600; color: #4ECDC4;" id="aiProgressPercent">0%</span>
                            </div>
                            <div style="background: rgba(255,255,255,0.1); height: 12px; border-radius: 6px; overflow: hidden; position: relative;">
                                <div id="overallAIProgress" style="background: linear-gradient(90deg, #FF6B6B 0%, #FFC107 30%, #4ECDC4 70%, #00D4AA 100%); height: 100%; width: 0%; transition: width 1s ease; position: relative;">
                                    <!-- Progress bar √ºzerinde akan ƒ±≈üƒ±k efekti -->
                                    <div style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent); animation: progressShine 2s linear infinite;"></div>
                                </div>
                            </div>
                            <!-- Progress seviye a√ßƒ±klamalarƒ± -->
                            <div style="display: flex; justify-content: space-between; font-size: 0.65rem; margin-top: 6px; color: #666;">
                                <span>Ba≈ülangƒ±√ß</span>
                                <span>√ñƒüreniyor</span>
                                <span>Geli≈üti</span>
                                <span>Uzman</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Sistem Saƒülƒ±ƒüƒ± ve Performans Monit√∂r√º - Bot'un teknik durumunu izler -->
                <div style="margin-bottom: 20px;">
                    <h4 style="color: #00D4AA; font-size: 1rem; margin-bottom: 15px; display: flex; align-items: center; gap: 8px;">
                        üíö Sistem Saƒülƒ±ƒüƒ± ve Performans
                    </h4>
                    
                    <!-- Real-time sistem durumu kartlarƒ± -->
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(160px, 1fr)); gap: 12px;">
                        <!-- CPU kullanƒ±mƒ± g√∂stergesi (sim√ºle edilmi≈ü) -->
                        <div style="padding: 12px; background: rgba(0,212,170,0.05); border-radius: 10px; border: 1px solid rgba(0,212,170,0.2); text-align: center;">
                            <div style="font-size: 0.75rem; color: #888; margin-bottom: 6px; display: flex; align-items: center; justify-content: center; gap: 4px;">
                                <span>üñ•Ô∏è</span> CPU Kullanƒ±mƒ±
                            </div>
                            <div style="font-size: 1.3rem; font-weight: 700; color: #00D4AA; margin-bottom: 4px;" id="cpuUsage">0%</div>
                            <div style="background: rgba(255,255,255,0.1); height: 4px; border-radius: 2px; overflow: hidden;">
                                <div id="cpuBar" style="background: #00D4AA; height: 100%; width: 0%; transition: width 0.5s ease;"></div>
                            </div>
                        </div>
                        
                        <!-- Memory kullanƒ±mƒ± g√∂stergesi -->
                        <div style="padding: 12px; background: rgba(78,205,196,0.05); border-radius: 10px; border: 1px solid rgba(78,205,196,0.2); text-align: center;">
                            <div style="font-size: 0.75rem; color: #888; margin-bottom: 6px; display: flex; align-items: center; justify-content: center; gap: 4px;">
                                <span>üß†</span> Bellek Kullanƒ±mƒ±
                            </div>
                            <div style="font-size: 1.3rem; font-weight: 700; color: #4ECDC4; margin-bottom: 4px;" id="memoryUsage">0%</div>
                            <div style="background: rgba(255,255,255,0.1); height: 4px; border-radius: 2px; overflow: hidden;">
                                <div id="memoryBar" style="background: #4ECDC4; height: 100%; width: 0%; transition: width 0.5s ease;"></div>
                            </div>
                        </div>
                        
                        <!-- Network latency g√∂stergesi -->
                        <div style="padding: 12px; background: rgba(255,193,7,0.05); border-radius: 10px; border: 1px solid rgba(255,193,7,0.2); text-align: center;">
                            <div style="font-size: 0.75rem; color: #888; margin-bottom: 6px; display: flex; align-items: center; justify-content: center; gap: 4px;">
                                <span>üì°</span> Network Ping
                            </div>
                            <div style="font-size: 1.3rem; font-weight: 700; color: #FFC107; margin-bottom: 4px;" id="networkPing">0ms</div>
                            <div style="font-size: 0.65rem; color: #666;" id="networkStatus">Baƒülantƒ± kontrol ediliyor...</div>
                        </div>
                        
                        <!-- Sistem uptime g√∂stergesi -->
                        <div style="padding: 12px; background: rgba(255,255,255,0.05); border-radius: 10px; border: 1px solid rgba(255,255,255,0.1); text-align: center;">
                            <div style="font-size: 0.75rem; color: #888; margin-bottom: 6px; display: flex; align-items: center; justify-content: center; gap: 4px;">
                                <span>‚è±Ô∏è</span> √áalƒ±≈üma S√ºresi
                            </div>
                            <div style="font-size: 1.3rem; font-weight: 700; color: #ffffff; margin-bottom: 4px;" id="systemUptime">00:00:00</div>
                            <div style="font-size: 0.65rem; color: #666;">Kesintisiz √ßalƒ±≈üma</div>
                        </div>
                    </div>
                </div>

                <!-- AI Model Konfig√ºrasyonu ve ƒ∞statistikleri -->
                <div style="margin-bottom: 15px;">
                    <h4 style="color: #FFC107; font-size: 0.95rem; margin-bottom: 12px;">üîß AI Model Detaylarƒ±:</h4>
                    <div style="background: rgba(255,193,7,0.05); border-radius: 10px; padding: 15px; border: 1px solid rgba(255,193,7,0.2);">
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px; font-size: 0.8rem;">
                            <div>
                                <span style="color: #888;">Model Tipi:</span>
                                <span style="color: #FFC107; font-weight: 600; margin-left: 8px;" id="aiModelType">Hybrid Neural Network</span>
                            </div>
                            <div>
                                <span style="color: #888;">√ñƒürenme Algoritmasƒ±:</span>
                                <span style="color: #FFC107; font-weight: 600; margin-left: 8px;" id="learningAlgorithm">Reinforcement Learning</span>
                            </div>
                            <div>
                                <span style="color: #888;">Son G√ºncelleme:</span>
                                <span style="color: #888; font-weight: 600; margin-left: 8px;" id="lastModelUpdate">-</span>
                            </div>
                            <div>
                                <span style="color: #888;">Model Versiyonu:</span>
                                <span style="color: #4ECDC4; font-weight: 600; margin-left: 8px;" id="modelVersion">v4.2.1</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Market Verileri ve Teknik Analiz Paneli - Ger√ßek zamanlƒ± market datasƒ±nƒ± analiz eder -->
            <div class="panel">
                <h3>üìä Market Verileri ve Teknik Analiz</h3>
                
                <!-- Anlƒ±k market durumu - Fiyat hareketlerini ve piyasa psikolojisini g√∂sterir -->
                <div style="margin-bottom: 25px;">
                    <h4 style="color: #4ECDC4; font-size: 1rem; margin-bottom: 15px; display: flex; align-items: center; gap: 8px;">
                        üíπ Anlƒ±k Piyasa Durumu
                    </h4>
                    
                    <!-- Real-time market metrics - Kritik trading g√∂stergeleri -->
                    <div style="background: rgba(0,0,0,0.3); border-radius: 12px; padding: 20px; border: 2px solid rgba(78,205,196,0.2);">
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: 15px;">
                            <!-- Son i≈ülem fiyatƒ± ve deƒüi≈üim -->
                            <div style="text-align: center;">
                                <div style="font-size: 0.75rem; color: #888; margin-bottom: 6px;">Son Fiyat</div>
                                <div style="font-size: 1.4rem; font-weight: 700; color: #4ECDC4; margin-bottom: 4px;" id="marketCurrentPrice">$0.00</div>
                                <div style="font-size: 0.8rem; font-weight: 600;" id="marketPriceChange">+0.00%</div>
                            </div>
                            
                            <!-- 24 saatlik hacim bilgisi -->
                            <div style="text-align: center;">
                                <div style="font-size: 0.75rem; color: #888; margin-bottom: 6px;">24h Volume</div>
                                <div style="font-size: 1.4rem; font-weight: 700; color: #FFC107; margin-bottom: 4px;" id="volume24h">0</div>
                                <div style="font-size: 0.8rem; color: #666;" id="volumeChange">+0.00%</div>
                            </div>
                            
                            <!-- Market volatilite g√∂stergesi -->
                            <div style="text-align: center;">
                                <div style="font-size: 0.75rem; color: #888; margin-bottom: 6px;">Volatilite</div>
                                <div style="font-size: 1.4rem; font-weight: 700; color: #FF6B6B; margin-bottom: 4px;" id="marketVolatility">D√º≈ü√ºk</div>
                                <div style="font-size: 0.8rem; color: #666;" id="volatilityPercent">0.00%</div>
                            </div>
                            
                            <!-- Market sentiment g√∂stergesi -->
                            <div style="text-align: center;">
                                <div style="font-size: 0.75rem; color: #888; margin-bottom: 6px;">Piyasa Duygusu</div>
                                <div style="font-size: 1.4rem; font-weight: 700; color: #00D4AA; margin-bottom: 4px;" id="marketSentiment">N√∂tr</div>
                                <div style="font-size: 0.8rem; color: #666;" id="sentimentScore">50/100</div>
                            </div>
                        </div>
                    </div>
                </div>
               
<!-- Teknik ƒ∞ndikat√∂rler - Trading kararlarƒ±nda kullanƒ±lan matematiksel hesaplamalar -->
                <div style="margin-bottom: 20px;">
                    <h4 style="color: #FF6B6B; font-size: 1rem; margin-bottom: 12px;">üìà Teknik ƒ∞ndikat√∂rler:</h4>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">
                        <!-- RSI (Relative Strength Index) - A≈üƒ±rƒ± alƒ±m/satƒ±m durumunu g√∂sterir -->
                        <div style="padding: 12px; background: rgba(255,107,107,0.1); border-radius: 8px; border: 1px solid rgba(255,107,107,0.2);">
                            <div style="font-size: 0.8rem; color: #888; margin-bottom: 6px;">RSI (14)</div>
                            <div style="font-size: 1.2rem; font-weight: 700; color: #FF6B6B;" id="rsiValue">50</div>
                            <div style="font-size: 0.7rem; color: #666;" id="rsiStatus">N√∂tr B√∂lge</div>
                        </div>
                        
                        <!-- MACD - Trend deƒüi≈üimlerini algƒ±lar -->
                        <div style="padding: 12px; background: rgba(78,205,196,0.1); border-radius: 8px; border: 1px solid rgba(78,205,196,0.2);">
                            <div style="font-size: 0.8rem; color: #888; margin-bottom: 6px;">MACD</div>
                            <div style="font-size: 1.2rem; font-weight: 700; color: #4ECDC4;" id="macdValue">0.00</div>
                            <div style="font-size: 0.7rem; color: #666;" id="macdStatus">Sinyal Yok</div>
                        </div>
                    </div>
                </div>

                <!-- OrderBook Derinlik Analizi - Alƒ±≈ü/satƒ±≈ü emirlerinin daƒüƒ±lƒ±mƒ±nƒ± g√∂sterir -->
                <div style="margin-bottom: 15px;">
                    <h4 style="color: #00D4AA; font-size: 0.95rem; margin-bottom: 10px;">üìö OrderBook Analizi:</h4>
                    <div style="background: rgba(0,212,170,0.05); border-radius: 10px; padding: 15px; border: 1px solid rgba(0,212,170,0.2);">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                            <!-- Alƒ±≈ü baskƒ±sƒ± g√∂stergesi -->
                            <div style="flex: 1; text-align: center;">
                                <div style="font-size: 0.75rem; color: #888; margin-bottom: 4px;">Alƒ±≈ü Baskƒ±sƒ±</div>
                                <div style="font-size: 1.1rem; font-weight: 700; color: #00D4AA;" id="buyPressure">0%</div>
                            </div>
                            <!-- Satƒ±≈ü baskƒ±sƒ± g√∂stergesi -->
                            <div style="flex: 1; text-align: center;">
                                <div style="font-size: 0.75rem; color: #888; margin-bottom: 4px;">Satƒ±≈ü Baskƒ±sƒ±</div>
                                <div style="font-size: 1.1rem; font-weight: 700; color: #F84960;" id="sellPressure">0%</div>
                            </div>
                        </div>
                        <!-- G√∂rsel orderbook dengesini g√∂steren bar -->
                        <div style="background: rgba(248,73,96,0.3); height: 8px; border-radius: 4px; overflow: hidden;">
                            <div id="orderbookBalance" style="background: #00D4AA; height: 100%; width: 50%; transition: width 0.5s ease;"></div>
                        </div>
                        <div style="font-size: 0.7rem; color: #888; text-align: center; margin-top: 6px;" id="orderbookImbalance">Dengeli Piyasa</div>
                    </div>
                </div>
            </div>
        </div>


        <!-- Toast Bildirim Sistemi - Kullanƒ±cƒ±ya √∂nemli mesajlarƒ± ileten popup sistem -->
        <div id="toast" class="toast"></div>

        <!-- Loading Overlay - Sistem i≈ülemlerini beklerken g√∂sterilen loading ekranƒ± -->
        <div id="loadingOverlay" style="
            position: fixed; 
            top: 0; left: 0; right: 0; bottom: 0; 
            background: rgba(0,0,0,0.8); 
            backdrop-filter: blur(5px);
            display: none; 
            justify-content: center; 
            align-items: center; 
            z-index: 10000;
        ">
            <div style="text-align: center; color: #ffffff;">
                <div style="width: 60px; height: 60px; border: 4px solid rgba(78,205,196,0.3); border-top: 4px solid #4ECDC4; border-radius: 50%; animation: spin 1s linear infinite; margin: 0 auto 20px;"></div>
                <div style="font-size: 1.2rem; font-weight: 600; margin-bottom: 10px;">Sistem ƒ∞≈ülemi</div>
                <div style="font-size: 0.9rem; color: #888;" id="loadingMessage">ƒ∞≈ülem yapƒ±lƒ±yor...</div>
            </div>
        </div>
    </div>

    <!-- CSS Animasyonlarƒ± - UI deneyimini zenginle≈ütiren g√∂rsel efektler -->
    <style>
        /* AI d√º≈ü√ºnme animasyonu - AI'nin aktif olduƒüunu g√∂steren s√ºr√ºkleyici efekt */
        @keyframes aiThinking {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(300%); }
        }

        /* Progress bar √ºzerinde akan ƒ±≈üƒ±k efekti - ƒ∞lerlemeyi vurgulayan animasyon */
        @keyframes progressShine {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(400%); }
        }

        /* Shimmer efekti - G√ºven √ßubuƒüunda kalite hissi veren animasyon */
        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        /* Loading spinner animasyonu - Bekleyen i≈ülemleri g√∂steren d√∂nen √ßember */
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Pulse animasyonu - Baƒülantƒ± durumunu vurgulayan nabƒ±z efekti */
        @keyframes pulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.7; transform: scale(1.05); }
        }

        /* Toast bildirim sistemi stilleri */
        .toast {
            position: fixed;
            top: 100px;
            right: 20px;
            background: rgba(0,0,0,0.9);
            color: #ffffff;
            padding: 15px 20px;
            border-radius: 12px;
            border-left: 4px solid #4ECDC4;
            box-shadow: 0 8px 32px rgba(0,0,0,0.3);
            backdrop-filter: blur(10px);
            transform: translateX(400px);
            transition: transform 0.3s ease;
            z-index: 9999;
            max-width: 350px;
            font-size: 14px;
            font-weight: 500;
        }

        .toast.show {
            transform: translateX(0);
        }

        .toast.success {
            border-left-color: #00D4AA;
            background: rgba(0,212,170,0.1);
        }

        .toast.error {
            border-left-color: #F84960;
            background: rgba(248,73,96,0.1);
        }

        .toast.warning {
            border-left-color: #FFC107;
            background: rgba(255,193,7,0.1);
        }

        .toast.info {
            border-left-color: #4ECDC4;
            background: rgba(78,205,196,0.1);
        }

        /* Hover efektleri - Kullanƒ±cƒ± etkile≈üimini artƒ±ran interaktif animasyonlar */
        .panel:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 28px rgba(0,0,0,0.4);
            border-color: rgba(78, 205, 196, 0.3);
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.4);
        }

        /* Sticky header i√ßin smooth scroll behavior */
        html {
            scroll-behavior: smooth;
        }

        /* Custom scrollbar tasarƒ±mƒ± - Modern g√∂r√ºn√ºm i√ßin */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(255,255,255,0.1);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, #4ECDC4, #00D4AA);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, #00D4AA, #4ECDC4);
        }

        /* Light theme i√ßin √∂zel d√ºzenlemeler */
        .light-theme ::-webkit-scrollbar-track {
            background: rgba(0,0,0,0.1);
        }
        
        .light-theme ::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, #2c3e50, #34495e);
        }

        /* WebSocket Trading Specific Styles */
        .trading-status-active {
            background: rgba(0,212,170,0.2) !important;
            border-color: rgba(0,212,170,0.5) !important;
            animation: pulse 2s infinite;
        }

        .position-card {
            background: rgba(255,255,255,0.05);
            border-radius: 12px;
            padding: 15px;
            border: 2px solid rgba(255,255,255,0.1);
            transition: all 0.3s ease;
        }

        .position-card.long {
            border-color: rgba(0,212,170,0.3);
            background: rgba(0,212,170,0.05);
        }

        .position-card.short {
            border-color: rgba(248,73,96,0.3);
            background: rgba(248,73,96,0.05);
        }

        .signal-notification {
            animation: pulse 1s infinite;
            border: 2px solid #FFC107 !important;
            background: rgba(255,193,7,0.1) !important;
        }

        /* Balance tracking styles */
        .balance-positive {
            color: #00D4AA !important;
        }

        .balance-negative {
            color: #F84960 !important;
        }

        .balance-neutral {
            color: #888 !important;
        }

        /* Order status indicators */
        .order-pending {
            color: #FFC107;
        }

        .order-filled {
            color: #00D4AA;
        }

        .order-cancelled {
            color: #F84960;
        }

        .order-partial {
            color: #4ECDC4;
        }

        /* Mobile optimizations for trading */
        @media (max-width: 768px) {
            .toast {
                right: 10px;
                left: 10px;
                max-width: none;
                transform: translateY(-100px);
            }

            .toast.show {
                transform: translateY(0);
            }

            .position-card {
                padding: 12px;
            }
        }
    </style>

    <!-- JavaScript Ba≈ülangƒ±cƒ± - Botun fonksiyonel beyni burada ba≈ülar -->
    <script>
        // === GLOBAL DEƒûƒ∞≈ûKENLER === 
        // Bu b√∂l√ºm botun t√ºm bile≈üenlerinin kullandƒ±ƒüƒ± temel veri yapƒ±larƒ±nƒ± tanƒ±mlar
        
        // WebSocket baƒülantƒ±sƒ± ve durum y√∂netimi
        let ws = null;                      // Ana WebSocket connection objesi (Market Data)
        let tradingWs = null;               // Trading WebSocket connection objesi (Orders, Positions, Balance)
        let isConnected = false;            // Market data baƒülantƒ± durumu flag'i
        let isTradingConnected = false;     // Trading baƒülantƒ± durumu flag'i
        let currentSymbol = '';             // Aktif olarak analiz edilen coin sembol√º
        let lastPrice = 0;                  // En son alƒ±nan fiyat verisi
        let reconnectAttempts = 0;          // Otomatik yeniden baƒülanma sayacƒ±
        let maxReconnectAttempts = 5;       // Maksimum yeniden baƒülanma denemesi
        let pingInterval = null;            // WebSocket ping/pong timer'ƒ±
        let tradingPingInterval = null;     // Trading WebSocket ping timer'ƒ±
        let debugAutoScroll = true;         // Debug console otomatik scroll durumu
        let systemStartTime = Date.now();   // Sistem ba≈ülangƒ±√ß zamanƒ± (uptime hesabƒ± i√ßin)

        // Trading sistemi deƒüi≈ükenleri
        let tradingEnabled = false;         // Otomatik trading a√ßƒ±k/kapalƒ± durumu
        let activePosition = null;          // ≈ûu anda a√ßƒ±k olan pozisyon bilgisi
        let activeSignal = null;            // Aktif sinyal objesi (entry, TP, SL bilgileri ile)
        let dailyPnL = 0;                   // G√ºnl√ºk kar/zarar toplamƒ±
        let maxDailyLoss = 100;             // G√ºnl√ºk maksimum zarar limiti
        let positionSize = 50;              // Default pozisyon b√ºy√ºkl√ºƒü√º (USDT)
        let lastSignalTime = 0;             // Son sinyal zamanƒ± (cooldown i√ßin)

        // WebSocket Trading specific variables
        let currentBalance = {              // Mevcut bakiye bilgileri
            total: 0,                       // Toplam bakiye (USDT)
            available: 0,                   // Kullanƒ±labilir bakiye
            frozen: 0,                      // Donmu≈ü bakiye (a√ßƒ±k pozisyonlarda)
            unrealizedPnL: 0               // Ger√ßekle≈ümemi≈ü kar/zarar
        };

        let openOrders = [];                // A√ßƒ±k emirler listesi
        let orderHistory = [];              // Emir ge√ßmi≈üi
        let positionHistory = [];           // Pozisyon ge√ßmi≈üi
        let balanceHistory = [];            // Bakiye deƒüi≈üim ge√ßmi≈üi

        // API credentials - MEXC trading API'si i√ßin gerekli kimlik bilgileri
        let apiCredentials = {
            key: '',                        // API anahtarƒ±
            secret: ''                      // API secret key
        };

        // Trading performans istatistikleri
        let tradingStats = {
            totalTrades: 0,                 // Toplam yapƒ±lan i≈ülem sayƒ±sƒ±
            winTrades: 0,                   // Kazan√ßlƒ± i≈ülem sayƒ±sƒ±
            lossTrades: 0,                  // Zararlƒ± i≈ülem sayƒ±sƒ±
            totalProfit: 0,                 // Toplam kar/zarar (USDT)
            dailyTrades: 0,                 // G√ºnl√ºk i≈ülem sayƒ±sƒ±
            bestTrade: 0,                   // En y√ºksek kar (%)
            worstTrade: 0,                  // En y√ºksek zarar (%)
            avgTradeTime: 0                 // Ortalama i≈ülem s√ºresi (saniye)
        };

        // Market verisi ve analiz i√ßin gerekli diziler
        let priceHistory = [];              // Fiyat ge√ßmi≈üi dizisi (teknik analiz i√ßin)
        let volumeHistory = [];             // Hacim ge√ßmi≈üi dizisi
        let orderBookData = {               // OrderBook verisi
            bids: [],                       // Alƒ±≈ü emirleri [fiyat, miktar]
            asks: []                        // Satƒ±≈ü emirleri [fiyat, miktar]
        };
        let signalHistory = [];             // T√ºm sinyal ge√ßmi≈üi (analiz i√ßin)

        // Bot konfig√ºrasyon parametreleri - Kullanƒ±cƒ±nƒ±n ayarlayabileceƒüi deƒüerler
        let botSettings = {
            volumeThreshold: 2.0,           // Volume spike algƒ±lama e≈üiƒüi (2x = %100 artƒ±≈ü)
            takeProfitPercent: 0.8,         // Take profit y√ºzdesi (0.8 = %0.8)
            stopLossPercent: 0.5,           // Stop loss y√ºzdesi (0.5 = %0.5)
            minConfidence: 70,              // Minimum sinyal g√ºven seviyesi (70 = %70)
            signalCooldown: 30000,          // Sinyaller arasƒ± minimum bekleme s√ºresi (30 saniye)
            learningSpeed: 'medium',        // AI √∂ƒürenme hƒ±zƒ± (slow/medium/fast)
            autoOptimization: true,         // Otomatik parametre optimizasyonu
            adaptiveThresholds: true,       // Performansa g√∂re e≈üik ayarlama
            riskManagement: true            // Geli≈ümi≈ü risk y√∂netimi
        };
       
        // === PROJECT HYPERION AI GLOBAL DEƒûƒ∞≈ûKENLERƒ∞ ===
        let aiSupervisor = null;
        let aiOrderbook = null;
        let aiVolume = null;
        let aiSentiment = null;
        let antiManipulationMatrix = null;
        let signalGenerator = null;

        // AI √∂ƒürenme sistemi - Botun akƒ±llƒ± davranmasƒ±nƒ± saƒülayan core algoritma
        let aiLearningData = {
            totalProcessed: 0,              // AI'nin i≈ülediƒüi toplam veri sayƒ±sƒ±
            learningProgress: 0,            // √ñƒürenme ilerlemesi (0-100 arasƒ±)
            performanceScore: 0,            // Genel AI performans skoru
            accuracy: 0,                    // Tahmin doƒüruluƒüu y√ºzdesi
            strategies: {                   // Her strateji i√ßin ayrƒ± √∂ƒürenme verileri
                whale: { total: 0, success: 0, profits: [], times: [], reliability: 0 },
                imbalance: { total: 0, success: 0, profits: [], times: [], reliability: 0 },
                volume: { total: 0, success: 0, profits: [], times: [], reliability: 0 },
                sr: { total: 0, success: 0, profits: [], times: [], reliability: 0 }
            },
            lastModelUpdate: null           // AI modelinin son g√ºncellenme zamanƒ±
        };

        // === TEMEL YARDIMCI FONKSƒ∞YONLAR ===
        // Bu fonksiyonlar botun temel i≈üleyi≈üini saƒülayan ara√ßlardƒ±r

        /**
         * DOM elementlerini g√ºvenli ≈üekilde g√ºnceller
         */
        function safeUpdateElement(elementId, value, property = 'textContent') {
            const element = document.getElementById(elementId);
            if (element) {
                element[property] = value;
                return true;
            }
            return false;
        }

        /**
         * Coin sembol√ºn√º doƒürular ve MEXC formatƒ±na √ßevirir
         */
        function validateSymbol(symbol) {
            const coin = symbol.trim().toUpperCase();
            if (/^[A-Z]{2,10}$/.test(coin)) {
                return { 
                    valid: true, 
                    coin: coin + '_USDT',
                    message: `üîç ${coin}_USDT analizi ba≈ülatƒ±lƒ±yor...` 
                };
            }
            return { 
                valid: false, 
                coin: null, 
                message: `‚ùå Ge√ßersiz format. √ñrnek: BTC, ETH, PEPE` 
            };
        }

        /**
         * Fiyatlarƒ± kullanƒ±cƒ± dostu formatta g√∂sterir
         */
        function formatPrice(price) {
            if (price === 0 || !price) return '$0.00000000';
            if (price >= 1) return `$${price.toFixed(4)}`;
            if (price >= 0.01) return `$${price.toFixed(6)}`;
            return `$${price.toFixed(8)}`;
        }

        /**
         * USDT deƒüerlerini formatlar
         */
        function formatUSDT(amount) {
            if (Math.abs(amount) >= 1000) {
                return `${(amount / 1000).toFixed(2)}K USDT`;
            }
            return `${amount.toFixed(2)} USDT`;
        }

        /**
         * Zaman formatƒ±nƒ± kullanƒ±cƒ± dostu hale getirir
         */
        function formatTime(seconds) {
            if (seconds < 60) return `${seconds}s`;
            if (seconds < 3600) return `${Math.floor(seconds / 60)}m ${seconds % 60}s`;
            return `${Math.floor(seconds / 3600)}h ${Math.floor((seconds % 3600) / 60)}m`;
        }

        /**
         * Toast bildirim sistemi
         */
        function showToast(message, type = 'info', duration = 3000) {
            const toast = document.getElementById('toast');
            if (!toast) return;
            
            toast.textContent = message;
            toast.className = `toast show ${type}`;
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, duration);
            
            addToMobileDebug(`Toast: ${message}`, type);
        }

        /**
         * Debug log sistemi
         */
        function debugLog(message, type = 'info') {
            console.log(`[${type.toUpperCase()}] ${message}`);
            addToMobileDebug(message, type);
        }

        /**
         * Mobil debug console'a log ekler
         */
        function addToMobileDebug(message, type = 'info') {
            const consoleEl = document.getElementById('mobileDebugConsole');
            if (!consoleEl) return;
            
            const colors = {
                info: '#4ECDC4', success: '#00D4AA', warning: '#FFC107',
                error: '#F84960', api: '#FF6B6B', trade: '#764ba2', ai: '#FF6B6B'
            };
            
            const timestamp = new Date().toLocaleTimeString('tr-TR');
            const logEntry = document.createElement('div');
            logEntry.style.color = colors[type] || colors.info;
            logEntry.style.marginBottom = '3px';
            logEntry.style.borderLeft = `3px solid ${colors[type] || colors.info}`;
            logEntry.style.paddingLeft = '8px';
            logEntry.style.fontSize = '11px';
            logEntry.style.lineHeight = '1.4';
            logEntry.innerHTML = `<span style="color: #888;">[${timestamp}]</span> ${message}`;
            
            consoleEl.insertBefore(logEntry, consoleEl.firstChild);
            
            if (debugAutoScroll) {
                consoleEl.scrollTop = 0;
            }
            
            if (consoleEl.children.length > 200) {
                consoleEl.removeChild(consoleEl.lastChild);
            }
        }

        function clearDebugConsole() {
            const consoleEl = document.getElementById('mobileDebugConsole');
            if (consoleEl) {
                consoleEl.innerHTML = '';
                debugLog('Debug console temizlendi.', 'info');
            }
        }

        function toggleDebugAutoScroll() {
            debugAutoScroll = !debugAutoScroll;
            const btn = document.getElementById('autoScrollBtn');
            if (btn) {
                btn.textContent = `üìú Auto Scroll: ${debugAutoScroll ? 'ON' : 'OFF'}`;
            }
            debugLog(`Auto scroll ${debugAutoScroll ? 'a√ßƒ±ldƒ±' : 'kapatƒ±ldƒ±'}`, 'info');
        }

        /**
         * Sistem uptime hesaplayƒ±cƒ±sƒ±
         */
        function updateSystemUptime() {
            const uptimeSeconds = Math.floor((Date.now() - systemStartTime) / 1000);
            const hours = String(Math.floor(uptimeSeconds / 3600)).padStart(2, '0');
            const minutes = String(Math.floor((uptimeSeconds % 3600) / 60)).padStart(2, '0');
            const seconds = String(uptimeSeconds % 60).padStart(2, '0');
            safeUpdateElement('systemUptime', `${hours}:${minutes}:${seconds}`);
        }

        function scrollToTop() {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function showLoading(message = 'ƒ∞≈ülem yapƒ±lƒ±yor...') {
            safeUpdateElement('loadingMessage', message);
            const overlay = document.getElementById('loadingOverlay');
            if (overlay) overlay.style.display = 'flex';
        }

        function hideLoading() {
            const overlay = document.getElementById('loadingOverlay');
            if (overlay) overlay.style.display = 'none';
        }


       
        // === API CREDENTIALS Y√ñNETƒ∞Mƒ∞ ===
        function saveApiCredentials() {
            debugLog('üíæ API credentials kaydediliyor...', 'api');
            const key = document.getElementById('apiKey').value.trim();
            const secret = document.getElementById('apiSecret').value.trim();
            
            if (!key || !secret) {
                showToast('‚ö†Ô∏è API Key ve Secret alanlarƒ±nƒ± doldurun', 'warning');
                return;
            }
            
            apiCredentials.key = key;
            apiCredentials.secret = secret;
            
            debugLog(`‚úÖ API credentials bellekte kaydedildi.`, 'success');
            showToast('üíæ API credentials kaydedildi', 'success');
            
            // Trading WebSocket baƒülantƒ±sƒ±nƒ± ba≈ülat
            if (isConnected && !isTradingConnected) {
                connectTradingWebSocket();
            }
        }

        function loadApiCredentials() {
            // Bu √∂rnekte g√ºvenlik nedeniyle localStorage kullanƒ±lmamaktadƒ±r.
            // Sayfa yenilendiƒüinde tekrar girilmesi gerekir.
            // Ger√ßek bir uygulamada daha g√ºvenli bir depolama y√∂ntemi gerekir.
        }

        function createSignature(params, secret) {
            if (typeof CryptoJS === 'undefined') {
                debugLog('‚ùå CryptoJS k√ºt√ºphanesi y√ºklenmedi!', 'error');
                return '';
            }
            const queryString = Object.keys(params).sort().map(key => `${key}=${params[key]}`).join('&');
            return CryptoJS.HmacSHA256(queryString, secret).toString();
        }

        async function testApiCredentials() {
            if (!apiCredentials.key || !apiCredentials.secret) {
                showToast('‚ùå √ñnce API credentials girin', 'error');
                return;
            }
            debugLog('üß™ API credentials test ediliyor...', 'api');
            showLoading('API credentials test ediliyor...');
            
            // Bu kƒ±sƒ±m normalde bir API isteƒüi g√∂nderir.
            // Tarayƒ±cƒ± ortamƒ±nda CORS sorunlarƒ± nedeniyle sim√ºle edilmi≈ütir.
            setTimeout(() => {
                hideLoading();
                showToast('‚úÖ API baƒülantƒ±sƒ± ba≈üarƒ±lƒ± (Sim√ºlasyon)', 'success');
                debugLog('‚úÖ API test ba≈üarƒ±lƒ± (Sim√ºlasyon)', 'success');
                
                // Test ba≈üarƒ±lƒ±ysa trading WebSocket'i ba≈ülat
                if (isConnected && !isTradingConnected) {
                    connectTradingWebSocket();
                }
            }, 1500);
        }

        // === WEBSOCKET BAƒûLANTI Sƒ∞STEMƒ∞ ===
        function connect() {
            const coinInput = document.getElementById('manualSymbol').value.trim();
            const validation = validateSymbol(coinInput);
            if (!validation.valid) {
                showToast(validation.message, 'error');
                return;
            }

            currentSymbol = validation.coin;
            debugLog(`üîó ${currentSymbol} i√ßin MEXC baƒülantƒ±sƒ± ba≈ülatƒ±lƒ±yor...`, 'info');
            
            // UI g√ºncellemeleri
            updateConnectionUI('connecting');
            
            const wsUrl = 'wss://futures.mexc.com/edge';
            ws = new WebSocket(wsUrl);
            
            ws.onopen = () => {
                isConnected = true;
                reconnectAttempts = 0;
                updateConnectionUI('connected');
                debugLog('‚úÖ MEXC WebSocket baƒülantƒ±sƒ± kuruldu', 'success');
                showToast(`‚úÖ ${currentSymbol} i√ßin baƒülantƒ± ba≈üarƒ±lƒ±`, 'success');
                subscribeToPair(currentSymbol);
                startPingSystem();
                
                // API credentials varsa trading WebSocket'i de ba≈ülat
                if (apiCredentials.key && apiCredentials.secret) {
                    connectTradingWebSocket();
                }
            };

            ws.onmessage = (event) => {
                try {
                    const data = JSON.parse(event.data);
                    handleMarketData(data);
                } catch (error) {
                    debugLog(`‚ùå Market verisi i≈üleme hatasƒ±: ${error.message}`, 'error');
                }
            };

            ws.onclose = (event) => {
                isConnected = false;
                updateConnectionUI('disconnected');
                debugLog(`‚ö†Ô∏è WebSocket baƒülantƒ±sƒ± kapandƒ± (Kod: ${event.code})`, 'warning');
                stopPingSystem();
                attemptReconnection();
            };

            ws.onerror = (error) => {
                debugLog(`‚ùå WebSocket baƒülantƒ± hatasƒ±`, 'error');
                showToast('‚ùå Baƒülantƒ± hatasƒ± olu≈ütu', 'error');
                updateConnectionUI('disconnected');
            };
        }

        function disconnect() {
            if (ws) {
                ws.close(1000, 'Kullanƒ±cƒ± tarafƒ±ndan kapatƒ±ldƒ±');
            }
            if (tradingWs) {
                tradingWs.close(1000, 'Kullanƒ±cƒ± tarafƒ±ndan kapatƒ±ldƒ±');
            }
            ws = null;
            tradingWs = null;
            isConnected = false;
            isTradingConnected = false;
            stopPingSystem();
            stopTradingPingSystem();
            updateConnectionUI('disconnected');
            updateTradingConnectionUI('disconnected');
            debugLog('üî¥ WebSocket baƒülantƒ±larƒ± kapatƒ±ldƒ±', 'info');
            reconnectAttempts = 0;
        }

        function toggleConnection() {
            if (isConnected) {
                disconnect();
            } else {
                connect();
            }
        }

        function subscribeToPair(symbol) {
            if (!ws || ws.readyState !== WebSocket.OPEN) return;
            const subscriptions = [
                { method: 'sub.deal', param: { symbol } },
                { method: 'sub.depth', param: { symbol, depth: 20 } },
                { method: 'sub.ticker', param: { symbol } }
            ];
            subscriptions.forEach(sub => ws.send(JSON.stringify(sub)));
            debugLog(`üì° ${symbol} i√ßin veri kanallarƒ±na abone olundu`, 'info');
        }

        function startPingSystem() {
            stopPingSystem();
            pingInterval = setInterval(() => {
                if (ws && ws.readyState === WebSocket.OPEN) {
                    ws.send(JSON.stringify({ method: 'ping' }));
                }
            }, 30000);
        }

        function stopPingSystem() {
            if (pingInterval) {
                clearInterval(pingInterval);
                pingInterval = null;
            }
        }

        function attemptReconnection() {
            if (reconnectAttempts >= maxReconnectAttempts) {
                debugLog(`‚ùå Maksimum yeniden baƒülanma denemesi a≈üƒ±ldƒ±.`, 'error');
                return;
            }
            reconnectAttempts++;
            const delay = Math.min(5 * reconnectAttempts, 30) * 1000;
            debugLog(`üîÑ ${delay / 1000}s sonra yeniden baƒülanma denenecek... (${reconnectAttempts}/${maxReconnectAttempts})`, 'warning');
            setTimeout(() => {
                if (!isConnected) connect();
            }, delay);
        }

        function updateConnectionUI(status) {
            const connectBtn = document.getElementById('connectBtn');
            const wsStatus = document.getElementById('wsStatus');
            const stickyConnection = document.getElementById('stickyConnection');
            
            if (status === 'connecting') {
                connectBtn.textContent = '‚è≥ Baƒülanƒ±lƒ±yor...';
                connectBtn.disabled = true;
                wsStatus.textContent = '‚è≥ Baƒülanƒ±lƒ±yor...';
                wsStatus.style.color = '#FFC107';
            } else if (status === 'connected') {
                connectBtn.textContent = 'üîå Baƒülantƒ±yƒ± Kes';
                connectBtn.className = 'btn danger';
                connectBtn.disabled = false;
                wsStatus.textContent = '‚úÖ Baƒülƒ±';
                wsStatus.style.color = '#00D4AA';
                stickyConnection.className = 'quick-status status-connected';
                stickyConnection.innerHTML = '‚úÖ Baƒülƒ±';
            } else { // disconnected
                connectBtn.textContent = 'üîå WebSocket Baƒülantƒ±sƒ±nƒ± Ba≈ülat';
                connectBtn.className = 'btn success';
                connectBtn.disabled = false;
                wsStatus.textContent = 'üî¥ Kapalƒ±';
                wsStatus.style.color = '#F84960';
                stickyConnection.className = 'quick-status status-disconnected';
                stickyConnection.innerHTML = 'üî¥ Baƒülantƒ±sƒ±z';
            }
        }

        // === WEBSOCKET TRADING Sƒ∞STEMƒ∞ ===
        function connectTradingWebSocket() {
            if (!apiCredentials.key || !apiCredentials.secret) {
                debugLog('‚ùå Trading WebSocket i√ßin API credentials gerekli', 'error');
                return;
            }

            debugLog('üîó Trading WebSocket baƒülantƒ±sƒ± ba≈ülatƒ±lƒ±yor...', 'trade');
            updateTradingConnectionUI('connecting');

            // MEXC Trading WebSocket URL (sim√ºlasyon i√ßin aynƒ± URL kullanƒ±lƒ±yor)
            const tradingWsUrl = 'wss://futures.mexc.com/edge';
            tradingWs = new WebSocket(tradingWsUrl);

            tradingWs.onopen = () => {
                isTradingConnected = true;
                updateTradingConnectionUI('connected');
                debugLog('‚úÖ Trading WebSocket baƒülantƒ±sƒ± kuruldu', 'success');
                showToast('‚úÖ Trading WebSocket baƒülandƒ±', 'success');
                subscribeToTradingChannels();
                startTradingPingSystem();
                
                // ƒ∞lk bakiye sorgusunu yap
                requestAccountBalance();
            };

            tradingWs.onmessage = (event) => {
                try {
                    const data = JSON.parse(event.data);
                    handleTradingData(data);
                } catch (error) {
                    debugLog(`‚ùå Trading verisi i≈üleme hatasƒ±: ${error.message}`, 'error');
                }
            };

            tradingWs.onclose = (event) => {
                isTradingConnected = false;
                updateTradingConnectionUI('disconnected');
                debugLog(`‚ö†Ô∏è Trading WebSocket baƒülantƒ±sƒ± kapandƒ± (Kod: ${event.code})`, 'warning');
                stopTradingPingSystem();
            };

            tradingWs.onerror = (error) => {
                debugLog(`‚ùå Trading WebSocket baƒülantƒ± hatasƒ±`, 'error');
                updateTradingConnectionUI('disconnected');
            };
        }

        function subscribeToTradingChannels() {
            if (!tradingWs || tradingWs.readyState !== WebSocket.OPEN) return;
            
            const subscriptions = [
                { method: 'sub.orders', param: {} },        // Emir g√ºncellemeleri
                { method: 'sub.positions', param: {} },     // Pozisyon g√ºncellemeleri
                { method: 'sub.balance', param: {} }        // Bakiye g√ºncellemeleri
            ];
            
            subscriptions.forEach(sub => {
                tradingWs.send(JSON.stringify(sub));
                debugLog(`üì° Trading kanalƒ±na abone olundu: ${sub.method}`, 'trade');
            });
        }

        function startTradingPingSystem() {
            stopTradingPingSystem();
            tradingPingInterval = setInterval(() => {
                if (tradingWs && tradingWs.readyState === WebSocket.OPEN) {
                    tradingWs.send(JSON.stringify({ method: 'ping' }));
                }
            }, 30000);
        }

        function stopTradingPingSystem() {
            if (tradingPingInterval) {
                clearInterval(tradingPingInterval);
                tradingPingInterval = null;
            }
        }

        function updateTradingConnectionUI(status) {
            const tradingWsStatus = document.getElementById('tradingWsStatus');
            
            if (status === 'connecting') {
                tradingWsStatus.textContent = '‚è≥ Baƒülanƒ±lƒ±yor...';
                tradingWsStatus.style.color = '#FFC107';
            } else if (status === 'connected') {
                tradingWsStatus.textContent = '‚úÖ Baƒülƒ±';
                tradingWsStatus.style.color = '#00D4AA';
            } else { // disconnected
                tradingWsStatus.textContent = 'üî¥ Kapalƒ±';
                tradingWsStatus.style.color = '#F84960';
            }
        }

        // === MARKET DATA ƒ∞≈ûLEME Sƒ∞STEMƒ∞ ===
        function handleMarketData(data) {
            if (data.method === 'pong') {
                debugLog('üì∂ Pong alƒ±ndƒ±', 'info');
                return;
            }
            if (!data.channel || !data.data) return;

            switch (data.channel) {
                case 'push.deal':
                    handleTradeData(data.data);
                    break;
                case 'push.depth':
                    handleOrderBookData(data.data);
                    break;
                case 'push.ticker':
                    handleTickerData(data.data);
                    break;
            }
            triggerAIAnalysis();
        }

        function handleTradeData(tradeData) {
            const price = parseFloat(tradeData.p);
            if (isNaN(price) || price <= 0) return;

            const changePercent = lastPrice > 0 ? ((price - lastPrice) / lastPrice) * 100 : 0;
            lastPrice = price;
            priceHistory.push(price);
            if (priceHistory.length > 200) priceHistory.shift();

            updatePriceDisplay(price, changePercent);
            
            // Aktif pozisyon varsa PnL g√ºncelle
            if (activePosition) {
                updatePositionPnL(price);
            }
        }

        function handleOrderBookData(orderBookData) {
            if (orderBookData.bids && orderBookData.asks) {
                orderBookData.bids = orderBookData.bids.map(bid => [parseFloat(bid[0]), parseFloat(bid[1])]);
                orderBookData.asks = orderBookData.asks.map(ask => [parseFloat(ask[0]), parseFloat(ask[1])]);
                
                // Order book analizi
                analyzeOrderBookImbalance(orderBookData);
            }
        }

        function handleTickerData(tickerData) {
            safeUpdateElement('volume24h', parseFloat(tickerData.volume).toFixed(2));
            volumeHistory.push(parseFloat(tickerData.volume));
            if (volumeHistory.length > 100) volumeHistory.shift();
        }

        function updatePriceDisplay(price, change) {
            const formattedPrice = formatPrice(price);
            safeUpdateElement('stickyPrice', formattedPrice);
            safeUpdateElement('mainHeaderPrice', formattedPrice);
            safeUpdateElement('marketCurrentPrice', formattedPrice);

            const changeEl = document.getElementById('stickyChange');
            const mainChangeEl = document.getElementById('mainHeaderChange');
            const marketChangeEl = document.getElementById('marketPriceChange');
            
            if (change >= 0) {
                changeEl.className = 'price-change positive';
                mainChangeEl.style.color = '#00D4AA';
                marketChangeEl.style.color = '#00D4AA';
                changeEl.innerHTML = `<span>üìà</span><span>+${change.toFixed(3)}%</span>`;
            } else {
                changeEl.className = 'price-change negative';
                mainChangeEl.style.color = '#F84960';
                marketChangeEl.style.color = '#F84960';
                changeEl.innerHTML = `<span>üìâ</span><span>${change.toFixed(3)}%</span>`;
            }
            
            mainChangeEl.textContent = `${change >= 0 ? '+' : ''}${change.toFixed(3)}%`;
            marketChangeEl.textContent = `${change >= 0 ? '+' : ''}${change.toFixed(3)}%`;
            safeUpdateElement('lastUpdateTime', `Son g√ºncelleme: ${new Date().toLocaleTimeString()}`);
        }

        // === TRADING DATA ƒ∞≈ûLEME Sƒ∞STEMƒ∞ ===
        function handleTradingData(data) {
            if (data.method === 'pong') {
                debugLog('üì∂ Trading Pong alƒ±ndƒ±', 'trade');
                return;
            }

            switch (data.channel) {
                case 'push.orders':
                    handleOrderUpdate(data.data);
                    break;
                case 'push.positions':
                    handlePositionUpdate(data.data);
                    break;
                case 'push.balance':
                    handleBalanceUpdate(data.data);
                    break;
            }
        }

        function handleOrderUpdate(orderData) {
            debugLog(`üìã Emir g√ºncellendi: ${orderData.orderId} - ${orderData.status}`, 'trade');
            
            // Emir listesini g√ºncelle
            const existingOrderIndex = openOrders.findIndex(order => order.orderId === orderData.orderId);
            
            if (orderData.status === 'FILLED' || orderData.status === 'CANCELLED') {
                // Tamamlanan veya iptal edilen emirleri a√ßƒ±k emirler listesinden √ßƒ±kar
                if (existingOrderIndex !== -1) {
                    openOrders.splice(existingOrderIndex, 1);
                }
                // Ge√ßmi≈üe ekle
                orderHistory.unshift(orderData);
                if (orderHistory.length > 100) orderHistory.pop();
            } else {
                // A√ßƒ±k emirleri g√ºncelle
                if (existingOrderIndex !== -1) {
                    openOrders[existingOrderIndex] = orderData;
                } else {
                    openOrders.push(orderData);
                }
            }
            
            updateOrdersDisplay();
            showToast(`üìã Emir ${orderData.status}: ${orderData.symbol}`, 'info');
        }

        function handlePositionUpdate(positionData) {
            debugLog(`üìä Pozisyon g√ºncellendi: ${positionData.symbol} - ${positionData.side}`, 'trade');
            
            if (positionData.size > 0) {
                activePosition = positionData;
                updateActivePositionDisplay();
            } else {
                // Pozisyon kapandƒ±
                if (activePosition) {
                    positionHistory.unshift(activePosition);
                    if (positionHistory.length > 50) positionHistory.pop();
                }
                activePosition = null;
                updateActivePositionDisplay();
            }
            
            showToast(`üìä Pozisyon g√ºncellendi: ${positionData.symbol}`, 'info');
        }

        function handleBalanceUpdate(balanceData) {
            debugLog(`üí∞ Bakiye g√ºncellendi: ${balanceData.total} USDT`, 'trade');
            
            const oldBalance = currentBalance.total;
            currentBalance = balanceData;
            
            // Bakiye deƒüi≈üimini kaydet
            balanceHistory.unshift({
                timestamp: Date.now(),
                balance: balanceData.total,
                change: balanceData.total - oldBalance
            });
            if (balanceHistory.length > 100) balanceHistory.pop();
            
            updateBalanceDisplay();
            
            // G√ºnl√ºk PnL hesapla
            const todayStart = new Date();
            todayStart.setHours(0, 0, 0, 0);
            const todayBalanceHistory = balanceHistory.filter(b => b.timestamp >= todayStart.getTime());
            if (todayBalanceHistory.length > 0) {
                const startBalance = todayBalanceHistory[todayBalanceHistory.length - 1].balance;
                dailyPnL = balanceData.total - startBalance;
                safeUpdateElement('dailyPnLDisplay', formatUSDT(dailyPnL));
            }
        }


        // === WEBSOCKET TRADING FONKSƒ∞YONLARI ===
        
        /**
         * WebSocket √ºzerinden BUY emri g√∂nderir
         */
        async function executeWebSocketBuy(symbol, quantity, price = null, orderType = 'MARKET') {
            if (!isTradingConnected || !tradingWs) {
                debugLog('‚ùå Trading WebSocket baƒülantƒ±sƒ± yok', 'error');
                showToast('‚ùå Trading baƒülantƒ±sƒ± gerekli', 'error');
                return null;
            }

            const orderId = generateOrderId();
            const timestamp = Date.now();
            
            const orderData = {
                method: 'order.place',
                params: {
                    orderId: orderId,
                    symbol: symbol,
                    side: 'BUY',
                    type: orderType,
                    quantity: quantity,
                    price: price,
                    timestamp: timestamp
                }
            };

            // API imzasƒ± olu≈ütur
            if (apiCredentials.secret) {
                orderData.params.signature = createSignature(orderData.params, apiCredentials.secret);
            }

            try {
                debugLog(`üìà BUY emri g√∂nderiliyor: ${quantity} ${symbol} @ ${price || 'MARKET'}`, 'trade');
                tradingWs.send(JSON.stringify(orderData));
                
                showToast(`üìà BUY emri g√∂nderildi: ${quantity} ${symbol}`, 'success');
                
                // Sim√ºlasyon i√ßin emir durumunu g√ºncelle
                setTimeout(() => {
                    const simulatedOrder = {
                        orderId: orderId,
                        symbol: symbol,
                        side: 'BUY',
                        type: orderType,
                        quantity: quantity,
                        price: price || lastPrice,
                        status: 'FILLED',
                        timestamp: timestamp
                    };
                    handleOrderUpdate(simulatedOrder);
                }, 1000);
                
                return orderId;
            } catch (error) {
                debugLog(`‚ùå BUY emri hatasƒ±: ${error.message}`, 'error');
                showToast('‚ùå BUY emri g√∂nderilemedi', 'error');
                return null;
            }
        }

        /**
         * WebSocket √ºzerinden SELL emri g√∂nderir
         */
        async function executeWebSocketSell(symbol, quantity, price = null, orderType = 'MARKET') {
            if (!isTradingConnected || !tradingWs) {
                debugLog('‚ùå Trading WebSocket baƒülantƒ±sƒ± yok', 'error');
                showToast('‚ùå Trading baƒülantƒ±sƒ± gerekli', 'error');
                return null;
            }

            const orderId = generateOrderId();
            const timestamp = Date.now();
            
            const orderData = {
                method: 'order.place',
                params: {
                    orderId: orderId,
                    symbol: symbol,
                    side: 'SELL',
                    type: orderType,
                    quantity: quantity,
                    price: price,
                    timestamp: timestamp
                }
            };

            // API imzasƒ± olu≈ütur
            if (apiCredentials.secret) {
                orderData.params.signature = createSignature(orderData.params, apiCredentials.secret);
            }

            try {
                debugLog(`üìâ SELL emri g√∂nderiliyor: ${quantity} ${symbol} @ ${price || 'MARKET'}`, 'trade');
                tradingWs.send(JSON.stringify(orderData));
                
                showToast(`üìâ SELL emri g√∂nderildi: ${quantity} ${symbol}`, 'success');
                
                // Sim√ºlasyon i√ßin emir durumunu g√ºncelle
                setTimeout(() => {
                    const simulatedOrder = {
                        orderId: orderId,
                        symbol: symbol,
                        side: 'SELL',
                        type: orderType,
                        quantity: quantity,
                        price: price || lastPrice,
                        status: 'FILLED',
                        timestamp: timestamp
                    };
                    handleOrderUpdate(simulatedOrder);
                }, 1000);
                
                return orderId;
            } catch (error) {
                debugLog(`‚ùå SELL emri hatasƒ±: ${error.message}`, 'error');
                showToast('‚ùå SELL emri g√∂nderilemedi', 'error');
                return null;
            }
        }

        /**
         * WebSocket √ºzerinden emir iptal eder
         */
        async function cancelWebSocketOrder(orderId) {
            if (!isTradingConnected || !tradingWs) {
                debugLog('‚ùå Trading WebSocket baƒülantƒ±sƒ± yok', 'error');
                return false;
            }

            const cancelData = {
                method: 'order.cancel',
                params: {
                    orderId: orderId,
                    timestamp: Date.now()
                }
            };

            try {
                debugLog(`‚ùå Emir iptal ediliyor: ${orderId}`, 'trade');
                tradingWs.send(JSON.stringify(cancelData));
                showToast(`‚ùå Emir iptal edildi: ${orderId}`, 'warning');
                return true;
            } catch (error) {
                debugLog(`‚ùå Emir iptal hatasƒ±: ${error.message}`, 'error');
                return false;
            }
        }

        /**
         * Hesap bakiyesini sorgular
         */
        function requestAccountBalance() {
            if (!isTradingConnected || !tradingWs) return;

            const balanceRequest = {
                method: 'account.balance',
                params: {
                    timestamp: Date.now()
                }
            };

            tradingWs.send(JSON.stringify(balanceRequest));
            debugLog('üí∞ Hesap bakiyesi sorgulanƒ±yor...', 'trade');
        }

        /**
         * A√ßƒ±k pozisyonlarƒ± sorgular
         */
        function requestOpenPositions() {
            if (!isTradingConnected || !tradingWs) return;

            const positionsRequest = {
                method: 'positions.query',
                params: {
                    timestamp: Date.now()
                }
            };

            tradingWs.send(JSON.stringify(positionsRequest));
            debugLog('üìä A√ßƒ±k pozisyonlar sorgulanƒ±yor...', 'trade');
        }

        /**
         * Benzersiz emir ID'si olu≈üturur
         */
        function generateOrderId() {
            return `3C3_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
        }

        // === POZƒ∞SYON Y√ñNETƒ∞Mƒ∞ ===
        
        /**
         * Aktif pozisyonun PnL'ini g√ºnceller
         */
        function updatePositionPnL(currentPrice) {
            if (!activePosition) return;

            const entryPrice = parseFloat(activePosition.entryPrice);
            const size = parseFloat(activePosition.size);
            const side = activePosition.side;

            let pnl = 0;
            if (side === 'LONG') {
                pnl = (currentPrice - entryPrice) * size;
            } else if (side === 'SHORT') {
                pnl = (entryPrice - currentPrice) * size;
            }

            const pnlPercent = (pnl / (entryPrice * size)) * 100;

            activePosition.unrealizedPnL = pnl;
            activePosition.pnlPercent = pnlPercent;

            updateActivePositionDisplay();
        }

        /**
         * Aktif pozisyon g√∂r√ºnt√ºs√ºn√º g√ºnceller
         */
        function updateActivePositionDisplay() {
            const noPositionState = document.getElementById('noPositionState');
            const activePositionState = document.getElementById('activePositionState');

            if (!activePosition) {
                noPositionState.style.display = 'block';
                activePositionState.style.display = 'none';
                return;
            }

            noPositionState.style.display = 'none';
            activePositionState.style.display = 'block';

            const pnl = activePosition.unrealizedPnL || 0;
            const pnlPercent = activePosition.pnlPercent || 0;
            const pnlColor = pnl >= 0 ? '#00D4AA' : '#F84960';
            const sideColor = activePosition.side === 'LONG' ? '#00D4AA' : '#F84960';

            activePositionState.innerHTML = `
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                    <div>
                        <div style="font-size: 1.2rem; font-weight: 700; color: ${sideColor};">
                            ${activePosition.side} ${activePosition.symbol}
                        </div>
                        <div style="font-size: 0.8rem; color: #888;">
                            Size: ${activePosition.size} | Entry: ${formatPrice(activePosition.entryPrice)}
                        </div>
                    </div>
                    <div style="text-align: right;">
                        <div style="font-size: 1.1rem; font-weight: 700; color: ${pnlColor};">
                            ${formatUSDT(pnl)}
                        </div>
                        <div style="font-size: 0.8rem; color: ${pnlColor};">
                            ${pnlPercent >= 0 ? '+' : ''}${pnlPercent.toFixed(2)}%
                        </div>
                    </div>
                </div>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                    <button class="btn danger" onclick="closePosition()" style="padding: 8px; font-size: 0.8rem;">
                        üî¥ Pozisyonu Kapat
                    </button>
                    <button class="btn warning" onclick="modifyPosition()" style="padding: 8px; font-size: 0.8rem;">
                        ‚öôÔ∏è D√ºzenle
                    </button>
                </div>
            `;
        }

        /**
         * Pozisyonu kapatƒ±r
         */
        async function closePosition() {
            if (!activePosition) {
                showToast('‚ùå Kapatƒ±lacak pozisyon yok', 'error');
                return;
            }

            const symbol = activePosition.symbol;
            const size = activePosition.size;
            const side = activePosition.side === 'LONG' ? 'SELL' : 'BUY';

            debugLog(`üî¥ Pozisyon kapatƒ±lƒ±yor: ${side} ${size} ${symbol}`, 'trade');
            
            if (side === 'SELL') {
                await executeWebSocketSell(symbol, size);
            } else {
                await executeWebSocketBuy(symbol, size);
            }

            showToast(`üî¥ Pozisyon kapatma emri g√∂nderildi`, 'warning');
        }

        /**
         * Pozisyonu d√ºzenler (Stop Loss / Take Profit)
         */
        function modifyPosition() {
            if (!activePosition) return;
            
            showToast('‚öôÔ∏è Pozisyon d√ºzenleme paneli yakƒ±nda...', 'info');
            // Bu fonksiyon gelecekte geni≈ületilebilir
        }

        // === BALANCE TRACKING Sƒ∞STEMƒ∞ ===
        
        /**
         * Bakiye g√∂r√ºnt√ºs√ºn√º g√ºnceller
         */
        function updateBalanceDisplay() {
            // Ana bakiye g√∂stergeleri
            safeUpdateElement('totalBalance', formatUSDT(currentBalance.total));
            safeUpdateElement('availableBalance', formatUSDT(currentBalance.available));
            safeUpdateElement('frozenBalance', formatUSDT(currentBalance.frozen));
            
            // G√ºnl√ºk PnL renklendirmesi
            const dailyPnLElement = document.getElementById('dailyPnLDisplay');
            if (dailyPnLElement) {
                dailyPnLElement.textContent = formatUSDT(dailyPnL);
                if (dailyPnL > 0) {
                    dailyPnLElement.className = 'balance-positive';
                } else if (dailyPnL < 0) {
                    dailyPnLElement.className = 'balance-negative';
                } else {
                    dailyPnLElement.className = 'balance-neutral';
                }
            }
        }

        /**
         * Emirlerin g√∂r√ºnt√ºs√ºn√º g√ºnceller
         */
        function updateOrdersDisplay() {
            // A√ßƒ±k emirler sayƒ±sƒ±nƒ± g√ºncelle
            safeUpdateElement('openOrdersCount', openOrders.length);
            
            // Toplam i≈ülem sayƒ±sƒ±nƒ± g√ºncelle
            tradingStats.totalTrades = orderHistory.filter(order => order.status === 'FILLED').length;
            safeUpdateElement('totalTradesDisplay', tradingStats.totalTrades);
        }

        // === ORDER BOOK ANALƒ∞Zƒ∞ ===
        
        /**
         * Order book dengesizliƒüini analiz eder
         */
        function analyzeOrderBookImbalance(orderBook) {
            if (!orderBook.bids || !orderBook.asks || orderBook.bids.length === 0 || orderBook.asks.length === 0) {
                return;
            }

            // ƒ∞lk 10 seviyedeki toplam hacmi hesapla
            const bidVolume = orderBook.bids.slice(0, 10).reduce((sum, bid) => sum + bid[1], 0);
            const askVolume = orderBook.asks.slice(0, 10).reduce((sum, ask) => sum + ask[1], 0);
            const totalVolume = bidVolume + askVolume;

            if (totalVolume === 0) return;

            const buyPressure = (bidVolume / totalVolume) * 100;
            const sellPressure = (askVolume / totalVolume) * 100;

            // UI g√ºncelle
            safeUpdateElement('buyPressure', `${buyPressure.toFixed(1)}%`);
            safeUpdateElement('sellPressure', `${sellPressure.toFixed(1)}%`);

            const balanceBar = document.getElementById('orderbookBalance');
            if (balanceBar) {
                balanceBar.style.width = `${buyPressure}%`;
            }

            // Dengesizlik durumunu belirle
            let imbalanceText = 'Dengeli Piyasa';
            if (buyPressure > 60) {
                imbalanceText = 'G√º√ßl√º Alƒ±≈ü Baskƒ±sƒ±';
            } else if (sellPressure > 60) {
                imbalanceText = 'G√º√ßl√º Satƒ±≈ü Baskƒ±sƒ±';
            } else if (buyPressure > 55) {
                imbalanceText = 'Hafif Alƒ±≈ü Baskƒ±sƒ±';
            } else if (sellPressure > 55) {
                imbalanceText = 'Hafif Satƒ±≈ü Baskƒ±sƒ±';
            }

            safeUpdateElement('orderbookImbalance', imbalanceText);

            // AI sistemine order book verilerini g√∂nder
            if (aiOrderbook) {
                aiOrderbook.analyze({
                    bids: orderBook.bids,
                    asks: orderBook.asks,
                    buyPressure: buyPressure,
                    sellPressure: sellPressure,
                    imbalance: imbalanceText
                });
            }
        }

        // === Sƒ∞NYAL ƒ∞≈ûLEME VE OTOMATƒ∞K TRADING ===
        
        /**
         * AI sinyali geldiƒüinde otomatik trading yapar
         */
        async function processAISignal(signal) {
            if (!tradingEnabled) {
                debugLog('‚è∏Ô∏è Trading kapalƒ±, sinyal i≈ülenmedi', 'warning');
                return;
            }

            if (!isTradingConnected) {
                debugLog('‚ùå Trading WebSocket baƒülantƒ±sƒ± yok, sinyal i≈ülenemedi', 'error');
                return;
            }

            // G√ºnl√ºk zarar limitini kontrol et
            if (dailyPnL < -maxDailyLoss) {
                debugLog('üõë G√ºnl√ºk zarar limiti a≈üƒ±ldƒ±, trading durduruldu', 'error');
                tradingEnabled = false;
                updateTradingStatus();
                return;
            }

            // Aktif pozisyon varsa yeni sinyal alma
            if (activePosition) {
                debugLog('‚è≥ Aktif pozisyon var, yeni sinyal bekletiliyor', 'warning');
                return;
            }

            debugLog(`üéØ AI sinyali i≈üleniyor: ${signal.side} ${signal.symbol}`, 'trade');

            try {
                let orderId = null;
                const quantity = calculatePositionSize(signal.entryPrice);

                if (signal.side === 'LONG') {
                    orderId = await executeWebSocketBuy(signal.symbol, quantity, signal.entryPrice, 'LIMIT');
                } else if (signal.side === 'SHORT') {
                    orderId = await executeWebSocketSell(signal.symbol, quantity, signal.entryPrice, 'LIMIT');
                }

                if (orderId) {
                    // Sinyali aktif sinyal olarak kaydet
                    activeSignal = {
                        ...signal,
                        orderId: orderId,
                        timestamp: Date.now(),
                        status: 'ACTIVE'
                    };

                    updateActiveSignalDisplay();
                    showToast(`üéØ AI sinyali i≈ülendi: ${signal.side} ${signal.symbol}`, 'success');
                    
                    // Ses bildirimi √ßal (Android telefon i√ßin)
                    playSignalNotification();
                }
            } catch (error) {
                debugLog(`‚ùå Sinyal i≈üleme hatasƒ±: ${error.message}`, 'error');
                showToast('‚ùå Sinyal i≈ülenemedi', 'error');
            }
        }

        /**
         * Pozisyon b√ºy√ºkl√ºƒü√ºn√º hesaplar
         */
        function calculatePositionSize(entryPrice) {
            const maxRisk = positionSize; // USDT cinsinden
            const quantity = maxRisk / entryPrice;
            return parseFloat(quantity.toFixed(6));
        }

        /**
         * Sinyal bildirimi sesi √ßalar (Android telefon i√ßin)
         */
        function playSignalNotification() {
            try {
                // Web Audio API ile basit bir beep sesi olu≈ütur
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();

                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);

                oscillator.frequency.value = 800; // 800 Hz
                oscillator.type = 'sine';

                gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);

                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + 0.5);

                debugLog('üîä Sinyal bildirimi sesi √ßalƒ±ndƒ±', 'info');
            } catch (error) {
                debugLog(`‚ùå Ses bildirimi hatasƒ±: ${error.message}`, 'error');
            }
        }

        /**
         * Trading durumunu g√ºnceller
         */
        function updateTradingStatus() {
            const tradingStatus = document.getElementById('tradingStatus');
            const tradingToggle = document.getElementById('tradingToggle');
            const tradingButtonText = document.getElementById('tradingButtonText');
            const stickyTrading = document.getElementById('stickyTrading');
            const mainTradingStatus = document.getElementById('mainTradingStatus');

            if (tradingEnabled) {
                tradingStatus.textContent = 'üü¢ Aktif';
                tradingStatus.style.color = '#00D4AA';
                tradingToggle.className = 'btn danger';
                tradingButtonText.textContent = 'üî¥ Trading Sistemini Durdur';
                stickyTrading.className = 'quick-status status-trading';
                stickyTrading.innerHTML = 'üü¢ Trading Aktif';
                mainTradingStatus.textContent = 'üü¢ Aktif';
                mainTradingStatus.style.color = '#00D4AA';
            } else {
                tradingStatus.textContent = '‚è∏Ô∏è Kapalƒ±';
                tradingStatus.style.color = '#FFC107';
                tradingToggle.className = 'btn success';
                tradingButtonText.textContent = 'üü¢ Trading Sistemini Ba≈ülat';
                stickyTrading.className = 'quick-status status-trading';
                stickyTrading.innerHTML = '‚è∏Ô∏è Trading Kapalƒ±';
                mainTradingStatus.textContent = '‚è∏Ô∏è Kapalƒ±';
                mainTradingStatus.style.color = '#FFC107';
            }
        }


        // === AI ANALƒ∞Z Sƒ∞STEMƒ∞ ===
        
        /**
         * AI analizini tetikler - Her market verisi geldiƒüinde √ßalƒ±≈üƒ±r
         */
        function triggerAIAnalysis() {
            if (priceHistory.length < 20) return; // Yeterli veri yok
            
            // AI sistemlerini g√ºncelle
            updateAILearningData();
            
            // Her stratejiyi analiz et
            analyzeWhaleOrders();
            analyzeOrderImbalance();
            analyzeVolumeSpikes();
            analyzeSupportResistance();
            
            // Sinyal √ºretimini kontrol et
            checkForSignalGeneration();
        }

        /**
         * AI √∂ƒürenme verilerini g√ºnceller
         */
        function updateAILearningData() {
            aiLearningData.totalProcessed++;
            
            // √ñƒürenme ilerlemesini hesapla (logaritmik b√ºy√ºme)
            const progress = Math.min(95, Math.log10(aiLearningData.totalProcessed + 1) * 25);
            aiLearningData.learningProgress = progress;
            
            // Performans skorunu hesapla
            const totalTrades = Object.values(aiLearningData.strategies).reduce((sum, s) => sum + s.total, 0);
            const successfulTrades = Object.values(aiLearningData.strategies).reduce((sum, s) => sum + s.success, 0);
            
            if (totalTrades > 0) {
                aiLearningData.accuracy = (successfulTrades / totalTrades) * 100;
                aiLearningData.performanceScore = Math.min(100, aiLearningData.accuracy + (progress * 0.3));
            }
            
            // UI g√ºncelle
            updateAIDisplays();
        }

        /**
         * AI g√∂r√ºnt√ºlerini g√ºnceller
         */
        function updateAIDisplays() {
            safeUpdateElement('aiProcessedData', aiLearningData.totalProcessed.toLocaleString());
            safeUpdateElement('aiAccuracy', `${aiLearningData.accuracy.toFixed(1)}%`);
            safeUpdateElement('aiPerformance', `${Math.floor(aiLearningData.performanceScore)}/100`);
            safeUpdateElement('aiProgressPercent', `${Math.floor(aiLearningData.learningProgress)}%`);
            
            // Progress bar g√ºncelle
            const progressBar = document.getElementById('overallAIProgress');
            if (progressBar) {
                progressBar.style.width = `${aiLearningData.learningProgress}%`;
            }
            
            // AI durumunu g√ºncelle
            let status = 'Ba≈ülangƒ±√ß Modu';
            let details = 'Sistem hazƒ±rlanƒ±yor...';
            
            if (aiLearningData.learningProgress > 80) {
                status = 'Uzman Seviye';
                details = 'Y√ºksek performans modu aktif';
            } else if (aiLearningData.learningProgress > 50) {
                status = 'Geli≈ümi≈ü Seviye';
                details = 'Aktif √∂ƒürenme devam ediyor';
            } else if (aiLearningData.learningProgress > 20) {
                status = '√ñƒürenme Modu';
                details = 'Veri analizi yapƒ±lƒ±yor';
            }
            
            safeUpdateElement('aiLearningStatus', status);
            safeUpdateElement('aiStatusDetails', details);
        }

        /**
         * Whale (b√ºy√ºk) emirleri analiz eder
         */
        function analyzeWhaleOrders() {
            if (orderBookData.bids.length === 0 || orderBookData.asks.length === 0) return;
            
            // B√ºy√ºk emirleri tespit et (ortalama emir b√ºy√ºkl√ºƒü√ºn√ºn 5 katƒ±)
            const allOrders = [...orderBookData.bids, ...orderBookData.asks];
            const avgOrderSize = allOrders.reduce((sum, order) => sum + order[1], 0) / allOrders.length;
            const whaleThreshold = avgOrderSize * 5;
            
            const whaleOrders = allOrders.filter(order => order[1] > whaleThreshold);
            
            if (whaleOrders.length > 0) {
                debugLog(`üêã ${whaleOrders.length} whale emri tespit edildi`, 'ai');
                
                // Whale emirlerinin y√∂n√ºn√º analiz et
                const whaleBids = orderBookData.bids.filter(bid => bid[1] > whaleThreshold);
                const whaleAsks = orderBookData.asks.filter(ask => ask[1] > whaleThreshold);
                
                if (whaleBids.length > whaleAsks.length * 2) {
                    // G√º√ßl√º alƒ±≈ü whale aktivitesi
                    generateSignal('whale', 'LONG', 85, 'Whale alƒ±≈ü baskƒ±sƒ± tespit edildi');
                } else if (whaleAsks.length > whaleBids.length * 2) {
                    // G√º√ßl√º satƒ±≈ü whale aktivitesi
                    generateSignal('whale', 'SHORT', 85, 'Whale satƒ±≈ü baskƒ±sƒ± tespit edildi');
                }
            }
        }

        /**
         * Order book dengesizliƒüini analiz eder
         */
        function analyzeOrderImbalance() {
            if (orderBookData.bids.length === 0 || orderBookData.asks.length === 0) return;
            
            // ƒ∞lk 5 seviyedeki toplam hacmi hesapla
            const bidVolume = orderBookData.bids.slice(0, 5).reduce((sum, bid) => sum + bid[1], 0);
            const askVolume = orderBookData.asks.slice(0, 5).reduce((sum, ask) => sum + ask[1], 0);
            const totalVolume = bidVolume + askVolume;
            
            if (totalVolume === 0) return;
            
            const imbalanceRatio = bidVolume / askVolume;
            
            // G√º√ßl√º dengesizlik tespit et
            if (imbalanceRatio > 3) {
                generateSignal('imbalance', 'LONG', 75, `G√º√ßl√º alƒ±≈ü dengesizliƒüi (${imbalanceRatio.toFixed(2)}:1)`);
            } else if (imbalanceRatio < 0.33) {
                generateSignal('imbalance', 'SHORT', 75, `G√º√ßl√º satƒ±≈ü dengesizliƒüi (1:${(1/imbalanceRatio).toFixed(2)})`);
            }
        }

        /**
         * Volume spike'larƒ±nƒ± analiz eder
         */
        function analyzeVolumeSpikes() {
            if (volumeHistory.length < 10) return;
            
            const currentVolume = volumeHistory[volumeHistory.length - 1];
            const avgVolume = volumeHistory.slice(-10, -1).reduce((sum, vol) => sum + vol, 0) / 9;
            
            if (avgVolume === 0) return;
            
            const volumeRatio = currentVolume / avgVolume;
            
            // Volume spike tespit et
            if (volumeRatio > botSettings.volumeThreshold) {
                const confidence = Math.min(95, 60 + (volumeRatio - botSettings.volumeThreshold) * 10);
                
                // Fiyat y√∂n√ºn√º kontrol et
                if (priceHistory.length >= 2) {
                    const priceChange = priceHistory[priceHistory.length - 1] - priceHistory[priceHistory.length - 2];
                    const side = priceChange > 0 ? 'LONG' : 'SHORT';
                    
                    generateSignal('volume', side, confidence, `Volume spike: ${volumeRatio.toFixed(2)}x`);
                }
            }
        }

        /**
         * Destek ve diren√ß seviyelerini analiz eder
         */
        function analyzeSupportResistance() {
            if (priceHistory.length < 50) return;
            
            const recentPrices = priceHistory.slice(-50);
            const currentPrice = recentPrices[recentPrices.length - 1];
            
            // Basit destek/diren√ß tespiti
            const highs = [];
            const lows = [];
            
            for (let i = 2; i < recentPrices.length - 2; i++) {
                const price = recentPrices[i];
                const prev2 = recentPrices[i - 2];
                const prev1 = recentPrices[i - 1];
                const next1 = recentPrices[i + 1];
                const next2 = recentPrices[i + 2];
                
                // Yerel maksimum
                if (price > prev2 && price > prev1 && price > next1 && price > next2) {
                    highs.push(price);
                }
                
                // Yerel minimum
                if (price < prev2 && price < prev1 && price < next1 && price < next2) {
                    lows.push(price);
                }
            }
            
            // En yakƒ±n destek ve diren√ß seviyelerini bul
            const resistance = highs.filter(h => h > currentPrice).sort((a, b) => a - b)[0];
            const support = lows.filter(l => l < currentPrice).sort((a, b) => b - a)[0];
            
            // Destek/diren√ß yakƒ±nlƒ±ƒüƒ±nƒ± kontrol et
            if (support && Math.abs(currentPrice - support) / currentPrice < 0.005) {
                generateSignal('sr', 'LONG', 70, `Destek seviyesi yakƒ±nƒ±nda: ${formatPrice(support)}`);
            } else if (resistance && Math.abs(resistance - currentPrice) / currentPrice < 0.005) {
                generateSignal('sr', 'SHORT', 70, `Diren√ß seviyesi yakƒ±nƒ±nda: ${formatPrice(resistance)}`);
            }
        }

        /**
         * Sinyal √ºretir ve deƒüerlendirir
         */
        function generateSignal(strategy, side, confidence, reason) {
            // Minimum g√ºven seviyesini kontrol et
            if (confidence < botSettings.minConfidence) {
                return;
            }
            
            // Cooldown kontrol√º
            const now = Date.now();
            if (now - lastSignalTime < botSettings.signalCooldown) {
                return;
            }
            
            // Sinyal objesi olu≈ütur
            const signal = {
                id: generateSignalId(),
                strategy: strategy,
                side: side,
                symbol: currentSymbol,
                entryPrice: lastPrice,
                takeProfit: calculateTakeProfit(lastPrice, side),
                stopLoss: calculateStopLoss(lastPrice, side),
                confidence: confidence,
                reason: reason,
                timestamp: now,
                status: 'PENDING'
            };
            
            debugLog(`üéØ Sinyal √ºretildi: ${strategy} ${side} (${confidence}%) - ${reason}`, 'ai');
            
            // Sinyal ge√ßmi≈üine ekle
            signalHistory.unshift(signal);
            if (signalHistory.length > 100) signalHistory.pop();
            
            // UI g√ºncelle
            updateActiveSignalDisplay(signal);
            updateSignalHistoryDisplay();
            
            // Otomatik trading aktifse sinyali i≈üle
            if (tradingEnabled) {
                processAISignal(signal);
            } else {
                showToast(`üéØ Yeni sinyal: ${side} ${currentSymbol} (${confidence}%)`, 'info');
                playSignalNotification();
            }
            
            lastSignalTime = now;
        }

        /**
         * Take Profit seviyesini hesaplar
         */
        function calculateTakeProfit(entryPrice, side) {
            const tpPercent = botSettings.takeProfitPercent / 100;
            if (side === 'LONG') {
                return entryPrice * (1 + tpPercent);
            } else {
                return entryPrice * (1 - tpPercent);
            }
        }

        /**
         * Stop Loss seviyesini hesaplar
         */
        function calculateStopLoss(entryPrice, side) {
            const slPercent = botSettings.stopLossPercent / 100;
            if (side === 'LONG') {
                return entryPrice * (1 - slPercent);
            } else {
                return entryPrice * (1 + slPercent);
            }
        }

        /**
         * Benzersiz sinyal ID'si olu≈üturur
         */
        function generateSignalId() {
            return `SIG_${Date.now()}_${Math.random().toString(36).substr(2, 6)}`;
        }

        /**
         * Sinyal √ºretimini kontrol eder
         */
        function checkForSignalGeneration() {
            // √áoklu strateji kombinasyonu kontrol√º
            const recentSignals = signalHistory.filter(s => Date.now() - s.timestamp < 300000); // Son 5 dakika
            
            if (recentSignals.length >= 2) {
                const strategies = [...new Set(recentSignals.map(s => s.strategy))];
                const sides = [...new Set(recentSignals.map(s => s.side))];
                
                // Aynƒ± y√∂nde birden fazla strateji sinyali varsa g√º√ßl√º sinyal
                if (strategies.length >= 2 && sides.length === 1) {
                    const avgConfidence = recentSignals.reduce((sum, s) => sum + s.confidence, 0) / recentSignals.length;
                    const combinedConfidence = Math.min(95, avgConfidence + 10);
                    
                    generateSignal('combined', sides[0], combinedConfidence, `√áoklu strateji konfirmasyonu: ${strategies.join(', ')}`);
                }
            }
        }

        // === Sƒ∞NYAL G√ñR√úNT√úLEME VE Y√ñNETƒ∞Mƒ∞ ===
        
        /**
         * Aktif sinyal g√∂r√ºnt√ºs√ºn√º g√ºnceller
         */
        function updateActiveSignalDisplay(signal = activeSignal) {
            const noSignalState = document.getElementById('noSignalState');
            const activeSignalState = document.getElementById('activeSignalState');
            
            if (!signal) {
                noSignalState.style.display = 'block';
                activeSignalState.style.display = 'none';
                
                // G√ºven seviyesi g√∂stergesini sƒ±fƒ±rla
                safeUpdateElement('confidencePercent', '0%');
                const confidenceBar = document.getElementById('confidenceBar');
                if (confidenceBar) confidenceBar.style.width = '0%';
                
                return;
            }
            
            noSignalState.style.display = 'none';
            activeSignalState.style.display = 'block';
            
            // Sinyal detaylarƒ±nƒ± g√ºncelle
            safeUpdateElement('signalEntryPrice', formatPrice(signal.entryPrice));
            safeUpdateElement('signalStrategy', signal.strategy.toUpperCase());
            safeUpdateElement('signalTakeProfit', formatPrice(signal.takeProfit));
            safeUpdateElement('signalStopLoss', formatPrice(signal.stopLoss));
            safeUpdateElement('signalDuration', formatTime(Math.floor((Date.now() - signal.timestamp) / 1000)));
            safeUpdateElement('signalTimestamp', new Date(signal.timestamp).toLocaleTimeString());
            
            // G√ºven seviyesi g√∂stergesi
            safeUpdateElement('confidencePercent', `${signal.confidence}%`);
            const confidenceBar = document.getElementById('confidenceBar');
            if (confidenceBar) {
                confidenceBar.style.width = `${signal.confidence}%`;
            }
            
            // Sinyal kartƒ±nƒ± g√ºncelle
            const sideColor = signal.side === 'LONG' ? '#00D4AA' : '#F84960';
            const sideIcon = signal.side === 'LONG' ? 'üìà' : 'üìâ';
            
            activeSignalState.innerHTML = `
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                    <div>
                        <div style="font-size: 1.3rem; font-weight: 700; color: ${sideColor}; display: flex; align-items: center; gap: 8px;">
                            ${sideIcon} ${signal.side} ${signal.symbol}
                        </div>
                        <div style="font-size: 0.85rem; color: #888; margin-top: 4px;">
                            ${signal.reason}
                        </div>
                    </div>
                    <div style="text-align: right;">
                        <div style="font-size: 1.1rem; font-weight: 700; color: #4ECDC4;">
                            ${signal.confidence}%
                        </div>
                        <div style="font-size: 0.75rem; color: #888;">
                            G√ºven
                        </div>
                    </div>
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 8px; margin-bottom: 15px; font-size: 0.8rem;">
                    <div style="text-align: center; padding: 8px; background: rgba(78,205,196,0.1); border-radius: 6px;">
                        <div style="color: #888; margin-bottom: 2px;">Entry</div>
                        <div style="color: #4ECDC4; font-weight: 600;">${formatPrice(signal.entryPrice)}</div>
                    </div>
                    <div style="text-align: center; padding: 8px; background: rgba(0,212,170,0.1); border-radius: 6px;">
                        <div style="color: #888; margin-bottom: 2px;">TP</div>
                        <div style="color: #00D4AA; font-weight: 600;">${formatPrice(signal.takeProfit)}</div>
                    </div>
                    <div style="text-align: center; padding: 8px; background: rgba(248,73,96,0.1); border-radius: 6px;">
                        <div style="color: #888; margin-bottom: 2px;">SL</div>
                        <div style="color: #F84960; font-weight: 600;">${formatPrice(signal.stopLoss)}</div>
                    </div>
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                    <button class="btn success" onclick="acceptSignal()" style="padding: 10px; font-size: 0.85rem;">
                        ‚úÖ Kabul Et
                    </button>
                    <button class="btn danger" onclick="rejectSignal()" style="padding: 10px; font-size: 0.85rem;">
                        ‚ùå Reddet
                    </button>
                </div>
            `;
            
            // Sinyal kabul/reddet butonlarƒ±nƒ± aktif et
            const acceptBtn = document.getElementById('acceptSignalBtn');
            const rejectBtn = document.getElementById('rejectSignalBtn');
            if (acceptBtn) acceptBtn.disabled = false;
            if (rejectBtn) rejectBtn.disabled = false;
        }

        /**
         * Sinyali kabul eder
         */
        function acceptSignal() {
            if (!activeSignal) return;
            
            debugLog(`‚úÖ Sinyal kabul edildi: ${activeSignal.side} ${activeSignal.symbol}`, 'trade');
            
            if (tradingEnabled && isTradingConnected) {
                processAISignal(activeSignal);
            } else {
                showToast('‚ö†Ô∏è Trading kapalƒ± veya baƒülantƒ± yok', 'warning');
            }
            
            activeSignal.status = 'ACCEPTED';
            showToast('‚úÖ Sinyal kabul edildi', 'success');
        }

        /**
         * Sinyali reddeder
         */
        function rejectSignal() {
            if (!activeSignal) return;
            
            debugLog(`‚ùå Sinyal reddedildi: ${activeSignal.side} ${activeSignal.symbol}`, 'trade');
            
            activeSignal.status = 'REJECTED';
            activeSignal = null;
            updateActiveSignalDisplay();
            showToast('‚ùå Sinyal reddedildi', 'warning');
        }

        /**
         * Test sinyali olu≈üturur
         */
        function generateTestSignal() {
            if (!currentSymbol || lastPrice === 0) {
                showToast('‚ùå √ñnce bir coin baƒülantƒ±sƒ± kurun', 'error');
                return;
            }
            
            const testStrategies = ['whale', 'volume', 'imbalance', 'sr'];
            const testSides = ['LONG', 'SHORT'];
            
            const strategy = testStrategies[Math.floor(Math.random() * testStrategies.length)];
            const side = testSides[Math.floor(Math.random() * testSides.length)];
            const confidence = Math.floor(Math.random() * 30) + 65; // 65-95 arasƒ±
            
            generateSignal(strategy, side, confidence, 'Test sinyali - Manuel olu≈üturuldu');
            showToast('üß™ Test sinyali olu≈üturuldu', 'info');
        }


        // === BOT AYARLARI VE KONFƒ∞G√úRASYON ===
        
        /**
         * Bot ayarƒ±nƒ± g√ºnceller
         */
        function updateBotSetting(setting, value) {
            botSettings[setting] = value;
            debugLog(`‚öôÔ∏è Bot ayarƒ± g√ºncellendi: ${setting} = ${value}`, 'info');
            
            // Adaptif e≈üikler aktifse otomatik optimizasyon yap
            if (botSettings.adaptiveThresholds && setting !== 'adaptiveThresholds') {
                optimizeSettings();
            }
        }

        /**
         * Slider g√∂r√ºnt√ºs√ºn√º g√ºnceller
         */
        function updateSliderDisplay(elementId, value) {
            safeUpdateElement(elementId, value);
        }

        /**
         * Pozisyon b√ºy√ºkl√ºƒü√ºn√º g√ºnceller
         */
        function updatePositionSize(value) {
            positionSize = parseFloat(value);
            debugLog(`üí∞ Pozisyon b√ºy√ºkl√ºƒü√º g√ºncellendi: ${positionSize} USDT`, 'info');
        }

        /**
         * Ayarlarƒ± kaydeder
         */
        function saveSettings() {
            try {
                localStorage.setItem('3c3_bot_settings', JSON.stringify(botSettings));
                localStorage.setItem('3c3_position_size', positionSize.toString());
                showToast('üíæ Ayarlar kaydedildi', 'success');
                debugLog('üíæ Bot ayarlarƒ± localStorage\'a kaydedildi', 'info');
            } catch (error) {
                showToast('‚ùå Ayarlar kaydedilemedi', 'error');
                debugLog(`‚ùå Ayar kaydetme hatasƒ±: ${error.message}`, 'error');
            }
        }

        /**
         * Ayarlarƒ± y√ºkler
         */
        function loadSettings() {
            try {
                const savedSettings = localStorage.getItem('3c3_bot_settings');
                const savedPositionSize = localStorage.getItem('3c3_position_size');
                
                if (savedSettings) {
                    const settings = JSON.parse(savedSettings);
                    Object.assign(botSettings, settings);
                    updateSettingsUI();
                    debugLog('üìÇ Bot ayarlarƒ± y√ºklendi', 'info');
                }
                
                if (savedPositionSize) {
                    positionSize = parseFloat(savedPositionSize);
                    safeUpdateElement('positionSizeInput', positionSize);
                }
            } catch (error) {
                debugLog(`‚ùå Ayar y√ºkleme hatasƒ±: ${error.message}`, 'error');
            }
        }

        /**
         * Ayarlarƒ± varsayƒ±lana d√∂nd√ºr√ºr
         */
        function resetSettings() {
            botSettings = {
                volumeThreshold: 2.0,
                takeProfitPercent: 0.8,
                stopLossPercent: 0.5,
                minConfidence: 70,
                signalCooldown: 30000,
                learningSpeed: 'medium',
                autoOptimization: true,
                adaptiveThresholds: true,
                riskManagement: true
            };
            positionSize = 50;
            updateSettingsUI();
            showToast('üîÑ Ayarlar varsayƒ±lana d√∂nd√ºr√ºld√º', 'warning');
            debugLog('üîÑ Bot ayarlarƒ± varsayƒ±lana d√∂nd√ºr√ºld√º', 'info');
        }

        /**
         * Ayar UI'sƒ±nƒ± g√ºnceller
         */
        function updateSettingsUI() {
            safeUpdateElement('volumeThreshold', botSettings.volumeThreshold);
            safeUpdateElement('takeProfitPercent', botSettings.takeProfitPercent);
            safeUpdateElement('stopLossPercent', botSettings.stopLossPercent);
            safeUpdateElement('minConfidence', botSettings.minConfidence);
            safeUpdateElement('positionSizeInput', positionSize);
            
            // Slider deƒüerlerini g√ºncelle
            updateSliderDisplay('volumeThresholdValue', botSettings.volumeThreshold + 'x');
            updateSliderDisplay('takeProfitValue', botSettings.takeProfitPercent + '%');
            updateSliderDisplay('stopLossValue', botSettings.stopLossPercent + '%');
            updateSliderDisplay('minConfidenceValue', botSettings.minConfidence + '%');
            
            // Checkbox'larƒ± g√ºncelle
            const autoOptEl = document.getElementById('autoOptimization');
            const adaptiveEl = document.getElementById('adaptiveThresholds');
            const riskEl = document.getElementById('riskManagement');
            const learningEl = document.getElementById('learningSpeed');
            
            if (autoOptEl) autoOptEl.checked = botSettings.autoOptimization;
            if (adaptiveEl) adaptiveEl.checked = botSettings.adaptiveThresholds;
            if (riskEl) riskEl.checked = botSettings.riskManagement;
            if (learningEl) learningEl.value = botSettings.learningSpeed;
        }

        /**
         * Ayarlarƒ± export eder
         */
        function exportSettings() {
            const exportData = {
                botSettings: botSettings,
                positionSize: positionSize,
                exportDate: new Date().toISOString(),
                version: '3C3_v4.2.1'
            };
            
            const dataStr = JSON.stringify(exportData, null, 2);
            const dataBlob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(dataBlob);
            
            const link = document.createElement('a');
            link.href = url;
            link.download = `3C3_settings_${new Date().toISOString().split('T')[0]}.json`;
            link.click();
            
            URL.revokeObjectURL(url);
            showToast('üì§ Ayarlar export edildi', 'success');
        }

        /**
         * Ayarlarƒ± import eder
         */
        function importSettings() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.json';
            
            input.onchange = (event) => {
                const file = event.target.files[0];
                if (!file) return;
                
                const reader = new FileReader();
                reader.onload = (e) => {
                    try {
                        const importData = JSON.parse(e.target.result);
                        
                        if (importData.botSettings) {
                            Object.assign(botSettings, importData.botSettings);
                        }
                        if (importData.positionSize) {
                            positionSize = importData.positionSize;
                        }
                        
                        updateSettingsUI();
                        showToast('üì• Ayarlar import edildi', 'success');
                        debugLog('üì• Bot ayarlarƒ± import edildi', 'info');
                    } catch (error) {
                        showToast('‚ùå Import hatasƒ±', 'error');
                        debugLog(`‚ùå Import hatasƒ±: ${error.message}`, 'error');
                    }
                };
                reader.readAsText(file);
            };
            
            input.click();
        }

        /**
         * AI'yi sƒ±fƒ±rlar
         */
        function resetAI() {
            aiLearningData = {
                totalProcessed: 0,
                learningProgress: 0,
                performanceScore: 0,
                accuracy: 0,
                strategies: {
                    whale: { total: 0, success: 0, profits: [], times: [], reliability: 0 },
                    imbalance: { total: 0, success: 0, profits: [], times: [], reliability: 0 },
                    volume: { total: 0, success: 0, profits: [], times: [], reliability: 0 },
                    sr: { total: 0, success: 0, profits: [], times: [], reliability: 0 }
                },
                lastModelUpdate: null
            };
            
            signalHistory = [];
            updateAIDisplays();
            updateSignalHistoryDisplay();
            showToast('üß† AI sistemi sƒ±fƒ±rlandƒ±', 'warning');
            debugLog('üß† AI √∂ƒürenme sistemi sƒ±fƒ±rlandƒ±', 'info');
        }

        /**
         * Ayarlarƒ± otomatik optimize eder
         */
        function optimizeSettings() {
            if (!botSettings.autoOptimization) return;
            
            const totalTrades = tradingStats.totalTrades;
            if (totalTrades < 10) return; // Yeterli veri yok
            
            const winRate = tradingStats.winTrades / totalTrades;
            
            // Kazanma oranƒ±na g√∂re ayarlarƒ± optimize et
            if (winRate < 0.6) {
                // D√º≈ü√ºk kazanma oranƒ± - daha konservatif ayarlar
                botSettings.minConfidence = Math.min(90, botSettings.minConfidence + 5);
                botSettings.volumeThreshold = Math.min(5.0, botSettings.volumeThreshold + 0.2);
            } else if (winRate > 0.8) {
                // Y√ºksek kazanma oranƒ± - daha agresif ayarlar
                botSettings.minConfidence = Math.max(50, botSettings.minConfidence - 3);
                botSettings.volumeThreshold = Math.max(1.2, botSettings.volumeThreshold - 0.1);
            }
            
            updateSettingsUI();
            debugLog(`üîß Ayarlar optimize edildi (Win Rate: ${(winRate * 100).toFixed(1)}%)`, 'ai');
        }

        // === Sƒ∞STEM FONKSƒ∞YONLARI ===
        
        /**
         * Trading sistemini toggle eder
         */
        function toggleTrading() {
            tradingEnabled = !tradingEnabled;
            updateTradingStatus();
            
            if (tradingEnabled) {
                debugLog('üü¢ Trading sistemi aktif edildi', 'trade');
                showToast('üü¢ Trading sistemi ba≈ülatƒ±ldƒ±', 'success');
            } else {
                debugLog('‚è∏Ô∏è Trading sistemi durduruldu', 'trade');
                showToast('‚è∏Ô∏è Trading sistemi durduruldu', 'warning');
            }
        }

        /**
         * API baƒülantƒ±sƒ±nƒ± test eder
         */
        function testApiConnection() {
            debugLog('üß™ API baƒülantƒ±sƒ± test ediliyor...', 'api');
            showLoading('API baƒülantƒ±sƒ± test ediliyor...');
            
            // Sim√ºlasyon
            setTimeout(() => {
                hideLoading();
                const success = Math.random() > 0.2; // %80 ba≈üarƒ± oranƒ±
                
                if (success) {
                    showToast('‚úÖ API baƒülantƒ±sƒ± ba≈üarƒ±lƒ±', 'success');
                    debugLog('‚úÖ API baƒülantƒ± testi ba≈üarƒ±lƒ±', 'success');
                } else {
                    showToast('‚ùå API baƒülantƒ± hatasƒ±', 'error');
                    debugLog('‚ùå API baƒülantƒ± testi ba≈üarƒ±sƒ±z', 'error');
                }
            }, 2000);
        }

        /**
         * Farklƒ± proxy'ler ile test yapar
         */
        function testWithDifferentProxies() {
            debugLog('üîÑ Proxy sunucularƒ± test ediliyor...', 'api');
            showLoading('Proxy sunucularƒ± test ediliyor...');
            
            const proxies = ['US-East', 'EU-West', 'Asia-Pacific', 'Direct'];
            let currentProxy = 0;
            
            const testNextProxy = () => {
                if (currentProxy >= proxies.length) {
                    hideLoading();
                    showToast('‚úÖ En iyi proxy se√ßildi', 'success');
                    debugLog('‚úÖ Proxy test tamamlandƒ±', 'success');
                    return;
                }
                
                safeUpdateElement('loadingMessage', `${proxies[currentProxy]} proxy test ediliyor...`);
                debugLog(`üîÑ ${proxies[currentProxy]} proxy test ediliyor...`, 'api');
                
                setTimeout(() => {
                    currentProxy++;
                    testNextProxy();
                }, 1000);
            };
            
            testNextProxy();
        }

        /**
         * MEXC sunucularƒ±na ping atar
         */
        function pingMexcServers() {
            debugLog('üì° MEXC sunucularƒ±na ping atƒ±lƒ±yor...', 'api');
            showLoading('MEXC sunucularƒ±na ping atƒ±lƒ±yor...');
            
            const servers = ['Singapore', 'Tokyo', 'Frankfurt', 'New York'];
            const pings = [];
            
            servers.forEach((server, index) => {
                setTimeout(() => {
                    const ping = Math.floor(Math.random() * 100) + 20; // 20-120ms arasƒ±
                    pings.push({ server, ping });
                    debugLog(`üì° ${server}: ${ping}ms`, 'api');
                    
                    if (pings.length === servers.length) {
                        hideLoading();
                        const bestServer = pings.sort((a, b) => a.ping - b.ping)[0];
                        showToast(`üì° En iyi sunucu: ${bestServer.server} (${bestServer.ping}ms)`, 'success');
                        safeUpdateElement('networkPing', `${bestServer.ping}ms`);
                        safeUpdateElement('networkStatus', `${bestServer.server} sunucusu`);
                    }
                }, index * 500);
            });
        }

        /**
         * Sistem saƒülƒ±ƒüƒ±nƒ± kontrol eder
         */
        function checkSystemHealth() {
            debugLog('üíö Sistem saƒülƒ±ƒüƒ± kontrol ediliyor...', 'info');
            showLoading('Sistem saƒülƒ±ƒüƒ± kontrol ediliyor...');
            
            setTimeout(() => {
                hideLoading();
                
                const health = {
                    websocket: isConnected ? '‚úÖ Baƒülƒ±' : '‚ùå Baƒülantƒ±sƒ±z',
                    trading: isTradingConnected ? '‚úÖ Aktif' : '‚ùå Kapalƒ±',
                    ai: aiLearningData.learningProgress > 20 ? '‚úÖ √áalƒ±≈üƒ±yor' : '‚ö†Ô∏è √ñƒüreniyor',
                    memory: '‚úÖ Normal',
                    performance: '‚úÖ ƒ∞yi'
                };
                
                let healthMessage = 'Sistem Saƒülƒ±ƒüƒ±:\n';
                Object.entries(health).forEach(([key, value]) => {
                    healthMessage += `${key}: ${value}\n`;
                });
                
                showToast('üíö Sistem saƒülƒ±ƒüƒ± kontrol edildi', 'success');
                debugLog(healthMessage, 'info');
            }, 1500);
        }

        /**
         * Debug log'unu export eder
         */
        function exportDebugLog() {
            const consoleEl = document.getElementById('mobileDebugConsole');
            if (!consoleEl) return;
            
            const logs = Array.from(consoleEl.children).map(child => child.textContent).join('\n');
            const logBlob = new Blob([logs], { type: 'text/plain' });
            const url = URL.createObjectURL(logBlob);
            
            const link = document.createElement('a');
            link.href = url;
            link.download = `3C3_debug_log_${new Date().toISOString().split('T')[0]}.txt`;
            link.click();
            
            URL.revokeObjectURL(url);
            showToast('üì§ Debug log export edildi', 'success');
        }

        /**
         * Sinyal ge√ßmi≈üini g√ºnceller
         */
        function updateSignalHistoryDisplay() {
            const container = document.getElementById('signalListContainer');
            const noSignalsMessage = document.getElementById('noSignalsMessage');
            
            if (!container) return;
            
            if (signalHistory.length === 0) {
                noSignalsMessage.style.display = 'block';
                container.innerHTML = '';
                return;
            }
            
            noSignalsMessage.style.display = 'none';
            
            container.innerHTML = signalHistory.slice(0, 20).map(signal => {
                const statusColor = {
                    'PENDING': '#FFC107',
                    'ACCEPTED': '#00D4AA',
                    'REJECTED': '#F84960',
                    'FILLED': '#00D4AA',
                    'CANCELLED': '#888'
                }[signal.status] || '#888';
                
                const sideColor = signal.side === 'LONG' ? '#00D4AA' : '#F84960';
                const timeAgo = formatTime(Math.floor((Date.now() - signal.timestamp) / 1000));
                
                return `
                    <div style="
                        background: rgba(255,255,255,0.03); 
                        border-radius: 8px; 
                        padding: 12px; 
                        margin-bottom: 8px; 
                        border-left: 3px solid ${sideColor};
                    ">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                            <div style="font-weight: 600; color: ${sideColor};">
                                ${signal.side} ${signal.symbol}
                            </div>
                            <div style="font-size: 0.75rem; color: ${statusColor}; font-weight: 600;">
                                ${signal.status}
                            </div>
                        </div>
                        <div style="font-size: 0.8rem; color: #888; margin-bottom: 6px;">
                            ${signal.reason}
                        </div>
                        <div style="display: flex; justify-content: space-between; font-size: 0.75rem;">
                            <span style="color: #888;">Entry: ${formatPrice(signal.entryPrice)}</span>
                            <span style="color: #4ECDC4;">G√ºven: ${signal.confidence}%</span>
                            <span style="color: #666;">${timeAgo} √∂nce</span>
                        </div>
                    </div>
                `;
            }).join('');
        }

        /**
         * Sinyal ge√ßmi≈üini filtreler
         */
        function filterSignals(filter) {
            // Filter butonlarƒ±nƒ±n g√∂r√ºn√ºm√ºn√º g√ºncelle
            document.querySelectorAll('[onclick^="filterSignals"]').forEach(btn => {
                btn.style.background = '';
            });
            document.getElementById(`filter${filter.charAt(0).toUpperCase() + filter.slice(1)}Btn`).style.background = 'rgba(78,205,196,0.8)';
            
            let filteredSignals = signalHistory;
            
            switch (filter) {
                case 'successful':
                    filteredSignals = signalHistory.filter(s => s.status === 'FILLED' || s.status === 'ACCEPTED');
                    break;
                case 'failed':
                    filteredSignals = signalHistory.filter(s => s.status === 'REJECTED' || s.status === 'CANCELLED');
                    break;
                case 'pending':
                    filteredSignals = signalHistory.filter(s => s.status === 'PENDING');
                    break;
                default:
                    filteredSignals = signalHistory;
            }
            
            // Ge√ßici olarak filtrelenmi≈ü listeyi g√∂ster
            const originalHistory = signalHistory;
            signalHistory = filteredSignals;
            updateSignalHistoryDisplay();
            signalHistory = originalHistory;
        }

        // === EVENT LISTENERS VE BA≈ûLATMA ===
        
        /**
         * Sayfa y√ºklendiƒüinde √ßalƒ±≈üƒ±r
         */
        document.addEventListener('DOMContentLoaded', function() {
            debugLog('üöÄ 3C3 Trading Bot ba≈ülatƒ±lƒ±yor...', 'info');
            
            // Ayarlarƒ± y√ºkle
            loadSettings();
            
            // UI'yi ba≈ülat
            updateConnectionUI('disconnected');
            updateTradingConnectionUI('disconnected');
            updateTradingStatus();
            updateAIDisplays();
            
            // Sistem timer'larƒ±nƒ± ba≈ülat
            setInterval(updateSystemUptime, 1000);
            setInterval(updateSystemMetrics, 5000);
            
            // Tema toggle event listener
            const themeToggle = document.getElementById('themeToggle');
            if (themeToggle) {
                themeToggle.addEventListener('click', toggleTheme);
            }
            
            debugLog('‚úÖ 3C3 Trading Bot ba≈ülatƒ±ldƒ±', 'success');
            showToast('üöÄ 3C3 Trading Bot hazƒ±r', 'success');
        });

        /**
         * Sistem metriklerini g√ºnceller (sim√ºlasyon)
         */
        function updateSystemMetrics() {
            // CPU kullanƒ±mƒ± sim√ºlasyonu
            const cpuUsage = Math.floor(Math.random() * 30) + 10; // 10-40% arasƒ±
            safeUpdateElement('cpuUsage', `${cpuUsage}%`);
            const cpuBar = document.getElementById('cpuBar');
            if (cpuBar) cpuBar.style.width = `${cpuUsage}%`;
            
            // Memory kullanƒ±mƒ± sim√ºlasyonu
            const memoryUsage = Math.floor(Math.random() * 40) + 20; // 20-60% arasƒ±
            safeUpdateElement('memoryUsage', `${memoryUsage}%`);
            const memoryBar = document.getElementById('memoryBar');
            if (memoryBar) memoryBar.style.width = `${memoryUsage}%`;
        }

        /**
         * Tema deƒüi≈ütirir
         */
        function toggleTheme() {
            const body = document.body;
            const isLight = body.classList.contains('light-theme');
            
            if (isLight) {
                body.classList.remove('light-theme');
                localStorage.setItem('3c3_theme', 'dark');
                showToast('üåô Karanlƒ±k tema aktif', 'info');
            } else {
                body.classList.add('light-theme');
                localStorage.setItem('3c3_theme', 'light');
                showToast('‚òÄÔ∏è Aydƒ±nlƒ±k tema aktif', 'info');
            }
        }

        /**
         * Kaydedilmi≈ü temayƒ± y√ºkler
         */
        function loadTheme() {
            const savedTheme = localStorage.getItem('3c3_theme');
            if (savedTheme === 'light') {
                document.body.classList.add('light-theme');
            }
        }

        // Tema y√ºkleme
        loadTheme();

        // Enter tu≈üu ile baƒülantƒ± kurma
        document.addEventListener('keypress', function(event) {
            if (event.key === 'Enter') {
                const activeElement = document.activeElement;
                if (activeElement && activeElement.id === 'manualSymbol') {
                    connect();
                }
            }
        });

        // Sayfa kapatƒ±lƒ±rken baƒülantƒ±larƒ± temizle
        window.addEventListener('beforeunload', function() {
            if (ws) ws.close();
            if (tradingWs) tradingWs.close();
        });

        debugLog('üìã T√ºm sistem fonksiyonlarƒ± y√ºklendi', 'info');
    </script>
</body>
</html>

