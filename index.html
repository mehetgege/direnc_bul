<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ğŸ” AkÄ±llÄ± PDF Model TarayÄ±cÄ±</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.10.377/pdf.min.js"></script>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    
    :root {
      --primary: #6366f1;
      --primary-dark: #4f46e5;
      --secondary: #ec4899;
      --success: #10b981;
      --warning: #f59e0b;
      --error: #ef4444;
      --info: #3b82f6;
      --bg-light: #f8fafc;
      --bg-dark: #0f172a;
      --text-light: #1e293b;
      --text-dark: #f1f5f9;
      --card-light: #ffffff;
      --card-dark: #1e293b;
      --border-light: #e2e8f0;
      --border-dark: #334155;
    }

    [data-theme="dark"] {
      --bg: var(--bg-dark);
      --text: var(--text-dark);
      --card: var(--card-dark);
      --border: var(--border-dark);
    }

    [data-theme="light"] {
      --bg: var(--bg-light);
      --text: var(--text-light);
      --card: var(--card-light);
      --border: var(--border-light);
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: var(--bg);
      color: var(--text);
      transition: all 0.3s ease;
      min-height: 100vh;
      position: relative;
    }

    /* Animated background */
    body::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(45deg, #6366f1, #ec4899, #10b981, #f59e0b);
      background-size: 400% 400%;
      animation: gradientBG 15s ease infinite;
      opacity: 0.1;
      z-index: -1;
    }

    @keyframes gradientBG {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    .container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 20px;
      position: relative;
      z-index: 1;
    }

    .header {
      text-align: center;
      margin-bottom: 30px;
      position: relative;
    }

    .title {
      font-size: clamp(24px, 5vw, 42px);
      font-weight: 800;
      background: linear-gradient(45deg, var(--primary), var(--secondary));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 10px;
      animation: titlePulse 2s ease-in-out infinite alternate;
    }

    @keyframes titlePulse {
      from { filter: brightness(1) saturate(1); }
      to { filter: brightness(1.2) saturate(1.3); }
    }

    .subtitle {
      color: var(--text);
      opacity: 0.7;
      font-size: 16px;
      margin-bottom: 20px;
    }

    .theme-toggle {
      position: fixed;
      top: 20px;
      right: 20px;
      background: var(--card);
      border: 2px solid var(--border);
      border-radius: 50px;
      padding: 8px 15px;
      cursor: pointer;
      font-size: 20px;
      transition: all 0.3s ease;
      z-index: 1000;
      animation: float 3s ease-in-out infinite;
    }

    .theme-toggle:hover {
      transform: scale(1.1) rotate(15deg);
      box-shadow: 0 5px 20px rgba(99, 102, 241, 0.3);
    }

    @keyframes float {
      0%, 100% { transform: translateY(0px); }
      50% { transform: translateY(-5px); }
    }

    .control-panel {
      background: var(--card);
      border-radius: 20px;
      padding: 30px;
      margin-bottom: 30px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.1);
      border: 1px solid var(--border);
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }

    .form-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin-bottom: 20px;
    }

    .form-group label {
      display: block;
      font-weight: 600;
      margin-bottom: 8px;
      color: var(--text);
      font-size: 14px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .input-wrapper input, .input-wrapper select {
      width: 100%;
      padding: 12px 15px;
      border: 2px solid var(--border);
      border-radius: 12px;
      background: var(--card);
      color: var(--text);
      font-size: 16px;
      transition: all 0.3s ease;
    }

    .input-wrapper input:focus, .input-wrapper select:focus {
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
      outline: none;
      transform: translateY(-2px);
    }

    .btn {
      padding: 12px 24px;
      border: none;
      border-radius: 12px;
      cursor: pointer;
      font-weight: 600;
      font-size: 16px;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
      min-width: 140px;
    }

    .btn-primary {
      background: linear-gradient(45deg, var(--primary), var(--primary-dark));
      color: white;
    }

    .btn-success {
      background: linear-gradient(45deg, var(--success), #059669);
      color: white;
    }

    .btn-warning {
      background: linear-gradient(45deg, var(--warning), #d97706);
      color: white;
    }

    .btn-error {
      background: linear-gradient(45deg, var(--error), #dc2626);
      color: white;
    }

    .btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 10px 25px rgba(0,0,0,0.2);
    }

    .btn:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      transform: none;
    }

    .action-buttons {
      display: flex;
      gap: 15px;
      flex-wrap: wrap;
      justify-content: center;
      margin-top: 20px;
    }

    /* Models Panel */
    .models-panel {
      background: var(--card);
      border-radius: 20px;
      padding: 25px;
      margin-bottom: 30px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.1);
      border: 1px solid var(--border);
    }

    .models-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      padding-bottom: 15px;
      border-bottom: 2px solid var(--border);
    }

    .models-title {
      font-size: 20px;
      font-weight: 700;
      color: var(--primary);
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .models-count {
      background: var(--primary);
      color: white;
      padding: 5px 12px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 600;
    }

    .models-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 15px;
    }

    .model-card {
      background: linear-gradient(145deg, var(--card), rgba(99, 102, 241, 0.05));
      border: 2px solid var(--border);
      border-radius: 15px;
      padding: 20px;
      transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      position: relative;
      overflow: hidden;
      cursor: pointer;
    }

    .model-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
      transition: left 0.5s;
    }

    .model-card:hover::before {
      left: 100%;
    }

    .model-card.scanning {
      border-color: var(--info);
      background: linear-gradient(145deg, var(--card), rgba(59, 130, 246, 0.1));
      animation: scanPulse 1.5s ease-in-out infinite;
    }

    .model-card.found {
      border-color: var(--success);
      background: linear-gradient(145deg, var(--card), rgba(16, 185, 129, 0.1));
      animation: foundBounce 0.6s ease;
    }

    .model-card.no-match {
      border-color: var(--warning);
      background: linear-gradient(145deg, var(--card), rgba(245, 158, 11, 0.1));
      opacity: 0.7;
    }

    .model-card.error {
      border-color: var(--error);
      background: linear-gradient(145deg, var(--card), rgba(239, 68, 68, 0.1));
      animation: errorShake 0.5s ease;
    }

    @keyframes scanPulse {
      0%, 100% { transform: scale(1); box-shadow: 0 5px 15px rgba(59, 130, 246, 0.3); }
      50% { transform: scale(1.02); box-shadow: 0 10px 25px rgba(59, 130, 246, 0.5); }
    }

    @keyframes foundBounce {
      0% { transform: scale(1); }
      25% { transform: scale(1.05); }
      50% { transform: scale(1.02); }
      75% { transform: scale(1.03); }
      100% { transform: scale(1); }
    }

    @keyframes errorShake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-5px); }
      75% { transform: translateX(5px); }
    }

    .model-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 15px;
    }

    .model-name {
      font-size: 18px;
      font-weight: 700;
      color: var(--text);
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .model-confidence {
      background: var(--success);
      color: white;
      padding: 3px 8px;
      border-radius: 12px;
      font-size: 10px;
      font-weight: 600;
    }

    .model-status {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 10px;
    }

    .status-icon {
      font-size: 16px;
      animation: spin 2s linear infinite;
    }

    .status-icon.found { animation: none; }
    .status-icon.error { animation: errorWiggle 0.5s ease; }

    @keyframes spin {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }

    @keyframes errorWiggle {
      0%, 100% { transform: rotate(0deg); }
      25% { transform: rotate(-10deg); }
      75% { transform: rotate(10deg); }
    }

    .status-text {
      font-size: 14px;
      font-weight: 600;
    }

    .model-matches {
      margin-top: 15px;
    }

    .matches-header {
      font-size: 12px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 8px;
      color: var(--success);
    }

    .matches-list {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
    }

    .match-tag {
      background: var(--success);
      color: white;
      padding: 4px 8px;
      border-radius: 12px;
      font-size: 11px;
      font-weight: 600;
      animation: matchAppear 0.3s ease;
    }

    @keyframes matchAppear {
      from { opacity: 0; transform: scale(0.8); }
      to { opacity: 1; transform: scale(1); }
    }

    .model-link {
      margin-top: 15px;
      padding: 8px 16px;
      background: var(--primary);
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 12px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      opacity: 0.5;
      pointer-events: none;
    }

    .model-link.active {
      opacity: 1;
      pointer-events: auto;
      animation: linkGlow 2s ease-in-out infinite alternate;
    }

    .model-link:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(99, 102, 241, 0.3);
    }

    @keyframes linkGlow {
      from { box-shadow: 0 0 5px rgba(99, 102, 241, 0.5); }
      to { box-shadow: 0 0 20px rgba(99, 102, 241, 0.8); }
    }

    /* Status Panel */
    .status-panel {
      position: fixed;
      bottom: 20px;
      left: 20px;
      background: var(--card);
      border: 2px solid var(--border);
      border-radius: 15px;
      padding: 15px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.1);
      max-width: 350px;
      z-index: 1000;
      transform: translateX(-400px);
      transition: transform 0.3s ease;
    }

    .status-panel.show {
      transform: translateX(0);
    }

    .status-header {
      display: flex;
      justify-content: between;
      align-items: center;
      margin-bottom: 10px;
    }

    .status-title {
      font-size: 14px;
      font-weight: 700;
      color: var(--primary);
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .status-close {
      background: none;
      border: none;
      font-size: 16px;
      cursor: pointer;
      color: var(--text);
      opacity: 0.6;
      transition: opacity 0.3s ease;
    }

    .status-close:hover {
      opacity: 1;
    }

    .status-content {
      font-size: 12px;
      line-height: 1.4;
    }

    .status-item {
      display: flex;
      justify-content: space-between;
      margin-bottom: 5px;
      padding: 5px 0;
    }

    .status-progress {
      width: 100%;
      height: 4px;
      background: var(--border);
      border-radius: 2px;
      overflow: hidden;
      margin-top: 10px;
    }

    .status-progress-fill {
      height: 100%;
      background: linear-gradient(45deg, var(--primary), var(--secondary));
      width: 0%;
      transition: width 0.3s ease;
      animation: progressShine 2s ease-in-out infinite;
    }

    @keyframes progressShine {
      0% { box-shadow: 0 0 5px rgba(99, 102, 241, 0.5); }
      50% { box-shadow: 0 0 10px rgba(99, 102, 241, 0.8); }
      100% { box-shadow: 0 0 5px rgba(99, 102, 241, 0.5); }
    }

    /* Connection Status */
    .connection-status {
      position: fixed;
      top: 80px;
      right: 20px;
      background: var(--card);
      border: 2px solid var(--border);
      border-radius: 50px;
      padding: 8px 15px;
      font-size: 12px;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 8px;
      z-index: 1000;
      transition: all 0.3s ease;
    }

    .connection-status.online {
      border-color: var(--success);
      color: var(--success);
    }

    .connection-status.offline {
      border-color: var(--error);
      color: var(--error);
    }

    .connection-status.loading {
      border-color: var(--warning);
      color: var(--warning);
    }

    .connection-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: currentColor;
      animation: pulse 2s ease-in-out infinite;
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }

    /* Loading Overlay */
    .loading-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.8);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 9999;
      backdrop-filter: blur(5px);
    }

    .loading-content {
      text-align: center;
      color: white;
    }

    .spinner {
      width: 60px;
      height: 60px;
      border: 4px solid rgba(255,255,255,0.3);
      border-top: 4px solid var(--primary);
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin: 0 auto 20px;
    }

    .toast {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: var(--success);
      color: white;
      padding: 15px 20px;
      border-radius: 10px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.2);
      transform: translateX(400px);
      transition: transform 0.3s ease;
      z-index: 1000;
    }

    .toast.show {
      transform: translateX(0);
    }

    @media (max-width: 768px) {
      .container {
        padding: 10px;
      }

      .form-grid {
        grid-template-columns: 1fr;
      }

      .models-grid {
        grid-template-columns: 1fr;
      }

      .action-buttons {
        flex-direction: column;
      }

      .btn {
        width: 100%;
      }

      .theme-toggle, .connection-status {
        position: relative;
        margin-bottom: 10px;
      }

      .status-panel {
        position: relative;
        transform: none;
        margin-bottom: 20px;
        max-width: none;
      }

      .status-panel.show {
        transform: none;
      }
    }
  </style>
</head>
<body data-theme="light">
  <div class="theme-toggle" onclick="toggleTheme()">
    ğŸŒ™
  </div>

  <div class="connection-status" id="connectionStatus">
    <div class="connection-dot"></div>
    <span id="connectionText">BaÄŸlantÄ± Kontrol Ediliyor...</span>
  </div>

  <div class="container">
    <div class="header">
      <h1 class="title">ğŸ¤– AkÄ±llÄ± PDF Model TarayÄ±cÄ±</h1>
      <p class="subtitle">âš¡ AI destekli model tanÄ±ma ve gerÃ§ek zamanlÄ± tarama</p>
    </div>

    <div class="control-panel">
      <div class="form-grid">
        <div class="form-group">
          <label>ğŸ“Š Min DeÄŸer (Î©)</label>
          <div class="input-wrapper">
            <input type="number" id="minVal" placeholder="330000" value="330000">
          </div>
        </div>

        <div class="form-group">
          <label>ğŸ“ˆ Max DeÄŸer (Î©)</label>
          <div class="input-wrapper">
            <input type="number" id="maxVal" placeholder="2000000" value="2000000">
          </div>
        </div>

        <div class="form-group">
          <label>ğŸ¯ Tarama Modu</label>
          <div class="input-wrapper">
            <select id="scanMode">
              <option value="sequential">SÄ±ralÄ± Tarama</option>
              <option value="parallel">Paralel Tarama</option>
              <option value="smart">AkÄ±llÄ± Tarama</option>
            </select>
          </div>
        </div>

        <div class="form-group">
          <label>âš™ï¸ Hassasiyet</label>
          <div class="input-wrapper">
            <select id="sensitivity">
              <option value="low">DÃ¼ÅŸÃ¼k (Â±10%)</option>
              <option value="medium" selected>Orta (Â±5%)</option>
              <option value="high">YÃ¼ksek (Â±1%)</option>
            </select>
          </div>
        </div>
      </div>

      <div class="action-buttons">
        <button class="btn btn-primary" id="scanBtn" onclick="startIntelligentScan()">
          ğŸš€ AkÄ±llÄ± Tarama BaÅŸlat
        </button>
        <button class="btn btn-warning" onclick="stopScan()">
          â¹ï¸ Durdur
        </button>
        <button class="btn btn-success" onclick="handleRefreshModels()" id="refreshBtn">
          ğŸ”„ Modelleri Yenile
        </button>
      </div>
    </div>

    <div class="models-panel">
      <div class="models-header">
        <div class="models-title">
          ğŸ“± AlgÄ±lanan Modeller
          <div class="models-count" id="modelsCount">0</div>
        </div>
        <button class="btn btn-primary" onclick="refreshModels()" style="padding: 8px 16px; font-size: 14px;">
          ğŸ” Yeniden Analiz Et
        </button>
      </div>
      <div class="models-grid" id="modelsGrid">
        <!-- Models will be populated here -->
      </div>
    </div>
  </div>

  <div class="status-panel" id="statusPanel">
    <div class="status-header">
      <div class="status-title">
        ğŸ“Š Durum MonitÃ¶rÃ¼
      </div>
      <button class="status-close" onclick="toggleStatusPanel()">âœ•</button>
    </div>
    <div class="status-content" id="statusContent">
      <div class="status-item">
        <span>Durum:</span>
        <span id="currentStatus">HazÄ±r</span>
      </div>
      <div class="status-item">
        <span>Ä°ÅŸlenen:</span>
        <span id="processedCount">0/0</span>
      </div>
      <div class="status-item">
        <span>Bulunan:</span>
        <span id="foundCount">0</span>
      </div>
      <div class="status-item">
        <span>Hata:</span>
        <span id="errorCount">0</span>
      </div>
      <div class="status-progress">
        <div class="status-progress-fill" id="statusProgress"></div>
      </div>
    </div>
  </div>

  <div class="loading-overlay" id="loadingOverlay">
    <div class="loading-content">
      <div class="spinner"></div>
      <h3>ğŸ§  AI Model Analizi...</h3>
      <p id="loadingText">PDF klasÃ¶rÃ¼ taranÄ±yor...</p>
    </div>
  </div>

  <script>
    let currentTheme = 'light';
    let models = [];
    let isScanning = false;
    let scanProgress = 0;
    let connectionStatus = 'loading';
    let statusPanelVisible = true;

    // AI Model Detection System - GerÃ§ek dosya isimleri iÃ§in gÃ¼ncellenmiÅŸ
    const phoneModels = [
      // iPhone Modelleri
      {
        name: 'iPhone 5s',
        keywords: ['iphone5s', 'iphone 5s'],
        confidence: 0.95,
        icon: 'ğŸ“±'
      },
      {
        name: 'iPhone 5c',
        keywords: ['iphone_5c', 'iphone 5c', '5c'],
        confidence: 0.93,
        icon: 'ğŸ“±'
      },
      {
        name: 'iPhone 6',
        keywords: ['iphone-6', 'iphone_6', 'iphone 6'],
        confidence: 0.94,
        icon: 'ğŸ“±'
      },
      {
        name: 'iPhone 6 Plus',
        keywords: ['iphone_6_plus', 'iphone-6-plus', '6_plus', '6plus'],
        confidence: 0.92,
        icon: 'ğŸ“±'
      },
      {
        name: 'iPhone 6s',
        keywords: ['iphone_6s', 'iphone-6s', '6s_schematic'],
        confidence: 0.93,
        icon: 'ğŸ“±'
      },
      {
        name: 'iPhone 6s Plus',
        keywords: ['iphone_6s_plus', '6s_plus', '6splus'],
        confidence: 0.91,
        icon: 'ğŸ“±'
      },
      {
        name: 'iPhone 7',
        keywords: ['iphone_7', 'iphone-7', '7_full'],
        confidence: 0.94,
        icon: 'ğŸ“±'
      },
      {
        name: 'iPhone 8',
        keywords: ['iphone8', 'iphone_8', '820-00871'],
        confidence: 0.95,
        icon: 'ğŸ“±'
      },
      {
        name: 'iPhone 8 Plus',
        keywords: ['iphone_8_plus', '8_plus', 'd21_mlb', '8plus'],
        confidence: 0.93,
        icon: 'ğŸ“±'
      },
      {
        name: 'iPhone SE',
        keywords: ['iphone_se', 'iphone-se', '820-00282', 'sen69'],
        confidence: 0.96,
        icon: 'ğŸ“±'
      },
      {
        name: 'iPhone X',
        keywords: ['iphone_x', 'iphone-x', 'qualcomm', 'intel_chipset'],
        confidence: 0.97,
        icon: 'ğŸ“±'
      },
      {
        name: 'iPhone XS Max',
        keywords: ['iphone_xsmax', 'xsmax', 'xs_max'],
        confidence: 0.95,
        icon: 'ğŸ“±'
      },
      {
        name: 'iPhone 11 Pro Max',
        keywords: ['iphone_11_pro_max', '11_pro_max', '11pro'],
        confidence: 0.98,
        icon: 'ğŸ“±'
      },
      
      // iPad Modelleri
      {
        name: 'iPad 3',
        keywords: ['ipad-3', 'ipad_3'],
        confidence: 0.90,
        icon: 'ğŸ“Ÿ'
      },
      {
        name: 'iPad 4',
        keywords: ['ipad-4', 'ipad_4'],
        confidence: 0.91,
        icon: 'ğŸ“Ÿ'
      },
      {
        name: 'iPad 5 (Air)',
        keywords: ['ipad5_air', 'ipad_5', 'apple_ipad5'],
        confidence: 0.92,
        icon: 'ğŸ“Ÿ'
      },
      {
        name: 'iPad Air',
        keywords: ['ipad-air', 'ipad_air', 'ipadair'],
        confidence: 0.93,
        icon: 'ğŸ“Ÿ'
      },
      {
        name: 'iPad Air 2',
        keywords: ['ipad_air2', 'air2', '820-3633'],
        confidence: 0.94,
        icon: 'ğŸ“Ÿ'
      },
      {
        name: 'iPad mini',
        keywords: ['ipad_mini', 'ipad-mini', 'mini_4g'],
        confidence: 0.89,
        icon: 'ğŸ“Ÿ'
      },
      {
        name: 'Apple PCB Layout',
        keywords: ['pcb', 'mlb', 'layout', '820-'],
        confidence: 0.85,
        icon: 'ğŸ”§'
      },
      {
        name: 'Schematic Diagram',
        keywords: ['schematic', 'schemitc', 'diagram'],
        confidence: 0.80,
        icon: 'ğŸ“‹'
      }
    ];

    // Initialize
    document.addEventListener('DOMContentLoaded', function() {
      loadTheme();
      checkConnection();
      showStatusPanel();
      
      // Initial model refresh
      setTimeout(async () => {
        await refreshModels();
      }, 1500);
      
      // Add some initial animations
      setTimeout(() => {
        document.querySelector('.title').style.transform = 'scale(1.05)';
        setTimeout(() => {
          document.querySelector('.title').style.transform = 'scale(1)';
        }, 200);
      }, 500);
    });

    function loadTheme() {
      const savedTheme = localStorage.getItem('theme') || 'light';
      currentTheme = savedTheme;
      document.body.setAttribute('data-theme', currentTheme);
      document.querySelector('.theme-toggle').textContent = currentTheme === 'light' ? 'ğŸŒ™' : 'â˜€ï¸';
    }

    function toggleTheme() {
      currentTheme = currentTheme === 'light' ? 'dark' : 'light';
      document.body.setAttribute('data-theme', currentTheme);
      document.querySelector('.theme-toggle').textContent = currentTheme === 'light' ? 'ğŸŒ™' : 'â˜€ï¸';
      localStorage.setItem('theme', currentTheme);
      showToast(currentTheme === 'dark' ? 'ğŸŒ™ KaranlÄ±k mod aktif!' : 'â˜€ï¸ AydÄ±nlÄ±k mod aktif!');
    }

    function checkConnection() {
      const statusEl = document.getElementById('connectionStatus');
      const textEl = document.getElementById('connectionText');
      
      updateStatus('ğŸ” BaÄŸlantÄ± kontrol ediliyor...');
      statusEl.className = 'connection-status loading';
      textEl.textContent = 'Sistem BaÅŸlatÄ±lÄ±yor...';
      
      // Basit baÄŸlantÄ± kontrolÃ¼ - Ã§ok karmaÅŸÄ±k yapmÄ±yoruz
      setTimeout(() => {
        connectionStatus = 'online';
        statusEl.className = 'connection-status online';
        textEl.textContent = 'âœ… Sistem HazÄ±r';
        updateStatus('Sistem hazÄ±r - PDF dosyalarÄ± aranÄ±yor...');
      }, 1000);
    }

    function activateGitHubDemoMode() {
      const statusEl = document.getElementById('connectionStatus');
      const textEl = document.getElementById('connectionText');
      
      connectionStatus = 'online';
      statusEl.className = 'connection-status online';
      textEl.textContent = 'ğŸ® GitHub Demo';
      updateStatus('GitHub/Vercel demo modu aktif');
      showToast('âš ï¸ PDF dosyalarÄ± eriÅŸilemedi - GitHub demo modu', 'warning');
      
      const demoMessage = document.createElement('div');
      demoMessage.innerHTML = `
        <div style="background: linear-gradient(135deg, #6366f1, #8b5cf6); color: white; padding: 25px; border-radius: 15px; margin: 20px 0; box-shadow: 0 10px 30px rgba(0,0,0,0.2);">
          <h4>ğŸš€ PDF DosyalarÄ±nÄ±z HazÄ±r Ama EriÅŸilemedi!</h4>
          
          <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 10px; margin: 15px 0;">
            <p style="margin: 10px 0;">âœ… Sistem PDF klasÃ¶rÃ¼nÃ¼zÃ¼ tanÄ±yor ama eriÅŸemiyor.</p>
            <p style="margin: 10px 0;">ğŸ“‹ <strong>Ã‡Ã¶zÃ¼m:</strong> AÅŸaÄŸÄ±daki JSON dosyasÄ±nÄ± repo'nuzda oluÅŸturun:</p>
          </div>
          
          <details style="margin: 15px 0;" open>
            <summary style="cursor: pointer; font-weight: bold; padding: 10px; background: rgba(255,255,255,0.1); border-radius: 8px;">ğŸ“ PDF KlasÃ¶rÃ¼ Ä°Ã§in pdf-list.json</summary>
            <pre style="background: rgba(0,0,0,0.3); padding: 15px; border-radius: 8px; margin: 10px 0; font-size: 11px; overflow-x: auto; border: 1px solid rgba(255,255,255,0.2); white-space: pre-wrap;">[
  "pdf/apple_ipad5_air_schematic.pdf",
  "pdf/apple_ipad_mini_4g_-_.pdf",
  "pdf/apple_iphone_8_plus_d21_mlb.pdf",
  "pdf/iPad-4-Schematic.pdf",
  "pdf/iPad-Air-Schematic.pdf",
  "pdf/ipad-3-schematic.pdf",
  "pdf/ipad_mini_schematic.pdf",
  "pdf/ipadairschematicdiagrampcblayout-180312105911.pdf",
  "pdf/iphone-6-schematic-__.pdf",
  "pdf/iphone-x-qualcomm-edition.pdf",
  "pdf/iphone5s_schematic2.pdf",
  "pdf/iphone8_820-00871-A.pdf",
  "pdf/iphone_11_pro_max_schematic.pdf",
  "pdf/iphone_5c_schematics.pdf",
  "pdf/iphone_6_plus_schematic__.pdf",
  "pdf/iphone_6s_plus_schematic_.pdf",
  "pdf/iphone_6s_schematics__.pdf",
  "pdf/iphone_7_full_schematic___.pdf",
  "pdf/iphone_8_plus_pcb.pdf",
  "pdf/iphone_8_plus_schematic.pdf",
  "pdf/iphone_se.pdf",
  "pdf/iphone_se_820-00282.pdf",
  "pdf/iphone_se_820-00282__pcb.pdf",
  "pdf/iphone_se__r__.pdf",
  "pdf/iphone_sen69_051-00648_4.0.0.pdf",
  "pdf/iphone_x_schematic_intel_chipset.pdf",
  "pdf/iphone_x_schematic_intel_chipset___.pdf",
  "pdf/iphone_x_schematic_qualcomm_chipset.pdf",
  "pdf/iphone_xsmax_schematic.pdf",
  "pdf/mini__30005__36335__22270.pdf",
  "pdf/pcb_820-3633-05_ipad_air2_4g_.pdf",
  "pdf/schemitc_820-3633-05_ipad_air2_.pdf"
]</pre>
          </details>
          
          <div style="background: var(--success); padding: 15px; border-radius: 10px; margin: 15px 0; text-align: center;">
            <h5 style="margin-bottom: 10px;">ğŸ’¡ HÄ±zlÄ± Test: Yerel Dosyalar</h5>
            <button onclick="showFileSelector()" style="background: white; color: var(--success); border: none; padding: 12px 24px; border-radius: 8px; font-weight: bold; cursor: pointer; font-size: 16px; box-shadow: 0 2px 5px rgba(0,0,0,0.2);">
              ğŸ“ Bilgisayardan PDF SeÃ§
            </button>
            <p style="font-size: 12px; margin-top: 8px; opacity: 0.9;">JSON oluÅŸturmadan Ã¶nce test edin!</p>
          </div>
          
          <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 10px; margin: 15px 0;">
            <h5>ğŸ¯ AdÄ±m AdÄ±m Ã‡Ã¶zÃ¼m:</h5>
            <ol style="margin: 10px 0; padding-left: 20px; line-height: 1.6;">
              <li>YukarÄ±daki JSON'u kopyalayÄ±n</li>
              <li>GitHub repo'nuzda <code>pdf-list.json</code> dosyasÄ± oluÅŸturun</li>
              <li>JSON'u yapÄ±ÅŸtÄ±rÄ±n ve commit edin</li>
              <li>Vercel otomatik deploy edecek</li>
              <li>Bu sayfayÄ± yenileyin - 32 PDF aktif olacak! ğŸ‰</li>
            </ol>
          </div>
          
          <div style="background: rgba(255,255,255,0.05); padding: 15px; border-radius: 10px; margin: 15px 0;">
            <h5>ğŸ“± AlgÄ±lanacak Modeller:</h5>
            <p style="font-size: 13px; line-height: 1.5;">
              â€¢ iPhone: 5s, 5c, 6, 6 Plus, 6s, 6s Plus, 7, 8, 8 Plus, SE, X, XS Max, 11 Pro Max<br>
              â€¢ iPad: 3, 4, 5 (Air), Air, Air 2, mini<br>
              â€¢ PCB Layout & Schematic DiyagramlarÄ±
            </p>
          </div>
          
          <div style="display: flex; gap: 10px; margin-top: 20px; flex-wrap: wrap;">
            <button onclick="location.reload()" style="background: white; color: #6366f1; border: none; padding: 10px 20px; border-radius: 8px; font-weight: bold; cursor: pointer;">
              ğŸ”„ JSON Ekledikten Sonra Yenile
            </button>
            <button onclick="showFileSelector()" style="background: #10b981; color: white; border: none; padding: 10px 20px; border-radius: 8px; font-weight: bold; cursor: pointer;">
              ğŸ“ Åimdi Test Et
            </button>
            <button onclick="navigator.clipboard.writeText(JSON.stringify([
              'pdf/apple_ipad5_air_schematic.pdf','pdf/apple_ipad_mini_4g_-_.pdf','pdf/apple_iphone_8_plus_d21_mlb.pdf',
              'pdf/iPad-4-Schematic.pdf','pdf/iPad-Air-Schematic.pdf','pdf/ipad-3-schematic.pdf','pdf/ipad_mini_schematic.pdf',
              'pdf/ipadairschematicdiagrampcblayout-180312105911.pdf','pdf/iphone-6-schematic-__.pdf','pdf/iphone-x-qualcomm-edition.pdf',
              'pdf/iphone5s_schematic2.pdf','pdf/iphone8_820-00871-A.pdf','pdf/iphone_11_pro_max_schematic.pdf','pdf/iphone_5c_schematics.pdf',
              'pdf/iphone_6_plus_schematic__.pdf','pdf/iphone_6s_plus_schematic_.pdf','pdf/iphone_6s_schematics__.pdf',
              'pdf/iphone_7_full_schematic___.pdf','pdf/iphone_8_plus_pcb.pdf','pdf/iphone_8_plus_schematic.pdf','pdf/iphone_se.pdf',
              'pdf/iphone_se_820-00282.pdf','pdf/iphone_se_820-00282__pcb.pdf','pdf/iphone_se__r__.pdf','pdf/iphone_sen69_051-00648_4.0.0.pdf',
              'pdf/iphone_x_schematic_intel_chipset.pdf','pdf/iphone_x_schematic_intel_chipset___.pdf','pdf/iphone_x_schematic_qualcomm_chipset.pdf',
              'pdf/iphone_xsmax_schematic.pdf','pdf/mini__30005__36335__22270.pdf','pdf/pcb_820-3633-05_ipad_air2_4g_.pdf',
              'pdf/schemitc_820-3633-05_ipad_air2_.pdf'
            ], null, 2)); showToast('ğŸ“‹ PDF klasÃ¶rÃ¼ JSON\'u kopyalandÄ±!', 'success');" style="background: #f59e0b; color: white; border: none; padding: 10px 20px; border-radius: 8px; font-weight: bold; cursor: pointer;">
              ğŸ“‹ PDF KlasÃ¶rÃ¼ JSON'unu Kopyala
            </button>
          </div>
        </div>
      `;
      
      const container = document.querySelector('.models-panel');
      const oldDemo = container.querySelector('div[style*="background: linear-gradient"], div[style*="background: var(--error)"]');
      if (oldDemo) oldDemo.remove();
      
      container.insertBefore(demoMessage, container.querySelector('.models-header').nextSibling);
      
      // Demo veriler - gerÃ§ek dosya isimlerinden seÃ§ilen birkaÃ§ tanesi
      const demoFiles = [
        'GitHub_iphone_11_pro_max_schematic.pdf',
        'Vercel_iphone_x_qualcomm_edition.pdf',
        'Static_iPad-Air-Schematic.pdf'
      ];
      
      models = demoFiles.map(file => ({
        fileName: file,
        displayName: file,
        url: `#github-demo-${file}`,
        status: 'pending',
        matches: [],
        error: null,
        scanned: false
      }));
      
      document.getElementById('modelsCount').textContent = models.length;
    }

    // PHP'siz dosya seÃ§ici ekle
    function showFileSelector() {
      const input = document.createElement('input');
      input.type = 'file';
      input.multiple = true;
      input.accept = '.pdf';
      input.style.display = 'none';
      
      input.onchange = function(e) {
        const files = Array.from(e.target.files);
        if (files.length > 0) {
          loadLocalFiles(files);
        }
      };
      
      document.body.appendChild(input);
      input.click();
      document.body.removeChild(input);
    }

    function loadLocalFiles(files) {
      const statusEl = document.getElementById('connectionStatus');
      const textEl = document.getElementById('connectionText');
      
      connectionStatus = 'online';
      statusEl.className = 'connection-status online';
      textEl.textContent = `âœ… ${files.length} PDF SeÃ§ildi`;
      
      updateStatus(`${files.length} yerel PDF dosyasÄ± yÃ¼klendi`);
      showToast(`ğŸ“„ ${files.length} PDF dosyasÄ± seÃ§ildi!`, 'success');
      
      models = files.map(file => ({
        fileName: file.name,
        displayName: file.name,
        url: file, // File object olarak sakla
        status: 'pending',
        matches: [],
        error: null,
        scanned: false,
        fileObject: file // GerÃ§ek dosya objesi
      }));
      
      document.getElementById('modelsCount').textContent = models.length;
      
      // Demo mesajÄ±nÄ± kaldÄ±r ve baÅŸarÄ± mesajÄ± gÃ¶ster
      const existingDemo = document.querySelector('.models-panel div[style*="background: var(--error)"]');
      if (existingDemo) existingDemo.remove();
      
      const successMessage = document.createElement('div');
      successMessage.innerHTML = `
        <div style="background: var(--success); color: white; padding: 15px; border-radius: 10px; margin: 20px 0;">
          <h4>âœ… Yerel PDF DosyalarÄ± YÃ¼klendi!</h4>
          <p style="margin: 10px 0;">ArtÄ±k gerÃ§ek PDF dosyalarÄ±nÄ±zÄ± tarayabilirsiniz. Web sunucusu gerekmedi! ğŸ‰</p>
          <p><strong>YÃ¼klenen:</strong> ${files.map(f => f.name).join(', ')}</p>
        </div>
      `;
      
      const container = document.querySelector('.models-panel');
      container.insertBefore(successMessage, container.querySelector('.models-header').nextSibling);
      
      // Model analizini baÅŸlat
      setTimeout(analyzeModels, 500);
    }
      const statusEl = document.getElementById('connectionStatus');
      const textEl = document.getElementById('connectionText');
      
      connectionStatus = 'online';
      statusEl.className = 'connection-status online';
      textEl.textContent = 'ğŸ® Demo - Hata Var';
      updateStatus('Demo modu: ' + phpError);
      showToast('âš ï¸ PDF sistemi sorunlu - Demo modu aktif', 'warning');
      
      // Demo modunda detaylÄ± aÃ§Ä±klama gÃ¶ster
      const demoMessage = document.createElement('div');
      demoMessage.innerHTML = `
        <div style="background: var(--error); color: white; padding: 20px; border-radius: 15px; margin: 20px 0;">
          <h4>ğŸš¨ PDF Sistem HatasÄ± Tespit Edildi</h4>
          <div style="background: rgba(0,0,0,0.2); padding: 15px; border-radius: 10px; margin: 15px 0;">
            <strong>ğŸ” Hata DetayÄ±:</strong><br>
            <code style="color: #ffcccb;">${phpError}</code>
          </div>
          
          <h5>âœ… Ã‡Ã¶zÃ¼m AdÄ±mlarÄ±:</h5>
          <ol style="margin: 10px 0; padding-left: 20px; line-height: 1.6;">
            <li><strong>Web Sunucusu KontrolÃ¼:</strong> XAMPP, WAMP veya benzeri PHP destekli sunucu gerekli</li>
            <li><strong>index.php KontrolÃ¼:</strong> Dosya doÄŸru klasÃ¶rde ve Ã§alÄ±ÅŸÄ±r durumda mÄ±?</li>
            <li><strong>PDF DosyalarÄ±:</strong> HTML ile aynÄ± klasÃ¶rde PDF dosyalarÄ± var mÄ±?</li>
            <li><strong>Ä°zinler:</strong> KlasÃ¶r okuma izinleri kontrol edin</li>
          </ol>
          
          <details style="margin: 15px 0;">
            <summary style="cursor: pointer; font-weight: bold;">ğŸ“‹ Test Edilecek Dosyalar</summary>
            <div style="background: rgba(0,0,0,0.2); padding: 10px; border-radius: 5px; margin: 10px 0;">
              <strong>Bu dosya isimlerinden birini kullanmayÄ± deneyin:</strong><br>
              â€¢ iPhone5.pdf, iPhone6.pdf, iPhone7.pdf<br>
              â€¢ resistor_values.pdf, schematic.pdf<br>
              â€¢ component_layout.pdf, repair_guide.pdf
            </div>
          </details>
          
          <details style="margin: 15px 0;">
            <summary style="cursor: pointer; font-weight: bold;">ğŸ”§ DoÄŸru index.php Kodu</summary>
            <pre style="background: rgba(0,0,0,0.3); padding: 15px; border-radius: 8px; margin: 10px 0; font-size: 11px; overflow-x: auto; border: 1px solid rgba(255,255,255,0.2);">
&lt;?php
header('Content-Type: application/json');
header('Access-Control-Allow-Origin: *');

// Debug iÃ§in hata raporlamayÄ± aÃ§
error_reporting(E_ALL);
ini_set('display_errors', 1);

try {
    $pdfDir = './';
    $files = [];
    
    if (is_dir($pdfDir)) {
        $handle = opendir($pdfDir);
        while (false !== ($file = readdir($handle))) {
            if (pathinfo($file, PATHINFO_EXTENSION) === 'pdf') {
                $files[] = $file;
            }
        }
        closedir($handle);
    }
    
    // Debug log
    error_log('PDF files found: ' . json_encode($files));
    
    echo json_encode($files);
    
} catch (Exception $e) {
    error_log('PDF scanner error: ' . $e->getMessage());
    echo json_encode(['error' => $e->getMessage()]);
}
?&gt;</pre>
          </details>
          
          <button onclick="location.reload()" style="background: white; color: var(--error); border: none; padding: 10px 20px; border-radius: 8px; font-weight: bold; cursor: pointer; margin-top: 15px;">
            ğŸ”„ DÃ¼zeltikten Sonra Yenile
          </button>
        </div>
      `;
      
      const container = document.querySelector('.models-panel');
      // Eski demo mesajÄ±nÄ± kaldÄ±r
      const oldDemo = container.querySelector('div[style*="background: var(--warning)"], div[style*="background: var(--error)"]');
      if (oldDemo) oldDemo.remove();
      
      container.insertBefore(demoMessage, container.querySelector('.models-header').nextSibling);
      
      // Demo veriler yÃ¼kle
      const demoFiles = [
        'iPhone5_schematic_final.pdf',
        'iPhone6_component_layout.pdf',
        'iPhone7_circuit_diagram.pdf'
      ];
      
      models = demoFiles.map(file => ({
        fileName: file,
        displayName: file,
        url: `#demo-${file}`,
        status: 'pending',
        matches: [],
        error: null,
        scanned: false
      }));
      
      document.getElementById('modelsCount').textContent = models.length;
    }

    function refreshModels() {
      updateStatus('PDF dosyalarÄ± yenileniyor...');
      
      // Ã–nce mevcut demo mesajÄ±nÄ± temizle
      const existingDemo = document.querySelector('.models-panel div[style*="background: var(--warning)"]');
      if (existingDemo) existingDemo.remove();
      
      // 1. index.php'den listeyi al
      fetch('index.php')
        .then(response => {
          if (!response.ok) throw new Error('index.php bulunamadÄ±');
          return response.json();
        })
        .then(pdfList => {
          if (pdfList && pdfList.length > 0) {
            models = pdfList.map(file => ({
              fileName: file,
              displayName: file,
              url: file,
              status: 'pending',
              matches: [],
              error: null,
              scanned: false
            }));
            
            updateStatus(`${models.length} gerÃ§ek PDF dosyasÄ± yÃ¼klendi (index.php)`);
            showToast(`ğŸ“„ ${models.length} gerÃ§ek PDF dosyasÄ± bulundu!`, 'success');
            
            const statusEl = document.getElementById('connectionStatus');
            const textEl = document.getElementById('connectionText');
            connectionStatus = 'online';
            statusEl.className = 'connection-status online';
            textEl.textContent = `âœ… ${models.length} PDF Aktif`;
            
          } else {
            throw new Error('PDF listesi boÅŸ');
          }
        })
        .catch(error => {
          console.log('index.php hatasÄ±, manuel kontrol baÅŸlatÄ±lÄ±yor...');
          
          // 2. Bilinen dosya isimlerini test et  
          const testFiles = [
            'iPhone5.pdf', 'iPhone5s.pdf', 'iPhone6.pdf', 'iPhone6s.pdf', 'iPhone6Plus.pdf',
            'iPhone7.pdf', 'iPhone7Plus.pdf', 'iPhone8.pdf', 'iPhoneX.pdf', 'iPhoneXR.pdf',
            'resistor_values.pdf', 'component_layout.pdf', 'schematic.pdf', 'repair_guide.pdf',
            'service_manual.pdf', 'technical_specs.pdf', 'motherboard.pdf', 'circuit_diagram.pdf'
          ];
          
          updateStatus('Manuel dosya testi yapÄ±lÄ±yor...');
          
          Promise.allSettled(
            testFiles.map(filename => 
              fetch(filename, { method: 'HEAD' })
                .then(response => response.ok ? filename : null)
                .catch(() => null)
            )
          )
          .then(results => {
            const foundFiles = results
              .map(result => result.status === 'fulfilled' ? result.value : null)
              .filter(file => file !== null);
              
            if (foundFiles.length > 0) {
              models = foundFiles.map(file => ({
                fileName: file,
                displayName: file,
                url: file,
                status: 'pending',
                matches: [],
                error: null,
                scanned: false
              }));
              
              updateStatus(`${foundFiles.length} PDF dosyasÄ± manuel olarak bulundu`);
              showToast(`ğŸ“„ ${foundFiles.length} PDF dosyasÄ± tespit edildi!`, 'success');
              
              const statusEl = document.getElementById('connectionStatus');
              const textEl = document.getElementById('connectionText');
              connectionStatus = 'online';
              statusEl.className = 'connection-status online';
              textEl.textContent = `âœ… ${foundFiles.length} PDF Manuel`;
              
            } else {
              // 3. Demo modu
              const demoFiles = [
                'iPhone5_schematic_final.pdf',
                'iPhone5s_repair_guide.pdf', 
                'iPhone6_component_layout.pdf',
                'iPhone6s_resistor_values.pdf',
                'iPhone6Plus_motherboard.pdf'
              ];
              
              models = demoFiles.map(file => ({
                fileName: file,
                displayName: file,
                url: `#demo-${file}`,
                status: 'pending',
                matches: [],
                error: null,
                scanned: false
              }));
              
              updateStatus(`Demo modu - ${models.length} Ã¶rnek dosya`);
              showToast(`ğŸ® Demo modu: ${models.length} Ã¶rnek dosya`, 'warning');
              
              const statusEl = document.getElementById('connectionStatus');
              const textEl = document.getElementById('connectionText');
              connectionStatus = 'online';
              statusEl.className = 'connection-status online';
              textEl.textContent = 'ğŸ® Demo Modu';
              
              // Demo aÃ§Ä±klama gÃ¶ster
              activateDemoMode();
            }
          });
        })
        .finally(() => {
          document.getElementById('modelsCount').textContent = models.length;
        });
    }

    function analyzeModels() {
      if (models.length === 0) {
        showToast('âŒ Ã–nce PDF dosyalarÄ±nÄ± yÃ¼kleyin!', 'warning');
        return;
      }
      
      updateStatus('AI model analizi baÅŸlatÄ±lÄ±yor...');
      showLoading('ğŸ§  AI ile model tÃ¼rleri analiz ediliyor...');
      
      setTimeout(() => {
        const analyzedModels = models.map(model => {
          const fileName = model.fileName.toLowerCase();
          let detectedModel = null;
          let confidence = 0;
          
          // AI model detection simulation
          for (const phoneModel of phoneModels) {
            for (const keyword of phoneModel.keywords) {
              if (fileName.includes(keyword)) {
                if (phoneModel.confidence > confidence) {
                  detectedModel = phoneModel;
                  confidence = phoneModel.confidence;
                }
              }
            }
          }
          
          if (detectedModel) {
            return {
              ...model,
              modelType: detectedModel.name,
              confidence: confidence,
              icon: detectedModel.icon,
              aiDetected: true
            };
          } else {
            return {
              ...model,
              modelType: 'Bilinmeyen Model',
              confidence: 0.1,
              icon: 'â“',
              aiDetected: false
            };
          }
        });
        
        models = analyzedModels;
        displayModels();
        hideLoading();
        updateStatus('Model analizi tamamlandÄ± - ' + models.length + ' model tanÄ±ndÄ±');
        showToast('ğŸ¤– AI analizi tamamlandÄ±!', 'success');
      }, 3000);
    }

    function displayModels() {
      const grid = document.getElementById('modelsGrid');
      grid.innerHTML = '';
      
      if (models.length === 0) {
        grid.innerHTML = `
          <div style="grid-column: 1/-1; text-align: center; padding: 40px; color: var(--text); opacity: 0.6;">
            <div style="font-size: 48px; margin-bottom: 20px;">ğŸ“‚</div>
            <h3>HenÃ¼z model bulunamadÄ±</h3>
            <p>"Modelleri Yenile" butonuna tÄ±klayÄ±n</p>
          </div>
        `;
        return;
      }
      
      models.forEach((model, index) => {
        const card = createModelCard(model, index);
        grid.appendChild(card);
      });
      
      document.getElementById('modelsCount').textContent = models.length;
    }

    function createModelCard(model, index) {
      const card = document.createElement('div');
      card.className = 'model-card';
      card.id = `model-${index}`;
      
      const confidenceClass = model.confidence > 0.8 ? 'high' : model.confidence > 0.5 ? 'medium' : 'low';
      const confidenceColor = model.confidence > 0.8 ? 'var(--success)' : model.confidence > 0.5 ? 'var(--warning)' : 'var(--error)';
      
      card.innerHTML = `
        <div class="model-header">
          <div class="model-name">
            ${model.icon} ${model.modelType || 'Bilinmeyen Model'}
          </div>
          ${model.aiDetected ? `
            <div class="model-confidence" style="background: ${confidenceColor}">
              ${Math.round(model.confidence * 100)}%
            </div>
          ` : ''}
        </div>
        
        <div style="font-size: 12px; opacity: 0.7; margin-bottom: 10px;">
          ğŸ“„ ${model.fileName}
        </div>
        
        <div class="model-status">
          <div class="status-icon" id="status-icon-${index}">â³</div>
          <div class="status-text" id="status-text-${index}">Tarama Bekleniyor</div>
        </div>
        
        <div class="model-matches" id="matches-${index}" style="display: none;">
          <div class="matches-header">ğŸ¯ Bulunan DeÄŸerler:</div>
          <div class="matches-list" id="matches-list-${index}"></div>
        </div>
        
        <button class="model-link" id="link-${index}" onclick="openModelPDF(${index})">
          ğŸ“– PDF'i AÃ§
        </button>
      `;
      
      return card;
    }

    async function startIntelligentScan() {
      if (isScanning) {
        showToast('âš ï¸ Tarama zaten devam ediyor!', 'warning');
        return;
      }

      if (models.length === 0) {
        showToast('âŒ Taranacak PDF dosyasÄ± bulunamadÄ±!', 'error');
        updateStatus('Ã–nce "Modelleri Yenile" butonuna tÄ±klayÄ±n');
        return;
      }

      const minVal = parseInt(document.getElementById('minVal').value);
      const maxVal = parseInt(document.getElementById('maxVal').value);
      const scanMode = document.getElementById('scanMode').value;

      if (!minVal || !maxVal || minVal >= maxVal) {
        showToast('âŒ LÃ¼tfen geÃ§erli deÄŸer aralÄ±ÄŸÄ± girin!', 'error');
        updateStatus('GeÃ§ersiz deÄŸer aralÄ±ÄŸÄ±');
        return;
      }

      isScanning = true;
      scanProgress = 0;
      
      document.getElementById('scanBtn').disabled = true;
      document.getElementById('scanBtn').textContent = 'ğŸ”„ Tarama Devam Ediyor...';
      
      updateStatus(`${scanMode} tarama baÅŸlatÄ±lÄ±yor... (${minVal}Î© - ${maxVal}Î©)`);
      showStatusPanel();

      try {
        if (scanMode === 'sequential') {
          await sequentialScan(minVal, maxVal);
        } else if (scanMode === 'parallel') {
          await parallelScan(minVal, maxVal);
        } else {
          await smartScan(minVal, maxVal);
        }
      } catch (error) {
        updateStatus('Tarama hatasÄ±: ' + error.message);
        showToast('âŒ Tarama sÄ±rasÄ±nda hata oluÅŸtu!', 'error');
      } finally {
        isScanning = false;
        document.getElementById('scanBtn').disabled = false;
        document.getElementById('scanBtn').textContent = 'ğŸš€ AkÄ±llÄ± Tarama BaÅŸlat';
        
        const totalFound = models.reduce((acc, m) => acc + m.matches.length, 0);
        const scannedCount = models.filter(m => m.scanned).length;
        updateStatus(`Tarama tamamlandÄ±! ${scannedCount} dosya tarandÄ±, ${totalFound} eÅŸleÅŸme bulundu`);
        showToast(`ğŸ‰ Tarama tamamlandÄ±! ${totalFound} eÅŸleÅŸme bulundu.`, 'success');
      }
    }

    async function sequentialScan(minVal, maxVal) {
      updateStatus('SÄ±ralÄ± tarama modu aktif');
      
      for (let i = 0; i < models.length; i++) {
        if (!isScanning) break;
        
        await scanModel(i, minVal, maxVal);
        scanProgress = ((i + 1) / models.length) * 100;
        updateProgress();
        
        // Delay between scans for visual effect
        await new Promise(resolve => setTimeout(resolve, 500));
      }
    }

    async function parallelScan(minVal, maxVal) {
      updateStatus('Paralel tarama modu aktif');
      
      const promises = models.map((model, index) => 
        scanModel(index, minVal, maxVal)
      );
      
      await Promise.all(promises);
      scanProgress = 100;
      updateProgress();
    }

    async function smartScan(minVal, maxVal) {
      updateStatus('AkÄ±llÄ± tarama modu aktif - yÃ¼ksek confidence Ã¶ncelikli');
      
      // Sort by confidence (highest first)
      const sortedIndexes = models
        .map((model, index) => ({ index, confidence: model.confidence || 0 }))
        .sort((a, b) => b.confidence - a.confidence)
        .map(item => item.index);
      
      for (let i = 0; i < sortedIndexes.length; i++) {
        if (!isScanning) break;
        
        const modelIndex = sortedIndexes[i];
        await scanModel(modelIndex, minVal, maxVal);
        scanProgress = ((i + 1) / sortedIndexes.length) * 100;
        updateProgress();
        
        await new Promise(resolve => setTimeout(resolve, 300));
      }
    }

    async function scanModel(index, minVal, maxVal) {
      const model = models[index];
      const card = document.getElementById(`model-${index}`);
      const statusIcon = document.getElementById(`status-icon-${index}`);
      const statusText = document.getElementById(`status-text-${index}`);
      
      // Update UI to show scanning state
      card.classList.add('scanning');
      statusIcon.textContent = 'ğŸ”„';
      statusText.textContent = 'PDF HazÄ±rlanÄ±yor...';
      
      updateStatus(`${model.modelType || model.fileName} taranÄ±yor...`);
      updateCounts();
      
      try {
        let matches = [];
        
        // Yerel dosya mÄ± yoksa URL mi kontrol et
        if (model.fileObject && model.fileObject instanceof File) {
          // Yerel dosya - File object
          statusText.textContent = 'Yerel PDF Okunuyor...';
          
          const arrayBuffer = await model.fileObject.arrayBuffer();
          const pdf = await pdfjsLib.getDocument({ data: arrayBuffer }).promise;
          let fullText = '';

          statusText.textContent = `${pdf.numPages} Sayfa Ä°ÅŸleniyor...`;
          
          for (let i = 1; i <= pdf.numPages; i++) {
            const page = await pdf.getPage(i);
            const content = await page.getTextContent();
            const strings = content.items.map(item => item.str).join(' ');
            fullText += strings + '\n';
            
            statusText.textContent = `Sayfa ${i}/${pdf.numPages} Ä°ÅŸleniyor...`;
          }

          statusText.textContent = 'DirenÃ§ DeÄŸerleri AranÄ±yor...';
          
          // GeliÅŸmiÅŸ direnÃ§ deÄŸeri regex
          const resistorPatterns = [
            /\b\d+(\.\d+)?[kKmMrRÎ©Ï‰]\b/g,  // 330K, 1.5M, 470R, 2.2Î©
            /\b\d+(\.\d+)?\s*[kKmM]?[Î©Ï‰]\b/g, // 330 Î©, 1.5 MÎ©
            /\b\d+(\.\d+)?\s*[kKmM]?\s*[Oo]hm[s]?\b/gi, // 330 Ohm, 1.5K Ohms
            /\b\d+(\.\d+)?\s*[kKmM]?\s*[Rr]\b/g, // 330R, 1.5KR
          ];
          
          resistorPatterns.forEach(regex => {
            let match;
            while ((match = regex.exec(fullText)) !== null) {
              let valText = match[0];
              let num = parseFloat(valText);
              
              // Birim dÃ¶nÃ¼ÅŸÃ¼mÃ¼
              if (/k/i.test(valText)) num *= 1000;
              if (/m/i.test(valText)) num *= 1000000;
              
              // DeÄŸer aralÄ±ÄŸÄ± kontrolÃ¼
              if (num >= minVal && num <= maxVal) {
                let displayValue;
                if (num >= 1000000) {
                  displayValue = (num / 1000000).toFixed(1) + 'M';
                } else if (num >= 1000) {
                  displayValue = (num / 1000).toFixed(1) + 'K';
                } else {
                  displayValue = Math.round(num).toString();
                }
                
                if (!matches.includes(displayValue)) {
                  matches.push(displayValue);
                }
              }
            }
          });
          
        } else if (!model.url.startsWith('#demo')) {
          // URL'den PDF okuma
          statusText.textContent = 'PDF Ä°ndiriliyor...';
          const response = await fetch(model.url);
          
          if (!response.ok) {
            throw new Error(`HTTP ${response.status}: Dosya bulunamadÄ±`);
          }
          
          statusText.textContent = 'PDF Analiz Ediliyor...';
          const arrayBuffer = await response.arrayBuffer();
          
          const pdf = await pdfjsLib.getDocument({ data: arrayBuffer }).promise;
          let fullText = '';

          statusText.textContent = `${pdf.numPages} Sayfa Ä°ÅŸleniyor...`;
          
          for (let i = 1; i <= pdf.numPages; i++) {
            const page = await pdf.getPage(i);
            const content = await page.getTextContent();
            const strings = content.items.map(item => item.str).join(' ');
            fullText += strings + '\n';
            
            statusText.textContent = `Sayfa ${i}/${pdf.numPages} Ä°ÅŸleniyor...`;
          }

          statusText.textContent = 'DirenÃ§ DeÄŸerleri AranÄ±yor...';
          
          // AynÄ± regex mantÄ±ÄŸÄ±
          const resistorPatterns = [
            /\b\d+(\.\d+)?[kKmMrRÎ©Ï‰]\b/g,
            /\b\d+(\.\d+)?\s*[kKmM]?[Î©Ï‰]\b/g,
            /\b\d+(\.\d+)?\s*[kKmM]?\s*[Oo]hm[s]?\b/gi,
            /\b\d+(\.\d+)?\s*[kKmM]?\s*[Rr]\b/g,
          ];
          
          resistorPatterns.forEach(regex => {
            let match;
            while ((match = regex.exec(fullText)) !== null) {
              let valText = match[0];
              let num = parseFloat(valText);
              
              if (/k/i.test(valText)) num *= 1000;
              if (/m/i.test(valText)) num *= 1000000;
              
              if (num >= minVal && num <= maxVal) {
                let displayValue;
                if (num >= 1000000) {
                  displayValue = (num / 1000000).toFixed(1) + 'M';
                } else if (num >= 1000) {
                  displayValue = (num / 1000).toFixed(1) + 'K';
                } else {
                  displayValue = Math.round(num).toString();
                }
                
                if (!matches.includes(displayValue)) {
                  matches.push(displayValue);
                }
              }
            }
          });
          
        } else {
          // Demo dosyasÄ± iÃ§in simÃ¼lasyon
          statusText.textContent = 'Demo Veri OluÅŸturuluyor...';
          await new Promise(resolve => setTimeout(resolve, 1500));
          matches = generateRealisticMatches(minVal, maxVal, model.modelType || model.fileName);
        }
        
        model.matches = matches;
        model.scanned = true;
        model.status = matches.length > 0 ? 'found' : 'no-match';
        
        // Update UI based on results
        card.classList.remove('scanning');
        
        if (matches.length > 0) {
          card.classList.add('found');
          statusIcon.textContent = 'âœ…';
          statusText.textContent = `${matches.length} DeÄŸer Bulundu!`;
          
          // Show matches
          const matchesDiv = document.getElementById(`matches-${index}`);
          const matchesList = document.getElementById(`matches-list-${index}`);
          
          matchesList.innerHTML = matches.map(match => 
            `<span class="match-tag">âš¡ ${match}Î©</span>`
          ).join('');
          
          matchesDiv.style.display = 'block';
          
          // Activate link
          const link = document.getElementById(`link-${index}`);
          link.classList.add('active');
          
          updateStatus(`${model.fileName} - ${matches.length} eÅŸleÅŸme bulundu: ${matches.join(', ')}`);
          
        } else {
          card.classList.add('no-match');
          statusIcon.textContent = 'âŒ';
          statusText.textContent = 'EÅŸleÅŸme BulunamadÄ±';
          updateStatus(`${model.fileName} - Belirtilen aralÄ±kta deÄŸer bulunamadÄ±`);
        }
        
      } catch (error) {
        model.error = error.message;
        model.status = 'error';
        
        card.classList.remove('scanning');
        card.classList.add('error');
        statusIcon.textContent = 'âš ï¸';
        statusText.textContent = 'Hata: ' + error.message;
        
        updateStatus(`${model.fileName} - HATA: ${error.message}`);
      }
      
      updateCounts();
    }

    function generateRealisticMatches(minVal, maxVal, modelType) {
      // Different models have different probability of containing resistor values
      let probability = 0.7; // Default probability
      
      if (modelType.toLowerCase().includes('unknown') || modelType.includes('Bilinmeyen')) {
        probability = 0.3;
      } else if (modelType.toLowerCase().includes('schematic') || modelType.toLowerCase().includes('circuit')) {
        probability = 0.9;
      } else if (modelType.toLowerCase().includes('repair') || modelType.toLowerCase().includes('service')) {
        probability = 0.8;
      }
      
      if (Math.random() > probability) {
        return []; // No matches
      }
      
      const matchCount = Math.floor(Math.random() * 6) + 1; // 1-6 matches
      const matches = [];
      
      for (let i = 0; i < matchCount; i++) {
        const value = minVal + Math.random() * (maxVal - minVal);
        let unit = '';
        let displayValue = value;
        
        if (value >= 1000000) {
          displayValue = (value / 1000000).toFixed(1);
          unit = 'M';
        } else if (value >= 1000) {
          displayValue = (value / 1000).toFixed(1);
          unit = 'K';
        } else {
          displayValue = Math.round(value);
        }
        
        matches.push(displayValue + unit);
      }
      
      return [...new Set(matches)]; // Remove duplicates
    }

    function stopScan() {
      if (!isScanning) {
        showToast('âŒ Aktif tarama bulunamadÄ±!', 'warning');
        return;
      }
      
      isScanning = false;
      updateStatus('Tarama kullanÄ±cÄ± tarafÄ±ndan durduruldu');
      showToast('â¹ï¸ Tarama durduruldu!', 'warning');
    }

    function openModelPDF(index) {
      const model = models[index];
      
      if (model.status === 'error') {
        showToast('âŒ Bu dosyada hata oluÅŸtu!', 'error');
        return;
      }
      
      if (model.matches.length === 0) {
        showToast('âŒ Bu dosyada eÅŸleÅŸme bulunamadÄ±!', 'warning');
        return;
      }
      
      updateStatus(`${model.modelType || model.fileName} PDF'i aÃ§Ä±lÄ±yor...`);
      
      if (model.fileObject && model.fileObject instanceof File) {
        // Yerel dosya - Blob URL oluÅŸtur ve aÃ§
        try {
          const blob = new Blob([model.fileObject], { type: 'application/pdf' });
          const url = URL.createObjectURL(blob);
          window.open(url, '_blank');
          showToast(`ğŸ“– ${model.fileName} yeni sekmede aÃ§Ä±lÄ±yor...`, 'success');
          updateStatus(`Yerel PDF baÅŸarÄ±yla aÃ§Ä±ldÄ±: ${model.fileName}`);
          
          // Memory cleanup - birkaÃ§ saniye sonra URL'i temizle
          setTimeout(() => URL.revokeObjectURL(url), 10000);
          
        } catch (error) {
          showToast('âŒ Yerel PDF aÃ§Ä±lÄ±rken hata oluÅŸtu!', 'error');
          updateStatus(`Yerel PDF aÃ§ma hatasÄ±: ${error.message}`);
        }
        
      } else if (model.url.startsWith('#demo')) {
        // Demo dosyasÄ±
        showToast(`ğŸ® Demo: ${model.fileName} - ${model.matches.length} eÅŸleÅŸme var!`, 'info');
        updateStatus(`Demo PDF gÃ¶rÃ¼ntÃ¼lendi: ${model.matches.join(', ')}`);
        
        // Demo iÃ§in detaylÄ± bilgi penceresi
        const infoWindow = window.open('', '_blank', 'width=600,height=400');
        infoWindow.document.write(`
          <html>
            <head><title>Demo PDF - ${model.fileName}</title></head>
            <body style="font-family: Arial; padding: 20px; background: #f5f5f5;">
              <h2>ğŸ“„ ${model.fileName}</h2>
              <h3>ğŸ¯ Bulunan DirenÃ§ DeÄŸerleri:</h3>
              <div style="display: flex; flex-wrap: wrap; gap: 10px; margin: 20px 0;">
                ${model.matches.map(match => `
                  <span style="background: #4f46e5; color: white; padding: 8px 12px; border-radius: 15px; font-weight: bold;">
                    âš¡ ${match}Î©
                  </span>
                `).join('')}
              </div>
              <p style="color: #666; font-style: italic;">Bu bir demo PDF'dir. GerÃ§ek dosyalarÄ±nÄ±zÄ± taramak iÃ§in "ğŸ“ PDF DosyalarÄ±nÄ± SeÃ§" butonunu kullanÄ±n.</p>
              <button onclick="window.close()" style="background: #4f46e5; color: white; border: none; padding: 10px 20px; border-radius: 8px; cursor: pointer; margin-top: 20px;">
                Kapat
              </button>
            </body>
          </html>
        `);
        
      } else {
        // URL'den dosya
        try {
          window.open(model.url, '_blank');
          showToast(`ğŸ“– ${model.fileName} yeni sekmede aÃ§Ä±lÄ±yor...`, 'success');
          updateStatus(`PDF baÅŸarÄ±yla aÃ§Ä±ldÄ±: ${model.fileName}`);
        } catch (error) {
          showToast('âŒ PDF aÃ§Ä±lÄ±rken hata oluÅŸtu!', 'error');
          updateStatus(`PDF aÃ§ma hatasÄ±: ${error.message}`);
        }
      }
    }

    function updateStatus(message) {
      document.getElementById('currentStatus').textContent = message;
      
      // Auto-scroll status if panel is visible
      const statusContent = document.getElementById('statusContent');
      statusContent.scrollTop = statusContent.scrollHeight;
    }

    function updateProgress() {
      document.getElementById('statusProgress').style.width = scanProgress + '%';
    }

    function updateCounts() {
      const processed = models.filter(m => m.scanned).length;
      const found = models.reduce((acc, m) => acc + m.matches.length, 0);
      const errors = models.filter(m => m.error).length;
      
      document.getElementById('processedCount').textContent = `${processed}/${models.length}`;
      document.getElementById('foundCount').textContent = found;
      document.getElementById('errorCount').textContent = errors;
    }

    function showStatusPanel() {
      statusPanelVisible = true;
      document.getElementById('statusPanel').classList.add('show');
    }

    function hideStatusPanel() {
      statusPanelVisible = false;
      document.getElementById('statusPanel').classList.remove('show');
    }

    function toggleStatusPanel() {
      if (statusPanelVisible) {
        hideStatusPanel();
      } else {
        showStatusPanel();
      }
    }

    function showLoading(text = 'YÃ¼kleniyor...') {
      document.getElementById('loadingText').textContent = text;
      document.getElementById('loadingOverlay').style.display = 'flex';
    }

    function hideLoading() {
      document.getElementById('loadingOverlay').style.display = 'none';
    }

    function showToast(message, type = 'success') {
      const toast = document.createElement('div');
      toast.className = 'toast';
      toast.textContent = message;
      
      if (type === 'error') {
        toast.style.background = 'var(--error)';
      } else if (type === 'warning') {
        toast.style.background = 'var(--warning)';
      } else if (type === 'info') {
        toast.style.background = 'var(--info)';
      } else {
        toast.style.background = 'var(--success)';
      }
      
      document.body.appendChild(toast);
      setTimeout(() => toast.classList.add('show'), 100);
      setTimeout(() => {
        toast.classList.remove('show');
        setTimeout(() => {
          if (document.body.contains(toast)) {
            document.body.removeChild(toast);
          }
        }, 300);
      }, 4000);
    }

    // Keyboard shortcuts
    document.addEventListener('keydown', function(e) {
      if (e.ctrlKey || e.metaKey) {
        switch(e.key) {
          case 'Enter':
            e.preventDefault();
            if (!isScanning) startIntelligentScan();
            break;
          case 's':
            e.preventDefault();
            if (isScanning) stopScan();
            break;
          case 'r':
            e.preventDefault();
            refreshModels();
            break;
          case 'd':
            e.preventDefault();
            toggleTheme();
            break;
          case 'm':
            e.preventDefault();
            toggleStatusPanel();
            break;
        }
      }
    });
  </script>
</body>
</html>
